/* nvd3 version 1.8.2 (https://github.com/novus/nvd3) 2020-03-22 */

!function(){var ft={dev:!1};ft.tooltip=ft.tooltip||{},ft.utils=ft.utils||{},ft.models=ft.models||{},ft.charts={},ft.logs={},ft.dom={},ft.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return r.apply(this instanceof e&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),r=this;return e.prototype=this.prototype,n.prototype=new e,n}),ft.dev&&(ft.dispatch.on("render_start",function(t){ft.logs.startTime=+new Date}),ft.dispatch.on("render_end",function(t){ft.logs.endTime=+new Date,ft.logs.totalTime=ft.logs.endTime-ft.logs.startTime,ft.log("total",ft.logs.totalTime)})),ft.log=function(){if(ft.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(ft.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){Function.prototype.bind.call(console.log,console).apply(console,arguments)}return arguments[arguments.length-1]},ft.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},ft.render=function(i){i=i||1,ft.render.active=!0,ft.dispatch.render_start();var r=function(){for(var t,e,n=0;n<i&&(e=ft.render.queue[n]);n++)t=e.generate(),typeof e.callback==typeof Function&&e.callback(t);ft.render.queue.splice(0,n),ft.render.queue.length?setTimeout(r):(ft.dispatch.render_end(),ft.render.active=!1)};setTimeout(r)},ft.render.active=!1,ft.render.queue=[],ft.addGraph=function(t){typeof t==typeof Function&&(t={generate:t,callback:arguments[1]}),ft.render.queue.push(t),ft.render.active||ft.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=ft),"undefined"!=typeof window&&(window.nv=ft),ft.dom.write=function(t){return void 0!==window.fastdom?fastdom.write(t):t()},ft.dom.read=function(t){return void 0!==window.fastdom?fastdom.read(t):t()},ft.interactiveGuideline=function(){"use strict";var u={left:0,top:0},r=null,a=null,c=d3.scale.linear(),d=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),o=!0,f=null,p=ft.models.tooltip(),h="ActiveXObject"in window;function g(t){t.each(function(t){var e=d3.select(this),s=r||960,l=a||400,n=e.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([t]);function i(){var t=d3.mouse(this),e=t[0],n=t[1],i=!0,r=!1;if(h&&(e=d3.event.offsetX,n=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(i=!1),d3.event.target.className.baseVal.match("nv-legend")&&(r=!0)),i&&(e-=u.left,n-=u.top),e<0||n<0||s<e||l<n||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||r){if(h&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(p.nvPointerEventsClass)))return;return d.elementMouseout({mouseX:e,mouseY:n}),g.renderGuideLine(null),void p.hidden(!0)}p.hidden(!1);var a=void 0;if("function"==typeof c.rangeBands){var o=d3.bisect(c.range(),e)-1;if(!(c.range()[o]+c.rangeBand()>=e))return d.elementMouseout({mouseX:e,mouseY:n}),g.renderGuideLine(null),void p.hidden(!0);a=c.domain()[d3.bisect(c.range(),e)-1]}else a=c.invert(e);d.elementMousemove({mouseX:e,mouseY:n,pointXValue:a}),"dblclick"===d3.event.type&&d.elementDblclick({mouseX:e,mouseY:n,pointXValue:a}),"click"===d3.event.type&&d.elementClick({mouseX:e,mouseY:n,pointXValue:a}),"mousedown"===d3.event.type&&d.elementMouseDown({mouseX:e,mouseY:n,pointXValue:a}),"mouseup"===d3.event.type&&d.elementMouseUp({mouseX:e,mouseY:n,pointXValue:a})}n.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),f&&(f.on("touchmove",i).on("mousemove",i,!0).on("mouseout",i,!0).on("mousedown",i,!0).on("mouseup",i,!0).on("dblclick",i).on("click",i),g.guideLine=null,g.renderGuideLine=function(e){o&&(g.guideLine&&g.guideLine.attr("x1")===e||ft.dom.write(function(){var t=n.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[ft.utils.NaNtoZero(e)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",l).attr("y2",0),t.exit().remove()}))})})}return p.duration(0).hideDelay(0).hidden(!1),g.dispatch=d,g.tooltip=p,g.margin=function(t){return arguments.length?(u.top=void 0!==t.top?t.top:u.top,u.left=void 0!==t.left?t.left:u.left,g):u},g.width=function(t){return arguments.length?(r=t,g):r},g.height=function(t){return arguments.length?(a=t,g):a},g.xScale=function(t){return arguments.length?(c=t,g):c},g.showGuideLine=function(t){return arguments.length?(o=t,g):o},g.svgContainer=function(t){return arguments.length?(f=t,g):f},g},ft.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var i;i="function"!=typeof n?function(t){return t.x}:n;var r=d3.bisector(function(t,e){return i(t)-e}).left,a=d3.max([0,r(t,e)-1]),o=i(t[a]);if(void 0===o&&(o=a),o===e)return a;var s=d3.min([a+1,t.length-1]),l=i(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(o-e)?a:s},ft.nearestValueIndex=function(t,i,r){"use strict";var a=1/0,o=null;return t.forEach(function(t,e){var n=Math.abs(i-t);null!=t&&n<=a&&n<r&&(a=n,o=e)}),o},ft.models.tooltip=function(){"use strict";var e="nvtooltip-"+Math.floor(1e5*Math.random()),n=null,l="w",u=25,i=0,r=null,a=null,c=!0,d=200,f=null,p={left:null,top:null},o=!0,h=100,s=!0,g="nv-pointer-events-none",v=function(){return{left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0}},m=function(t,e){return t},x=function(t){return t},y=function(t,e){return t},b=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));s&&e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(x(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),n.append("td").classed("key",!0).classed("total",function(t){return!!t.total}).html(function(t,e){return y(t.key,e)}),n.append("td").classed("value",!0).html(function(t,e){return m(t.value,e)}),n.append("td").classed("unit",!0).html(function(t,e){return t.unit}),n.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var i=e.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},t=function(t){if(t&&t.series){if(t.series instanceof Array)return!!t.series.length;if(t.series instanceof Object)return t.series=[t.series],!0}return!1},k=function(){ft.dom.read(function(){var t=v(),e=function(t){var e,n,i,r=f.node().offsetHeight,a=f.node().offsetWidth,o=document.documentElement.clientWidth,s=document.documentElement.clientHeight;switch(l){case"e":e=-a-u,n=-r/2,t.left+e<0&&(e=u),(i=t.top+n)<0&&(n-=i),(i=t.top+n+r)>s&&(n-=i-s);break;case"w":e=u,n=-r/2,t.left+e+a>o&&(e=-a-u),(i=t.top+n)<0&&(n-=i),(i=t.top+n+r)>s&&(n-=i-s);break;case"n":e=-a/2-5,n=u,t.top+n+r>s&&(n=-r-u),(i=t.left+e)<0&&(e-=i),(i=t.left+e+a)>o&&(e-=i-o);break;case"s":e=-a/2,n=-r-u,t.top+n<0&&(n=u),(i=t.left+e)<0&&(e-=i),(i=t.left+e+a)>o&&(e-=i-o);break;case"center":e=-a/2,n=-r/2;break;default:n=e=0}return{left:e,top:n}}(t),n=t.left+e.left,i=t.top+e.top;if(c)f.interrupt().transition().delay(d).duration(0).style("opacity",0);else{var r="translate("+p.left+"px, "+p.top+"px)",a="translate("+n+"px, "+i+"px)",o=d3.interpolateString(r,a),s=f.style("opacity")<.1;f.interrupt().transition().duration(s?0:h).styleTween("transform",function(t){return o},"important").styleTween("-webkit-transform",function(t){return o}).style("-ms-transform",a).style("opacity",1)}p.left=n,p.top=i})};function w(){if(o&&t(n))return ft.dom.write(function(){!function(){if(!f){var t=a||document.body;(f=d3.select(t).append("div").attr("class","nvtooltip "+(r||"xy-tooltip")).attr("id",e)).style("top",0).style("left",0),f.style("opacity",0),f.style("position","fixed"),f.selectAll("div, table, td, tr").classed(g,!0),f.classed(g,!0)}}();var t=b(n);t&&(f.node().innerHTML=t),k()}),w}return w.nvPointerEventsClass=g,w.options=ft.utils.optionsFunc.bind(w),w._options=Object.create({},{duration:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return l},set:function(t){l=t}},distance:{get:function(){return u},set:function(t){u=t}},snapDistance:{get:function(){return i},set:function(t){i=t}},classes:{get:function(){return r},set:function(t){r=t}},chartContainer:{get:function(){return a},set:function(t){a=t}},enabled:{get:function(){return o},set:function(t){o=t}},hideDelay:{get:function(){return d},set:function(t){d=t}},contentGenerator:{get:function(){return b},set:function(t){b=t}},valueFormatter:{get:function(){return m},set:function(t){m=t}},headerFormatter:{get:function(){return x},set:function(t){x=t}},keyFormatter:{get:function(){return y},set:function(t){y=t}},headerEnabled:{get:function(){return s},set:function(t){s=t}},position:{get:function(){return v},set:function(t){v=t}},fixedTop:{get:function(){return null},set:function(t){ft.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){ft.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return c},set:function(t){c!=t&&(c=!!t,w())}},data:{get:function(){return n},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),n=t}},node:{get:function(){return f.node()},set:function(t){}},id:{get:function(){return e},set:function(t){}}}),ft.utils.initOptions(w),w},ft.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight):document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),t},ft.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):ft.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},ft.utils.getColor=function(t){if(void 0===t)return ft.utils.defaultColor();if(Array.isArray(t)){var i=d3.scale.ordinal().range(t);return function(t,e){var n=void 0===e?t:e;return t.color||i(n)}}return t},ft.utils.defaultColor=function(){return ft.utils.getColor(d3.scale.category20().range())},ft.utils.customTheme=function(i,r,a){r=r||function(t){return t.key};var o=(a=a||d3.scale.category20().range()).length;return function(t,e){var n=r(t);return"function"==typeof i[n]?i[n]():void 0!==i[n]?i[n]:(o=o||a.length,a[--o])}},ft.utils.pjax=function(n,i){function t(t){d3.html(t,function(t){var e=d3.select(i).node();e.parentNode.replaceChild(d3.select(t).select(i).node(),e),ft.utils.pjax(n,i)})}d3.selectAll(n).on("click",function(){history.pushState(this.href,this.textContent,this.href),t(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&t(d3.event.state)})},ft.utils.calcApproxTextWidth=function(t){if("function"!=typeof t.style||"function"!=typeof t.text)return 0;var e=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*e*.5},ft.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},ft.utils.renderWatch=function(t,e){if(!(this instanceof ft.utils.renderWatch))return new ft.utils.renderWatch(t,e);var a=void 0!==e?e:250,o=[],s=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach(function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",function(t){e.__rendered=!0,s.renderEnd("model")}),o.indexOf(t)<0&&o.push(t)}),this},this.reset=function(t){void 0!==t&&(a=t),o=[]},this.transition=function(n,i,t){if(t=1<(i=1<arguments.length?[].slice.call(arguments,1):[]).length?i.pop():void 0!==a?a:250,n.__rendered=!1,o.indexOf(n)<0&&o.push(n),0===t)return n.__rendered=!0,n.delay=function(){return this},n.duration=function(){return this},n;0===n.length||n.every(function(t){return!t.length})?n.__rendered=!0:n.__rendered=!1;var r=0;return n.transition().duration(t).each(function(){++r}).each("end",function(t,e){0==--r&&(n.__rendered=!0,s.renderEnd.apply(this,i))})},this.renderEnd=function(){o.every(function(t){return t.__rendered})&&(o.forEach(function(t){t.__rendered=!1}),t.renderEnd.apply(this,arguments))}},ft.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(t){for(var e in t){var n=a[e]instanceof Array,i="object"==typeof a[e],r="object"==typeof t[e];i&&!n&&r?ft.utils.deepExtend(a[e],t[e]):a[e]=t[e]}})},ft.utils.state=function(){if(!(this instanceof ft.utils.state))return new ft.utils.state;var n={},e=function(){},i=function(){return{}},r=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){e(t,!0)}),this.getter=function(t){return i=t,this},this.setter=function(n,i){return i=i||function(){},e=function(t,e){n(t),e&&i()},this},this.init=function(t){r=r||{},ft.utils.deepExtend(r,t)};this.update=function(){r&&(e(r,!1),r=null),function(){var t=i();if(JSON.stringify(t)===JSON.stringify(n))return!1;for(var e in t)void 0===n[e]&&(n[e]={}),n[e]=t[e],0;return!0}.call(this)&&this.dispatch.change(n)}},ft.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},ft.utils.calcTicksX=function(t,e){for(var n=1,i=0;i<e.length;i+=1){var r=e[i]&&e[i].values?e[i].values.length:0;n=n<r?r:n}return ft.log("Requested number of ticks: ",t),ft.log("Calculated max values to be: ",n),t=(t=n<t?t=n-1:t)<1?1:t,t=Math.floor(t),ft.log("Calculating tick count as: ",t),t},ft.utils.calcTicksY=function(t,e){return ft.utils.calcTicksX(t,e)},ft.utils.initOption=function(e,n){e._calls&&e._calls[n]?e[n]=e._calls[n]:(e[n]=function(t){return arguments.length?(e._overrides[n]=!0,e._options[n]=t,e):e._options[n]},e["_"+n]=function(t){return arguments.length?(e._overrides[n]||(e._options[n]=t),e):e._options[n]})},ft.utils.initOptions=function(t){t._overrides=t._overrides||{};var e=Object.getOwnPropertyNames(t._options||{}),n=Object.getOwnPropertyNames(t._calls||{});for(var i in e=e.concat(n))ft.utils.initOption(t,e[i])},ft.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},ft.utils.arrayUnique=function(n){return n.sort().filter(function(t,e){return!e||t!=n[e-1]})},ft.utils.symbolMap=d3.map(),ft.utils.symbol=function(){var r,a=64;function e(t,e){var n=r.call(this,t,e),i=a.call(this,t,e);return-1!==d3.svg.symbolTypes.indexOf(n)?d3.svg.symbol().type(n).size(i)():ft.utils.symbolMap.get(n)(i)}return e.type=function(t){return arguments.length?(r=d3.functor(t),e):r},e.size=function(t){return arguments.length?(a=d3.functor(t),e):a},e},ft.utils.inheritOptions=function(t,e){var n=Object.getOwnPropertyNames(e._options||{}),i=Object.getOwnPropertyNames(e._calls||{}),r=e._inherited||[],a=e._d3options||[],o=n.concat(i).concat(r).concat(a);o.unshift(e),o.unshift(t),d3.rebind.apply(this,o),t._inherited=ft.utils.arrayUnique(n.concat(i).concat(r).concat(n).concat(t._inherited||[])),t._d3options=ft.utils.arrayUnique(a.concat(t._d3options||[]))},ft.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},ft.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},ft.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},ft.utils.availableHeight=function(t,e,n){return Math.max(0,ft.utils.sanitizeHeight(t,e)-n.top-n.bottom)},ft.utils.availableWidth=function(t,e,n){return Math.max(0,ft.utils.sanitizeWidth(t,e)-n.left-n.right)},ft.utils.noData=function(t,e){var n=t.options(),i=n.margin(),r=n.noData(),a=null==r?["No Data Available."]:[r],o=ft.utils.availableHeight(null,e,i),s=ft.utils.availableWidth(null,e,i),l=i.left+s/2,u=i.top+o/2;e.selectAll("g").remove();var c=e.selectAll(".nv-noData").data(a);c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),c.attr("x",l).attr("y",u).text(function(t){return t})},ft.utils.wrapTicks=function(t,l){t.each(function(){for(var t,e=d3.select(this),n=e.text().split(/\s+/).reverse(),i=[],r=0,a=e.attr("y"),o=parseFloat(e.attr("dy")),s=e.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",o+"em");t=n.pop();)i.push(t),s.text(i.join(" ")),s.node().getComputedTextLength()>l&&(i.pop(),s.text(i.join(" ")),i=[t],s=e.append("tspan").attr("x",0).attr("y",a).attr("dy",1.1*++r+o+"em").text(t))})},ft.utils.arrayEquals=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ft.arrayEquals(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0},ft.models.axis=function(){"use strict";var g,v=d3.svg.axis(),m=d3.scale.linear(),x={top:0,right:0,bottom:0,left:0},y=75,e=60,b=null,k=!0,w=0,M=!0,A=!1,C=!1,S=null,W=0,n=250,t=d3.dispatch("renderEnd");v.scale(m).orient("bottom").tickFormat(function(t){return t});var E=ft.utils.renderWatch(t,n);function i(t){return E.reset(),t.each(function(t){var e=d3.select(this);ft.utils.initSVG(e);var n=e.selectAll("g.nv-wrap.nv-axis").data([t]),i=(n.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),n.select("g"));null!==S?v.ticks(S):"top"!=v.orient()&&"bottom"!=v.orient()||v.ticks(Math.abs(m.range()[1]-m.range()[0])/100),i.watchTransition(E,"axis").call(v),g=g||v.scale();var r=v.tickFormat();null==r&&(r=g.tickFormat());var a,o,s,l=i.selectAll("text.nv-axislabel").data([b||null]);switch(l.exit().remove(),v.orient()){case"top":l.enter().append("text").attr("class","nv-axislabel"),s=0,1===m.range().length?s=C?2*m.range()[0]+m.rangeBand():0:2===m.range().length?s=C?m.range()[0]+m.range()[1]+m.rangeBand():m.range()[1]:2<m.range().length&&(s=m.range()[m.range().length-1]+(m.range()[1]-m.range()[0])),l.attr("text-anchor","middle").attr("y",0).attr("x",s/2),k&&((o=n.selectAll("g.nv-axisMaxMin").data(m.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),o.exit().remove(),o.attr("transform",function(t,e){return"translate("+ft.utils.NaNtoZero(m(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-v.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=r(t);return(""+n).match("NaN")?"":n}),o.watchTransition(E,"min-max top").attr("transform",function(t,e){return"translate("+ft.utils.NaNtoZero(m.range()[e])+",0)"}));break;case"bottom":a=W+36;var u=30,c=0,d=i.selectAll("g").select("text"),f="";if(w%360){d.each(function(t,e){var n=this.getBoundingClientRect(),i=n.width;c=n.height,u<i&&(u=i)}),f="rotate("+w+" 0,"+(c/2+v.tickPadding())+")";var p=Math.abs(Math.sin(w*Math.PI/180));a=(p?p*u:u)+30,d.attr("transform",f).style("text-anchor",0<w%360?"start":"end")}else A?d.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"}):d.attr("transform","translate(0,0)");l.enter().append("text").attr("class","nv-axislabel"),s=0,1===m.range().length?s=C?2*m.range()[0]+m.rangeBand():0:2===m.range().length?s=C?m.range()[0]+m.range()[1]+m.rangeBand():m.range()[1]:2<m.range().length&&(s=m.range()[m.range().length-1]+(m.range()[1]-m.range()[0])),l.attr("text-anchor","middle").attr("y",a).attr("x",s/2),k&&((o=n.selectAll("g.nv-axisMaxMin").data([m.domain()[0],m.domain()[m.domain().length-1]])).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),o.exit().remove(),o.attr("transform",function(t,e){return"translate("+ft.utils.NaNtoZero(m(t)+(C?m.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",v.tickPadding()).attr("transform",f).style("text-anchor",w?0<w%360?"start":"end":"middle").text(function(t,e){var n=r(t);return(""+n).match("NaN")?"":n}),o.watchTransition(E,"min-max bottom").attr("transform",function(t,e){return"translate("+ft.utils.NaNtoZero(m(t)+(C?m.rangeBand()/2:0))+",0)"}));break;case"right":l.enter().append("text").attr("class","nv-axislabel"),l.style("text-anchor",M?"middle":"begin").attr("transform",M?"rotate(90)":"").attr("y",M?12-Math.max(x.right,y):-10).attr("x",M?d3.max(m.range())/2:v.tickPadding()),k&&((o=n.selectAll("g.nv-axisMaxMin").data(m.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),o.exit().remove(),o.attr("transform",function(t,e){return"translate(0,"+ft.utils.NaNtoZero(m(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",v.tickPadding()).style("text-anchor","start").text(function(t,e){var n=r(t);return(""+n).match("NaN")?"":n}),o.watchTransition(E,"min-max right").attr("transform",function(t,e){return"translate(0,"+ft.utils.NaNtoZero(m.range()[e])+")"}).select("text").style("opacity",1));break;case"left":l.enter().append("text").attr("class","nv-axislabel"),l.style("text-anchor",M?"middle":"end").attr("transform",M?"rotate(-90)":"").attr("y",M?25-Math.max(x.left,y)-(W||0):-10).attr("x",M?-d3.max(m.range())/2:-v.tickPadding()),k&&((o=n.selectAll("g.nv-axisMaxMin").data(m.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),o.exit().remove(),o.attr("transform",function(t,e){return"translate(0,"+ft.utils.NaNtoZero(g(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-v.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=r(t);return(""+n).match("NaN")?"":n}),o.watchTransition(E,"min-max right").attr("transform",function(t,e){return"translate(0,"+ft.utils.NaNtoZero(m.range()[e])+")"}).select("text").style("opacity",1))}if(l.text(function(t){return t}),!k||"left"!==v.orient()&&"right"!==v.orient()||(i.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(m(t)<m.range()[1]+10||m(t)>m.range()[0]-10)&&((1e-10<t||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),m.domain()[0]==m.domain()[1]&&0==m.domain()[0]&&n.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),k&&("top"===v.orient()||"bottom"===v.orient())){var h=[];n.selectAll("g.nv-axisMaxMin").each(function(e,n){try{n?h.push(m(e)-this.getBoundingClientRect().width-4):h.push(m(e)+this.getBoundingClientRect().width+4)}catch(t){n?h.push(m(e)-4):h.push(m(e)+4)}}),i.selectAll("g").each(function(t,e){(m(t)<h[0]||m(t)>h[1])&&(1e-10<t||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}i.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),g=m.copy()}),E.renderEnd("axis immediate"),i}return i.axis=v,i.dispatch=t,i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{axisLabelDistance:{get:function(){return W},set:function(t){W=t}},staggerLabels:{get:function(){return A},set:function(t){A=t}},rotateLabels:{get:function(){return w},set:function(t){w=t}},rotateYLabel:{get:function(){return M},set:function(t){M=t}},showMaxMin:{get:function(){return k},set:function(t){k=t}},axisLabel:{get:function(){return b},set:function(t){b=t}},height:{get:function(){return e},set:function(t){e=t}},ticks:{get:function(){return S},set:function(t){S=t}},width:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return x},set:function(t){x.top=void 0!==t.top?t.top:x.top,x.right=void 0!==t.right?t.right:x.right,x.bottom=void 0!==t.bottom?t.bottom:x.bottom,x.left=void 0!==t.left?t.left:x.left}},duration:{get:function(){return n},set:function(t){n=t,E.reset(n)}},scale:{get:function(){return m},set:function(t){m=t,v.scale(m),C="function"==typeof m.rangeBands,ft.utils.inheritOptionsD3(i,m,["domain","range","rangeBand","rangeBands"])}}}),ft.utils.initOptions(i),ft.utils.inheritOptionsD3(i,v,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),ft.utils.inheritOptionsD3(i,m,["domain","range","rangeBand","rangeBands"]),i},ft.models.boxPlot=function(){"use strict";var d,f,p,h,g,v={top:0,right:0,bottom:0,left:0},m=960,x=500,e=Math.floor(1e4*Math.random()),y=d3.scale.ordinal(),b=d3.scale.linear(),k=function(t){return t.x},n=function(t){return t.y},w=ft.utils.defaultColor(),M=null,A=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=250,S=null,W=ft.utils.renderWatch(A,C);function i(t){return W.reset(),t.each(function(n){var t=m-v.left-v.right,e=x-v.top-v.bottom;M=d3.select(this),ft.utils.initSVG(M),y.domain(d||n.map(function(t,e){return k(t,e)})).rangeBands(p||[0,t],.1);var i=[];f||(i=[d3.min(n.map(function(t){var e=[];return e.push(t.values.Q1),t.values.hasOwnProperty("whisker_low")&&null!==t.values.whisker_low&&e.push(t.values.whisker_low),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.min(e)})),d3.max(n.map(function(t){var e=[];return e.push(t.values.Q3),t.values.hasOwnProperty("whisker_high")&&null!==t.values.whisker_high&&e.push(t.values.whisker_high),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.max(e)}))]);b.domain(f||i),b.range(h||[e,0]),g=g||b.copy().range([b(0),b(0)]);var r=M.selectAll("g.nv-wrap").data([n]);r.enter().append("g").attr("class","nvd3 nv-wrap");r.attr("transform","translate("+v.left+","+v.top+")");var a=r.selectAll(".nv-boxplot").data(function(t){return t}),o=a.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);a.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(y(k(t,e))+.05*y.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),a.watchTransition(W,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,e){return e*C/n.length}).attr("transform",function(t,e){return"translate("+(y(k(t,e))+.05*y.rangeBand())+", 0)"}),a.exit().remove(),o.each(function(e,n){var i=d3.select(this);["low","high"].forEach(function(t){e.values.hasOwnProperty("whisker_"+t)&&null!==e.values["whisker_"+t]&&(i.append("line").style("stroke",e.color?e.color:w(e,n)).attr("class","nv-boxplot-whisker nv-boxplot-"+t),i.append("line").style("stroke",e.color?e.color:w(e,n)).attr("class","nv-boxplot-tick nv-boxplot-"+t))})});var s=a.selectAll(".nv-boxplot-outlier").data(function(t){return t.values.hasOwnProperty("outliers")&&null!==t.values.outliers?t.values.outliers:[]});s.enter().append("circle").style("fill",function(t,e,n){return w(t,n)}).style("stroke",function(t,e,n){return w(t,n)}).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),A.elementMouseover({series:{key:t,color:w(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),A.elementMouseout({series:{key:t,color:w(t,n)},e:d3.event})}).on("mousemove",function(t,e){A.elementMousemove({e:d3.event})}),s.attr("class","nv-boxplot-outlier"),s.watchTransition(W,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*y.rangeBand()).attr("cy",function(t,e,n){return b(t)}).attr("r","3"),s.exit().remove();function l(){return null===S?.9*y.rangeBand():Math.min(75,.9*y.rangeBand())}function u(){return.45*y.rangeBand()-l()/2}function c(){return.45*y.rangeBand()+l()/2}["low","high"].forEach(function(n){var i="low"===n?"Q1":"Q3";a.select("line.nv-boxplot-whisker.nv-boxplot-"+n).watchTransition(W,"nv-boxplot: boxplots").attr("x1",.45*y.rangeBand()).attr("y1",function(t,e){return b(t.values["whisker_"+n])}).attr("x2",.45*y.rangeBand()).attr("y2",function(t,e){return b(t.values[i])}),a.select("line.nv-boxplot-tick.nv-boxplot-"+n).watchTransition(W,"nv-boxplot: boxplots").attr("x1",u).attr("y1",function(t,e){return b(t.values["whisker_"+n])}).attr("x2",c).attr("y2",function(t,e){return b(t.values["whisker_"+n])})}),["low","high"].forEach(function(i){o.selectAll(".nv-boxplot-"+i).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),A.elementMouseover({series:{key:t.values["whisker_"+i],color:w(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),A.elementMouseout({series:{key:t.values["whisker_"+i],color:w(t,n)},e:d3.event})}).on("mousemove",function(t,e){A.elementMousemove({e:d3.event})})}),o.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),A.elementMouseover({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||w(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||w(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||w(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),A.elementMouseout({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||w(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||w(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||w(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){A.elementMousemove({e:d3.event})}),a.select("rect.nv-boxplot-box").watchTransition(W,"nv-boxplot: boxes").attr("y",function(t,e){return b(t.values.Q3)}).attr("width",l).attr("x",u).attr("height",function(t,e){return Math.abs(b(t.values.Q3)-b(t.values.Q1))||1}).style("fill",function(t,e){return t.color||w(t,e)}).style("stroke",function(t,e){return t.color||w(t,e)}),o.append("line").attr("class","nv-boxplot-median"),a.select("line.nv-boxplot-median").watchTransition(W,"nv-boxplot: boxplots line").attr("x1",u).attr("y1",function(t,e){return b(t.values.Q2)}).attr("x2",c).attr("y2",function(t,e){return b(t.values.Q2)}),y.copy(),g=b.copy()}),W.renderEnd("nv-boxplot immediate"),i}return i.dispatch=A,i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return x},set:function(t){x=t}},maxBoxWidth:{get:function(){return S},set:function(t){S=t}},x:{get:function(){return k},set:function(t){k=t}},y:{get:function(){return n},set:function(t){n=t}},xScale:{get:function(){return y},set:function(t){y=t}},yScale:{get:function(){return b},set:function(t){b=t}},xDomain:{get:function(){return d},set:function(t){d=t}},yDomain:{get:function(){return f},set:function(t){f=t}},xRange:{get:function(){return p},set:function(t){p=t}},yRange:{get:function(){return h},set:function(t){h=t}},id:{get:function(){return e},set:function(t){e=t}},margin:{get:function(){return v},set:function(t){v.top=void 0!==t.top?t.top:v.top,v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},color:{get:function(){return w},set:function(t){w=ft.utils.getColor(t)}},duration:{get:function(){return C},set:function(t){C=t,W.reset(C)}}}),ft.utils.initOptions(i),i},ft.models.boxPlotChart=function(){"use strict";var c,d,f=ft.models.boxPlot(),p=ft.models.axis(),h=ft.models.axis(),g={top:15,right:10,bottom:50,left:60},v=null,m=null,e=ft.utils.getColor(),x=!0,y=!0,b=!1,k=!1,n=ft.models.tooltip(),w="No Data Available.",M=d3.dispatch("beforeUpdate","renderEnd"),A=250;p.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),h.orient(b?"right":"left").tickFormat(d3.format(",.1f")),n.duration(0);var i=ft.utils.renderWatch(M,A);function C(t){return i.reset(),i.models(f),x&&i.models(p),y&&i.models(h),t.each(function(t){var e=d3.select(this);ft.utils.initSVG(e);var n=(v||parseInt(e.style("width"))||960)-g.left-g.right,i=(m||parseInt(e.style("height"))||400)-g.top-g.bottom;if(C.update=function(){M.beforeUpdate(),e.transition().duration(A).call(C)},C.container=this,!(t&&t.length&&t.filter(function(t){return t.values.hasOwnProperty("Q1")&&t.values.hasOwnProperty("Q2")&&t.values.hasOwnProperty("Q3")}).length)){var r=e.selectAll(".nv-noData").data([w]);return r.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),r.attr("x",g.left+n/2).attr("y",g.top+i/2).text(function(t){return t}),C}e.selectAll(".nv-noData").remove(),c=f.xScale(),d=f.yScale().clamp(!0);var a=e.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([t]),o=a.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),s=o.append("defs"),l=a.select("g");if(o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),o.append("g").attr("class","nv-barsWrap"),l.attr("transform","translate("+g.left+","+g.top+")"),b&&l.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),f.width(n).height(i),l.select(".nv-barsWrap").datum(t.filter(function(t){return!t.disabled})).transition().call(f),s.append("clipPath").attr("id","nv-x-label-clip-"+f.id()).append("rect"),l.select("#nv-x-label-clip-"+f.id()+" rect").attr("width",c.rangeBand()*(k?2:1)).attr("height",16).attr("x",-c.rangeBand()/(k?1:2)),x){p.scale(c).ticks(ft.utils.calcTicksX(n/100,t)).tickSize(-i,0),l.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),l.select(".nv-x.nv-axis").call(p);var u=l.select(".nv-x.nv-axis").selectAll("g");k&&u.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}y&&(h.scale(d).ticks(Math.floor(i/36)).tickSize(-n,0),l.select(".nv-y.nv-axis").call(h)),l.select(".nv-zeroLine line").attr("x1",0).attr("x2",n).attr("y1",d(0)).attr("y2",d(0))}),i.renderEnd("nv-boxplot chart immediate"),C}return f.dispatch.on("elementMouseover.tooltip",function(t){n.data(t).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(t){n.data(t).hidden(!0)}),f.dispatch.on("elementMousemove.tooltip",function(t){n()}),C.dispatch=M,C.boxplot=f,C.xAxis=p,C.yAxis=h,C.tooltip=n,C.options=ft.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},staggerLabels:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},tooltipContent:{get:function(){return n},set:function(t){n=t}},noData:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},duration:{get:function(){return A},set:function(t){A=t,i.reset(A),f.duration(A),p.duration(A),h.duration(A)}},color:{get:function(){return e},set:function(t){e=ft.utils.getColor(t),f.color(e)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,h.orient(t?"right":"left")}}}),ft.utils.inheritOptions(C,f),ft.utils.initOptions(C),C},ft.models.bullet=function(){"use strict";var k={top:0,right:0,bottom:0,left:0},e="left",w=!1,M=function(t){return t.ranges},A=function(t){return t.markers?t.markers:[]},C=function(t){return t.measures},S=function(t){return t.rangeLabels?t.rangeLabels:[]},W=function(t){return t.markerLabels?t.markerLabels:[]},E=function(t){return t.measureLabels?t.measureLabels:[]},F=[0],_=380,D=30,O=null,n=null,N=ft.utils.getColor(["#1f77b4"]),B=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");function i(t){return t.each(function(t,e){var n=_-k.left-k.right,i=D-k.top-k.bottom;O=d3.select(this),ft.utils.initSVG(O);var r=M.call(this,t,e).slice().sort(d3.descending),a=A.call(this,t,e).slice().sort(d3.descending),o=C.call(this,t,e).slice().sort(d3.descending),s=S.call(this,t,e).slice(),l=W.call(this,t,e).slice(),u=E.call(this,t,e).slice(),c=d3.scale.linear().domain(d3.extent(d3.merge([F,r]))).range(w?[n,0]:[0,n]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(c.range());this.__chart__=c;var d=d3.min(r),f=d3.max(r),p=r[1],h=O.selectAll("g.nv-wrap.nv-bullet").data([t]),g=h.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),v=h.select("g");g.append("rect").attr("class","nv-range nv-rangeMax"),g.append("rect").attr("class","nv-range nv-rangeAvg"),g.append("rect").attr("class","nv-range nv-rangeMin"),g.append("rect").attr("class","nv-measure"),h.attr("transform","translate("+k.left+","+k.top+")");function m(t){return Math.abs(c(t)-c(0))}function x(t){return c(t<0?t:0)}v.select("rect.nv-rangeMax").attr("height",i).attr("width",m(0<f?f:d)).attr("x",x(0<f?f:d)).datum(0<f?f:d),v.select("rect.nv-rangeAvg").attr("height",i).attr("width",m(p)).attr("x",x(p)).datum(p),v.select("rect.nv-rangeMin").attr("height",i).attr("width",m(f)).attr("x",x(f)).attr("width",m(0<f?d:f)).attr("x",x(0<f?d:f)).datum(0<f?d:f),v.select("rect.nv-measure").style("fill",N).attr("height",i/3).attr("y",i/3).attr("width",o<0?c(0)-c(o[0]):c(o[0])-c(0)).attr("x",x(o)).on("mouseover",function(){B.elementMouseover({value:o[0],label:u[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){B.elementMousemove({value:o[0],label:u[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){B.elementMouseout({value:o[0],label:u[0]||"Current",color:d3.select(this).style("fill")})});var y=i/6,b=a.map(function(t,e){return{value:t,label:l[e]}});g.selectAll("path.nv-markerTriangle").data(b).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+y+"L"+y+","+-y+" "+-y+","+-y+"Z").on("mouseover",function(t){B.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[c(t.value),i/2]})}).on("mousemove",function(t){B.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){B.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),v.selectAll("path.nv-markerTriangle").data(b).attr("transform",function(t){return"translate("+c(t.value)+","+i/2+")"}),h.selectAll(".nv-range").on("mouseover",function(t,e){var n=s[e]||(e?1==e?"Mean":"Minimum":"Maximum");B.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})}).on("mousemove",function(){B.elementMousemove({value:o[0],label:u[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){var n=s[e]||(e?1==e?"Mean":"Minimum":"Maximum");B.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})})}),i}return i.dispatch=B,i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{ranges:{get:function(){return M},set:function(t){M=t}},markers:{get:function(){return A},set:function(t){A=t}},measures:{get:function(){return C},set:function(t){C=t}},forceX:{get:function(){return F},set:function(t){F=t}},width:{get:function(){return _},set:function(t){_=t}},height:{get:function(){return D},set:function(t){D=t}},tickFormat:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},orient:{get:function(){return e},set:function(t){w="right"==(e=t)||"bottom"==e}},color:{get:function(){return N},set:function(t){N=ft.utils.getColor(t)}}}),ft.utils.initOptions(i),i},ft.models.bulletChart=function(){"use strict";var b=ft.models.bullet(),e=ft.models.tooltip(),n="left",k=!1,w={top:5,right:40,bottom:20,left:120},M=function(t){return t.ranges},A=function(t){return t.markers?t.markers:[]},C=function(t){return t.measures},S=null,W=55,E=null,F=null,i=null,t=d3.dispatch();function _(y){return y.each(function(t,e){var n=d3.select(this);ft.utils.initSVG(n);var i=ft.utils.availableWidth(S,n,w),r=W-w.top-w.bottom;if(_.update=function(){_(y)},_.container=this,!t||!M.call(this,t,e))return ft.utils.noData(_,n),_;n.selectAll(".nv-noData").remove();var a=M.call(this,t,e).slice().sort(d3.descending),o=A.call(this,t,e).slice().sort(d3.descending),s=C.call(this,t,e).slice().sort(d3.descending),l=n.selectAll("g.nv-wrap.nv-bulletChart").data([t]),u=l.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),c=l.select("g");u.append("g").attr("class","nv-bulletWrap"),u.append("g").attr("class","nv-titles"),l.attr("transform","translate("+w.left+","+w.top+")");var d=d3.scale.linear().domain([0,Math.max(a[0],o[0]||0,s[0])]).range(k?[i,0]:[0,i]),f=this.__chart__||d3.scale.linear().domain([0,1/0]).range(d.range());this.__chart__=d;var p=u.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(W-w.top-w.bottom)/2+")");p.append("text").attr("class","nv-title").text(function(t){return t.title}),p.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),b.width(i).height(r);var h=c.select(".nv-bulletWrap");d3.transition(h).call(b);var g=E||d.tickFormat(i/100),v=c.selectAll("g.nv-tick").data(d.ticks(F||i/50),function(t){return this.textContent||g(t)}),m=v.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+f(t)+",0)"}).style("opacity",1e-6);m.append("line").attr("y1",r).attr("y2",7*r/6),m.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*r/6).text(g);var x=d3.transition(v).attr("transform",function(t){return"translate("+d(t)+",0)"}).style("opacity",1);x.select("line").attr("y1",r).attr("y2",7*r/6),x.select("text").attr("y",7*r/6),d3.transition(v.exit()).attr("transform",function(t){return"translate("+d(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),_}return e.duration(0).headerEnabled(!1),b.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},e.data(t).hidden(!1)}),b.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),b.dispatch.on("elementMousemove.tooltip",function(t){e()}),_.bullet=b,_.dispatch=t,_.tooltip=e,_.options=ft.utils.optionsFunc.bind(_),_._options=Object.create({},{ranges:{get:function(){return M},set:function(t){M=t}},markers:{get:function(){return A},set:function(t){A=t}},measures:{get:function(){return C},set:function(t){C=t}},width:{get:function(){return S},set:function(t){S=t}},height:{get:function(){return W},set:function(t){W=t}},tickFormat:{get:function(){return E},set:function(t){E=t}},ticks:{get:function(){return F},set:function(t){F=t}},noData:{get:function(){return i},set:function(t){i=t}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},orient:{get:function(){return n},set:function(t){k="right"==(n=t)||"bottom"==n}}}),ft.utils.inheritOptions(_,b),ft.utils.initOptions(_),_},ft.models.candlestickBar=function(){"use strict";var d,f,p,h,g,v={top:0,right:0,bottom:0,left:0},m=null,x=null,y=Math.floor(1e4*Math.random()),b=d3.scale.linear(),k=d3.scale.linear(),w=function(t){return t.x},M=function(t){return t.y},A=function(t){return t.open},C=function(t){return t.close},S=function(t){return t.high},W=function(t){return t.low},E=[],F=[],_=!1,D=!0,e=ft.utils.defaultColor(),n=!1,O=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function i(t){return t.each(function(t){d=d3.select(this);var e=ft.utils.availableWidth(m,d,v),n=ft.utils.availableHeight(x,d,v);ft.utils.initSVG(d);var i=e/t[0].values.length*.45;b.domain(f||d3.extent(t[0].values.map(w).concat(E))),_?b.range(h||[.5*e/t[0].values.length,e*(t[0].values.length-.5)/t[0].values.length]):b.range(h||[5+i/2,e-i/2-5]),k.domain(p||[d3.min(t[0].values.map(W).concat(F)),d3.max(t[0].values.map(S).concat(F))]).range(g||[n,0]),b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]-.01*b.domain()[0],b.domain()[1]+.01*b.domain()[1]]):b.domain([-1,1])),k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var r=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([t[0].values]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),o=a.append("defs"),s=a.append("g"),l=r.select("g");s.append("g").attr("class","nv-ticks"),r.attr("transform","translate("+v.left+","+v.top+")"),d.on("click",function(t,e){O.chartClick({data:t,index:e,pos:d3.event,id:y})}),o.append("clipPath").attr("id","nv-chart-clip-path-"+y).append("rect"),r.select("#nv-chart-clip-path-"+y+" rect").attr("width",e).attr("height",n),l.attr("clip-path",D?"url(#nv-chart-clip-path-"+y+")":"");var u=r.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});u.exit().remove();var c=u.enter().append("g");u.attr("class",function(t,e,n){return(A(t,e)>C(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});c.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+b(w(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return k(S(t,e))}).attr("x2",0).attr("y2",function(t,e){return k(W(t,e))}),c.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(b(w(t,e))-i/2)+","+(k(M(t,e))-(A(t,e)>C(t,e)?k(C(t,e))-k(A(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",i).attr("height",function(t,e){var n=A(t,e),i=C(t,e);return i<n?k(i)-k(n):k(n)-k(i)});u.select(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+b(w(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return k(S(t,e))}).attr("x2",0).attr("y2",function(t,e){return k(W(t,e))}),u.select(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(b(w(t,e))-i/2)+","+(k(M(t,e))-(A(t,e)>C(t,e)?k(C(t,e))-k(A(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",i).attr("height",function(t,e){var n=A(t,e),i=C(t,e);return i<n?k(i)-k(n):k(n)-k(i)})}),i}return i.highlightPoint=function(t,e){i.clearHighlights(),d.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",e)},i.clearHighlights=function(){d.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},i.dispatch=O,i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return x},set:function(t){x=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return k},set:function(t){k=t}},xDomain:{get:function(){return f},set:function(t){f=t}},yDomain:{get:function(){return p},set:function(t){p=t}},xRange:{get:function(){return h},set:function(t){h=t}},yRange:{get:function(){return g},set:function(t){g=t}},forceX:{get:function(){return E},set:function(t){E=t}},forceY:{get:function(){return F},set:function(t){F=t}},padData:{get:function(){return _},set:function(t){_=t}},clipEdge:{get:function(){return D},set:function(t){D=t}},id:{get:function(){return y},set:function(t){y=t}},interactive:{get:function(){return n},set:function(t){n=t}},x:{get:function(){return w},set:function(t){w=t}},y:{get:function(){return M},set:function(t){M=t}},open:{get:function(){return A()},set:function(t){A=t}},close:{get:function(){return C()},set:function(t){C=t}},high:{get:function(){return S},set:function(t){S=t}},low:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return v},set:function(t){v.top=null!=t.top?t.top:v.top,v.right=null!=t.right?t.right:v.right,v.bottom=null!=t.bottom?t.bottom:v.bottom,v.left=null!=t.left?t.left:v.left}},color:{get:function(){return e},set:function(t){e=ft.utils.getColor(t)}}}),ft.utils.initOptions(i),i},ft.models.cumulativeLineChart=function(){"use strict";var k,w,M=ft.models.line(),A=ft.models.axis(),C=ft.models.axis(),S=ft.models.legend(),W=ft.models.legend(),E=ft.interactiveGuideline(),n=ft.models.tooltip(),F={top:30,right:30,bottom:50,left:60},_=ft.utils.defaultColor(),D=null,O=null,N=!0,B=!0,P=!0,T=!1,L=!0,V=!1,z=!0,I=M.id(),H=ft.utils.state(),G=null,e=null,Y=function(t){return t.average},X=d3.dispatch("stateChange","changeState","renderEnd"),j=250,R=!1;H.index=0,H.rescaleY=z,A.orient("bottom").tickPadding(7),C.orient(T?"right":"left"),n.valueFormatter(function(t,e){return C.tickFormat()(t,e)}).headerFormatter(function(t,e){return A.tickFormat()(t,e)}),W.updateState(!1);var Z=d3.scale.linear(),Q={i:0,x:0},i=ft.utils.renderWatch(X,j),K=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:Q.i,rescaleY:z}}},q=function(t){return function(n){void 0!==n.index&&(Q.i=n.index),void 0!==n.rescaleY&&(z=n.rescaleY),void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function U(t){return i.reset(),i.models(M),B&&i.models(A),P&&i.models(C),t.each(function(u){var t=d3.select(this);ft.utils.initSVG(t),t.classed("nv-chart-"+I,!0);var e,c=this,n=ft.utils.availableWidth(D,t,F),i=ft.utils.availableHeight(O,t,F);if(U.update=function(){0===j?t.call(U):t.transition().duration(j).call(U)},U.container=this,H.setter(q(u),U.update).getter(K(u)).update(),H.disabled=u.map(function(t){return!!t.disabled}),!G)for(e in G={},H)H[e]instanceof Array?G[e]=H[e].slice(0):G[e]=H[e];var r=d3.behavior.drag().on("dragstart",function(t,e){d3.select(U.container).style("cursor","ew-resize")}).on("drag",function(t,e){Q.x=d3.event.x,Q.i=Math.round(Z.invert(Q.x)),b()}).on("dragend",function(t,e){d3.select(U.container).style("cursor","auto"),H.index=Q.i,X.stateChange(H)});if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return ft.utils.noData(U,t),U;if(t.selectAll(".nv-noData").remove(),k=M.xScale(),w=M.yScale(),z)M.yDomain(null);else{var a=u.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,M.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),o=[d3.min(a,function(t){return t[0]}),d3.max(a,function(t){return t[1]})];M.yDomain(o)}Z.domain([0,u[0].values.length-1]).range([0,n]).clamp(!0);u=function(r,t){J=J||M.y();return t.map(function(t,e){if(!t.values)return t;var n=t.values[r];if(null==n)return t;var i=J(n,r);return i<-.95&&!R?t.tempDisabled=!0:(t.tempDisabled=!1,t.values=t.values.map(function(t,e){return t.display={y:(J(t,e)-i)/(1+i)},t})),t})}(Q.i,u);var s=V?"none":"all",l=t.selectAll("g.nv-wrap.nv-cumulativeLine").data([u]),d=l.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),f=l.select("g");if(d.append("g").attr("class","nv-interactive"),d.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),d.append("g").attr("class","nv-y nv-axis"),d.append("g").attr("class","nv-background"),d.append("g").attr("class","nv-linesWrap").style("pointer-events",s),d.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),d.append("g").attr("class","nv-legendWrap"),d.append("g").attr("class","nv-controlsWrap"),N&&(S.width(n),f.select(".nv-legendWrap").datum(u).call(S),F.top!=S.height()&&(F.top=S.height(),i=ft.utils.availableHeight(O,t,F)),f.select(".nv-legendWrap").attr("transform","translate(0,"+-F.top+")")),L){var p=[{key:"Re-scale y-axis",disabled:!z}];W.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),f.select(".nv-controlsWrap").datum(p).attr("transform","translate(0,"+-F.top+")").call(W)}l.attr("transform","translate("+F.left+","+F.top+")"),T&&f.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)");var h=u.filter(function(t){return t.tempDisabled});l.select(".tempDisabled").remove(),h.length&&l.append("text").attr("class","tempDisabled").attr("x",n/2).attr("y","-.71em").style("text-anchor","end").text(h.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),V&&(E.width(n).height(i).margin({left:F.left,top:F.top}).svgContainer(t).xScale(k),l.select(".nv-interactive").call(E)),d.select(".nv-background").append("rect"),f.select(".nv-background rect").attr("width",n).attr("height",i),M.y(function(t){return t.display.y}).width(n).height(i).color(u.map(function(t,e){return t.color||_(t,e)}).filter(function(t,e){return!u[e].disabled&&!u[e].tempDisabled}));var g=f.select(".nv-linesWrap").datum(u.filter(function(t){return!t.disabled&&!t.tempDisabled}));g.call(M),u.forEach(function(t,e){t.seriesIndex=e});function v(t){var e=w(Y(t));return e<0?0:i<e?i:e}var m=u.filter(function(t){return!t.disabled&&!!Y(t)}),x=f.select(".nv-avgLinesWrap").selectAll("line").data(m,function(t){return t.key});x.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return M.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",n).attr("y1",v).attr("y2",v),x.style("stroke-opacity",function(t){var e=w(Y(t));return e<0||i<e?0:1}).attr("x1",0).attr("x2",n).attr("y1",v).attr("y2",v),x.exit().remove();var y=g.selectAll(".nv-indexLine").data([Q]);function b(){y.data([Q]);var t=U.duration();U.duration(0),U.update(),U.duration(t)}y.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(r),y.attr("transform",function(t){return"translate("+Z(t.i)+",0)"}).attr("height",i),B&&(A.scale(k)._ticks(ft.utils.calcTicksX(n/70,u)).tickSize(-i,0),f.select(".nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")"),f.select(".nv-x.nv-axis").call(A)),P&&(C.scale(w)._ticks(ft.utils.calcTicksY(i/36,u)).tickSize(-n,0),f.select(".nv-y.nv-axis").call(C)),f.select(".nv-background rect").on("click",function(){Q.x=d3.mouse(this)[0],Q.i=Math.round(Z.invert(Q.x)),H.index=Q.i,X.stateChange(H),b()}),M.dispatch.on("elementClick",function(t){Q.i=t.pointIndex,Q.x=Z(Q.i),H.index=Q.i,X.stateChange(H),b()}),W.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,z=!t.disabled,H.rescaleY=z,X.stateChange(H),U.update()}),S.dispatch.on("stateChange",function(t){for(var e in t)H[e]=t[e];X.stateChange(H),U.update()}),E.dispatch.on("elementMousemove",function(i){M.clearHighlights();var r,a,o,s=[];if(u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){a=ft.interactiveBisect(t.values,i.pointXValue,U.x()),M.highlightPoint(e,a,!0);var n=t.values[a];void 0!==n&&(void 0===r&&(r=n),void 0===o&&(o=U.xScale()(U.x()(n,a))),s.push({key:t.key,unit:t.unit,value:U.y()(n,a),color:_(t,t.seriesIndex)}))}),2<s.length){var t=U.yScale().invert(i.mouseY),e=.03*Math.abs(U.yScale().domain()[0]-U.yScale().domain()[1]),n=ft.nearestValueIndex(s.map(function(t){return t.value}),t,e);null!==n&&(s[n].highlight=!0)}var l=A.tickFormat()(U.x()(r,a),a);E.tooltip.chartContainer(c.parentNode).valueFormatter(function(t,e){return C.tickFormat()(t)}).data({value:l,series:s})(),E.renderGuideLine(o)}),E.dispatch.on("elementMouseout",function(t){M.clearHighlights()}),X.on("changeState",function(n){void 0!==n.disabled&&(u.forEach(function(t,e){t.disabled=n.disabled[e]}),H.disabled=n.disabled),void 0!==n.index&&(Q.i=n.index,Q.x=Z(Q.i),H.index=n.index,y.data([Q])),void 0!==n.rescaleY&&(z=n.rescaleY),U.update()})}),i.renderEnd("cumulativeLineChart immediate"),U}M.dispatch.on("elementMouseover.tooltip",function(t){var e={x:U.x()(t.point),y:U.y()(t.point),color:t.point.color};t.point=e,n.data(t).hidden(!1)}),M.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)});var J=null;return U.dispatch=X,U.lines=M,U.legend=S,U.controls=W,U.xAxis=A,U.yAxis=C,U.interactiveLayer=E,U.state=H,U.tooltip=n,U.options=ft.utils.optionsFunc.bind(U),U._options=Object.create({},{width:{get:function(){return D},set:function(t){D=t}},height:{get:function(){return O},set:function(t){O=t}},rescaleY:{get:function(){return z},set:function(t){z=t}},showControls:{get:function(){return L},set:function(t){L=t}},showLegend:{get:function(){return N},set:function(t){N=t}},average:{get:function(){return Y},set:function(t){Y=t}},defaultState:{get:function(){return G},set:function(t){G=t}},noData:{get:function(){return e},set:function(t){e=t}},showXAxis:{get:function(){return B},set:function(t){B=t}},showYAxis:{get:function(){return P},set:function(t){P=t}},noErrorCheck:{get:function(){return R},set:function(t){R=t}},margin:{get:function(){return F},set:function(t){F.top=void 0!==t.top?t.top:F.top,F.right=void 0!==t.right?t.right:F.right,F.bottom=void 0!==t.bottom?t.bottom:F.bottom,F.left=void 0!==t.left?t.left:F.left}},color:{get:function(){return _},set:function(t){_=ft.utils.getColor(t),S.color(_)}},useInteractiveGuideline:{get:function(){return V},set:function(t){!0===(V=t)&&(U.interactive(!1),U.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return T},set:function(t){T=t,C.orient(t?"right":"left")}},duration:{get:function(){return j},set:function(t){j=t,M.duration(j),A.duration(j),C.duration(j),i.reset(j)}}}),ft.utils.inheritOptions(U,M),ft.utils.initOptions(U),U},ft.models.discreteBar=function(){"use strict";var u,c,d,f,p,h,g={top:0,right:0,bottom:0,left:0},v=960,m=500,e=Math.floor(1e4*Math.random()),x=d3.scale.ordinal(),y=d3.scale.linear(),b=function(t){return t.x},k=function(t){return t.y},w=[0],M=ft.utils.defaultColor(),A=!1,C=d3.format(",.2f"),S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),W="discreteBar",n=250,E=ft.utils.renderWatch(S,n);function i(t){return E.reset(),t.each(function(t){var e=v-g.left-g.right,n=m-g.top-g.bottom;u=d3.select(this),ft.utils.initSVG(u),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var i=c&&d?[]:t.map(function(t){return t.values.map(function(t,e){return{x:b(t,e),y:k(t,e),y0:t.y0}})});x.domain(c||d3.merge(i).map(function(t){return t.x})).rangeBands(f||[0,e],.1),y.domain(d||d3.extent(d3.merge(i).map(function(t){return t.y}).concat(w))),A?y.range(p||[n-(y.domain()[0]<0?12:0),0<y.domain()[1]?12:0]):y.range(p||[n,0]),h=h||y.copy().range([y(0),y(0)]);var r=u.selectAll("g.nv-wrap.nv-discretebar").data([t]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");r.select("g");a.append("g").attr("class","nv-groups"),r.attr("transform","translate("+g.left+","+g.top+")");var o=r.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});o.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),o.exit().watchTransition(E,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),o.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),o.watchTransition(E,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var s=o.selectAll("g.nv-bar").data(function(t){return t.values});s.exit().remove();var l=s.enter().append("g").attr("transform",function(t,e,n){return"translate("+(x(b(t,e))+.05*x.rangeBand())+", "+y(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),S.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),S.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){S.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){S.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){S.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});l.append("rect").attr("height",0).attr("width",.9*x.rangeBand()/t.length),A?(l.append("text").attr("text-anchor","middle"),s.select("text").text(function(t,e){return C(k(t,e))}).watchTransition(E,"discreteBar: bars text").attr("x",.9*x.rangeBand()/2).attr("y",function(t,e){return k(t,e)<0?y(k(t,e))-y(0)+12:-4})):s.selectAll("text").remove(),s.attr("class",function(t,e){return k(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||M(t,e)}).style("stroke",function(t,e){return t.color||M(t,e)}).select("rect").attr("class",W).watchTransition(E,"discreteBar: bars rect").attr("width",.9*x.rangeBand()/t.length),s.watchTransition(E,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(x(b(t,e))+.05*x.rangeBand())+", "+(k(t,e)<0?y(0):y(0)-y(k(t,e))<1?y(0)-1:y(k(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(y(k(t,e))-y(0)),1)}),x.copy(),h=y.copy()}),E.renderEnd("discreteBar immediate"),i}return i.dispatch=S,i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},forceY:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return b},set:function(t){b=t}},y:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return x},set:function(t){x=t}},yScale:{get:function(){return y},set:function(t){y=t}},xDomain:{get:function(){return c},set:function(t){c=t}},yDomain:{get:function(){return d},set:function(t){d=t}},xRange:{get:function(){return f},set:function(t){f=t}},yRange:{get:function(){return p},set:function(t){p=t}},valueFormat:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return e},set:function(t){e=t}},rectClass:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return M},set:function(t){M=ft.utils.getColor(t)}},duration:{get:function(){return n},set:function(t){n=t,E.reset(n)}}}),ft.utils.initOptions(i),i},ft.models.discreteBarChart=function(){"use strict";var u,c,d=ft.models.discreteBar(),f=ft.models.axis(),p=ft.models.axis(),h=ft.models.legend(),e=ft.models.tooltip(),g={top:15,right:10,bottom:50,left:60},v=null,m=null,n=ft.utils.getColor(),x=!1,y=!0,b=!0,k=!1,w=!1,M=!1,A=0,i=null,C=d3.dispatch("beforeUpdate","renderEnd"),S=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),p.orient(k?"right":"left").tickFormat(d3.format(",.1f")),e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).keyFormatter(function(t,e){return f.tickFormat()(t,e)});var r=ft.utils.renderWatch(C,S);function W(t){return r.reset(),r.models(d),y&&r.models(f),b&&r.models(p),t.each(function(t){var e=d3.select(this);ft.utils.initSVG(e);var n=ft.utils.availableWidth(v,e,g),i=ft.utils.availableHeight(m,e,g);if(W.update=function(){C.beforeUpdate(),e.transition().duration(S).call(W)},W.container=this,!(t&&t.length&&t.filter(function(t){return t.values.length}).length))return ft.utils.noData(W,e),W;e.selectAll(".nv-noData").remove(),u=d.xScale(),c=d.yScale().clamp(!0);var r=e.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([t]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),o=a.append("defs"),s=r.select("g");if(a.append("g").attr("class","nv-x nv-axis"),a.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),a.append("g").attr("class","nv-barsWrap"),a.append("g").attr("class","nv-legendWrap"),s.attr("transform","translate("+g.left+","+g.top+")"),x&&(h.width(n),s.select(".nv-legendWrap").datum(t).call(h),g.top!=h.height()&&(g.top=h.height(),i=ft.utils.availableHeight(m,e,g)),r.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")")),k&&s.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),k&&s.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),d.width(n).height(i),s.select(".nv-barsWrap").datum(t.filter(function(t){return!t.disabled})).transition().call(d),o.append("clipPath").attr("id","nv-x-label-clip-"+d.id()).append("rect"),s.select("#nv-x-label-clip-"+d.id()+" rect").attr("width",u.rangeBand()*(w?2:1)).attr("height",16).attr("x",-u.rangeBand()/(w?1:2)),y){f.scale(u)._ticks(ft.utils.calcTicksX(n/100,t)).tickSize(-i,0),s.select(".nv-x.nv-axis").attr("transform","translate(0,"+(c.range()[0]+(d.showValues()&&c.domain()[0]<0?16:0))+")"),s.select(".nv-x.nv-axis").call(f);var l=s.select(".nv-x.nv-axis").selectAll("g");w&&l.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),A&&l.selectAll(".tick text").attr("transform","rotate("+A+" 0,0)").style("text-anchor",0<A?"start":"end"),M&&s.selectAll(".tick text").call(ft.utils.wrapTicks,W.xAxis.rangeBand())}b&&(p.scale(c)._ticks(ft.utils.calcTicksY(i/36,t)).tickSize(-n,0),s.select(".nv-y.nv-axis").call(p)),s.select(".nv-zeroLine line").attr("x1",0).attr("x2",k?-n:n).attr("y1",c(0)).attr("y2",c(0))}),r.renderEnd("discreteBar chart immediate"),W}return d.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:W.x()(t.data),value:W.y()(t.data),color:t.color},e.data(t).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(t){e()}),W.dispatch=C,W.discretebar=d,W.legend=h,W.xAxis=f,W.yAxis=p,W.tooltip=e,W.options=ft.utils.optionsFunc.bind(W),W._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},showLegend:{get:function(){return x},set:function(t){x=t}},staggerLabels:{get:function(){return w},set:function(t){w=t}},rotateLabels:{get:function(){return A},set:function(t){A=t}},wrapLabels:{get:function(){return M},set:function(t){M=!!t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},noData:{get:function(){return i},set:function(t){i=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},duration:{get:function(){return S},set:function(t){S=t,r.reset(S),d.duration(S),f.duration(S),p.duration(S)}},color:{get:function(){return n},set:function(t){n=ft.utils.getColor(t),d.color(n),h.color(n)}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,p.orient(t?"right":"left")}}}),ft.utils.inheritOptions(W,d),ft.utils.initOptions(W),W},ft.models.distribution=function(){"use strict";var s,l={top:0,right:0,bottom:0,left:0},e=400,u=8,c="x",d=function(t){return t[c]},f=ft.utils.defaultColor(),p=d3.scale.linear(),n=250,t=d3.dispatch("renderEnd"),h=ft.utils.renderWatch(t,n);function i(t){return h.reset(),t.each(function(t){"x"===c?(l.left,l.right):(l.top,l.bottom);var e="x"==c?"y":"x",n=d3.select(this);ft.utils.initSVG(n),s=s||p;var i=n.selectAll("g.nv-distribution").data([t]),r=(i.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),i.select("g"));i.attr("transform","translate("+l.left+","+l.top+")");var a=r.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});a.enter().append("g"),a.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return f(t,e)});var o=a.selectAll("line.nv-dist"+c).data(function(t){return t.values});o.enter().append("line").attr(c+"1",function(t,e){return s(d(t,e))}).attr(c+"2",function(t,e){return s(d(t,e))}),h.transition(a.exit().selectAll("line.nv-dist"+c),"dist exit").attr(c+"1",function(t,e){return p(d(t,e))}).attr(c+"2",function(t,e){return p(d(t,e))}).style("stroke-opacity",0).remove(),o.attr("class",function(t,e){return"nv-dist"+c+" nv-dist"+c+"-"+e}).attr(e+"1",0).attr(e+"2",u),h.transition(o,"dist").attr(c+"1",function(t,e){return p(d(t,e))}).attr(c+"2",function(t,e){return p(d(t,e))}),s=p.copy()}),h.renderEnd("distribution immediate"),i}return i.options=ft.utils.optionsFunc.bind(i),i.dispatch=t,i.margin=function(t){return arguments.length?(l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left,i):l},i.width=function(t){return arguments.length?(e=t,i):e},i.axis=function(t){return arguments.length?(c=t,i):c},i.size=function(t){return arguments.length?(u=t,i):u},i.getData=function(t){return arguments.length?(d=d3.functor(t),i):d},i.scale=function(t){return arguments.length?(p=t,i):p},i.color=function(t){return arguments.length?(f=ft.utils.getColor(t),i):f},i.duration=function(t){return arguments.length?(n=t,h.reset(n),i):n},i},ft.models.furiousLegend=function(){"use strict";var A={top:5,right:0,bottom:5,left:0},C=400,S=20,W=function(t){return t.key},E=ft.utils.getColor(),F=20,_=!0,D=28,O=!0,N=!0,B=!1,P=!1,T=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),L="classic";function e(t){function w(t,e){return"furious"!=L?"#000":P?t.disengaged?E(t,e):"#fff":P?void 0:t.disabled?E(t,e):"#fff"}function M(t,e){return P&&"furious"==L?t.disengaged?"#fff":E(t,e):t.disabled?"#fff":E(t,e)}return t.each(function(t){var e=C-A.left-A.right,n=d3.select(this);ft.utils.initSVG(n);var i=n.selectAll("g.nv-legend").data([t]),r=(i.enter().append("g").attr("class","nvd3 nv-legend").append("g"),i.select("g"));i.attr("transform","translate("+A.left+","+A.top+")");var a,o=r.selectAll(".nv-series").data(function(t){return"furious"!=L?t:t.filter(function(t){return!!P||!t.disengaged})}),s=o.enter().append("g").attr("class","nv-series");if("classic"==L)s.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),a=o.select("circle");else if("furious"==L){s.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),a=o.select("rect"),s.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),o.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",w(t,e))})}s.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var l,u=o.select("text.nv-legend-text");switch(o.on("mouseover",function(t,e){T.legendMouseover(t,e)}).on("mouseout",function(t,e){T.legendMouseout(t,e)}).on("click",function(t,e){T.legendClick(t,e);var n=o.data();if(N){if("classic"==L)B?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==L)if(P)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!P){t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}T.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=L||!P)&&(T.legendDblclick(t,e),N)){var n=o.data();n.forEach(function(t){t.disabled=!0,"furious"==L&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==L&&(t.userDisabled=t.disabled),T.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),o.classed("nv-disabled",function(t){return t.userDisabled}),o.exit().remove(),u.attr("fill",w).text(W),L){case"furious":l=23;break;case"classic":l=20}if(_){var c=[];o.each(function(t,e){var n,i;if(W(t).length>F){var r=W(t).substring(0,F);n=d3.select(this).select("text").text(r+"..."),d3.select(this).append("svg:title").text(W(t))}else n=d3.select(this).select("text");try{if((i=n.node().getComputedTextLength())<=0)throw Error()}catch(t){i=ft.utils.calcApproxTextWidth(n)}c.push(i+D)});for(var d=0,f=0,p=[];f<e&&d<c.length;)p[d]=c[d],f+=c[d++];for(0===d&&(d=1);e<f&&1<d;){p=[],d--;for(var h=0;h<c.length;h++)c[h]>(p[h%d]||0)&&(p[h%d]=c[h]);f=p.reduce(function(t,e,n,i){return t+e})}for(var g=[],v=0,m=0;v<d;v++)g[v]=m,m+=p[v];o.attr("transform",function(t,e){return"translate("+g[e%d]+","+(5+Math.floor(e/d)*l)+")"}),O?r.attr("transform","translate("+(C-A.right-f)+","+A.top+")"):r.attr("transform","translate(0,"+A.top+")"),S=A.top+A.bottom+Math.ceil(c.length/d)*l}else{var x,y=5,b=5,k=0;o.attr("transform",function(t,e){var n=d3.select(this).select("text").node().getComputedTextLength()+D;return x=b,C<A.left+A.right+x+n&&(b=x=5,y+=l),k<(b+=n)&&(k=b),"translate("+x+","+y+")"}),r.attr("transform","translate("+(C-A.right-k)+","+A.top+")"),S=A.top+A.bottom+y+15}"furious"==L&&a.attr("width",function(t,e){return u[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.style("fill",M).style("stroke",function(t,e){return t.color||E(t,e)})}),e}return e.dispatch=T,e.options=ft.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return C},set:function(t){C=t}},height:{get:function(){return S},set:function(t){S=t}},key:{get:function(){return W},set:function(t){W=t}},align:{get:function(){return _},set:function(t){_=t}},rightAlign:{get:function(){return O},set:function(t){O=t}},maxKeyLength:{get:function(){return F},set:function(t){F=t}},padding:{get:function(){return D},set:function(t){D=t}},updateState:{get:function(){return N},set:function(t){N=t}},radioButtonMode:{get:function(){return B},set:function(t){B=t}},expanded:{get:function(){return P},set:function(t){P=t}},vers:{get:function(){return L},set:function(t){L=t}},margin:{get:function(){return A},set:function(t){A.top=void 0!==t.top?t.top:A.top,A.right=void 0!==t.right?t.right:A.right,A.bottom=void 0!==t.bottom?t.bottom:A.bottom,A.left=void 0!==t.left?t.left:A.left}},color:{get:function(){return E},set:function(t){E=ft.utils.getColor(t)}}}),ft.utils.initOptions(e),e},ft.models.historicalBar=function(){"use strict";var u,c,d,f,p={top:0,right:0,bottom:0,left:0},h=null,g=null,v=Math.floor(1e4*Math.random()),m=null,x=d3.scale.linear(),y=d3.scale.linear(),b=function(t){return t.x},k=function(t){return t.y},w=[],M=[0],A=!1,C=!0,S=ft.utils.defaultColor(),W=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),E=!0,F=ft.utils.renderWatch(W,0);function e(t){return t.each(function(n){F.reset(),m=d3.select(this);var i=ft.utils.availableWidth(h,m,p),t=ft.utils.availableHeight(g,m,p);ft.utils.initSVG(m),x.domain(u||d3.extent(n[0].values.map(b).concat(w))),A?x.range(d||[.5*i/n[0].values.length,i*(n[0].values.length-.5)/n[0].values.length]):x.range(d||[0,i]),y.domain(c||d3.extent(n[0].values.map(k).concat(M))).range(f||[t,0]),x.domain()[0]===x.domain()[1]&&(x.domain()[0]?x.domain([x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]):x.domain([-1,1])),y.domain()[0]===y.domain()[1]&&(y.domain()[0]?y.domain([y.domain()[0]+.01*y.domain()[0],y.domain()[1]-.01*y.domain()[1]]):y.domain([-1,1]));var e=m.selectAll("g.nv-wrap.nv-historicalBar-"+v).data([n[0].values]),r=e.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+v),a=r.append("defs"),o=r.append("g"),s=e.select("g");o.append("g").attr("class","nv-bars"),e.attr("transform","translate("+p.left+","+p.top+")"),m.on("click",function(t,e){W.chartClick({data:t,index:e,pos:d3.event,id:v})}),a.append("clipPath").attr("id","nv-chart-clip-path-"+v).append("rect"),e.select("#nv-chart-clip-path-"+v+" rect").attr("width",i).attr("height",t),s.attr("clip-path",C?"url(#nv-chart-clip-path-"+v+")":"");var l=e.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return b(t,e)});l.exit().remove(),l.enter().append("rect").attr("x",0).attr("y",function(t,e){return ft.utils.NaNtoZero(y(Math.max(0,k(t,e))))}).attr("height",function(t,e){return ft.utils.NaNtoZero(Math.abs(y(k(t,e))-y(0)))}).attr("transform",function(t,e){return"translate("+(x(b(t,e))-i/n[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){E&&(d3.select(this).classed("hover",!0),W.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){E&&(d3.select(this).classed("hover",!1),W.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){E&&W.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){E&&(W.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(t,e){E&&(W.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),l.attr("fill",function(t,e){return S(t,e)}).attr("class",function(t,e,n){return(k(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(F,"bars").attr("transform",function(t,e){return"translate("+(x(b(t,e))-i/n[0].values.length*.45)+",0)"}).attr("width",i/n[0].values.length*.9),l.watchTransition(F,"bars").attr("y",function(t,e){var n=k(t,e)<0?y(0):y(0)-y(k(t,e))<1?y(0)-1:y(k(t,e));return ft.utils.NaNtoZero(n)}).attr("height",function(t,e){return ft.utils.NaNtoZero(Math.max(Math.abs(y(k(t,e))-y(0)),1))})}),F.renderEnd("historicalBar immediate"),e}return e.highlightPoint=function(t,e){m.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},e.clearHighlights=function(){m.select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=W,e.options=ft.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},forceX:{get:function(){return w},set:function(t){w=t}},forceY:{get:function(){return M},set:function(t){M=t}},padData:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return b},set:function(t){b=t}},y:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return x},set:function(t){x=t}},yScale:{get:function(){return y},set:function(t){y=t}},xDomain:{get:function(){return u},set:function(t){u=t}},yDomain:{get:function(){return c},set:function(t){c=t}},xRange:{get:function(){return d},set:function(t){d=t}},yRange:{get:function(){return f},set:function(t){f=t}},clipEdge:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return v},set:function(t){v=t}},interactive:{get:function(){return E},set:function(t){E=t}},margin:{get:function(){return p},set:function(t){p.top=void 0!==t.top?t.top:p.top,p.right=void 0!==t.right?t.right:p.right,p.bottom=void 0!==t.bottom?t.bottom:p.bottom,p.left=void 0!==t.left?t.left:p.left}},color:{get:function(){return S},set:function(t){S=ft.utils.getColor(t)}}}),ft.utils.initOptions(e),e},ft.models.historicalBarChart=function(t){"use strict";var c,d,f=t||ft.models.historicalBar(),p=ft.models.axis(),h=ft.models.axis(),g=ft.models.legend(),v=ft.interactiveGuideline(),e=ft.models.tooltip(),m={top:30,right:90,bottom:50,left:90},x=ft.utils.defaultColor(),y=null,b=null,k=!1,w=!0,M=!0,A=!1,C=!1,S={},W=null,n=null,E=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),F=250;p.orient("bottom").tickPadding(7),h.orient(A?"right":"left"),e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return h.tickFormat()(t,e)}).headerFormatter(function(t,e){return p.tickFormat()(t,e)});var _=ft.utils.renderWatch(E,0);function D(u){return u.each(function(l){_.reset(),_.models(f),w&&_.models(p),M&&_.models(h);var t=d3.select(this),e=this;ft.utils.initSVG(t);var n,i=ft.utils.availableWidth(y,t,m),r=ft.utils.availableHeight(b,t,m);if(D.update=function(){t.transition().duration(F).call(D)},D.container=this,S.disabled=l.map(function(t){return!!t.disabled}),!W)for(n in W={},S)S[n]instanceof Array?W[n]=S[n].slice(0):W[n]=S[n];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return ft.utils.noData(D,t),D;t.selectAll(".nv-noData").remove(),c=f.xScale(),d=f.yScale();var a=t.selectAll("g.nv-wrap.nv-historicalBarChart").data([l]),o=a.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),s=a.select("g");o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y nv-axis"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-legendWrap"),o.append("g").attr("class","nv-interactive"),k&&(g.width(i),s.select(".nv-legendWrap").datum(l).call(g),m.top!=g.height()&&(m.top=g.height(),r=ft.utils.availableHeight(b,t,m)),a.select(".nv-legendWrap").attr("transform","translate(0,"+-m.top+")")),a.attr("transform","translate("+m.left+","+m.top+")"),A&&s.select(".nv-y.nv-axis").attr("transform","translate("+i+",0)"),C&&(v.width(i).height(r).margin({left:m.left,top:m.top}).svgContainer(t).xScale(c),a.select(".nv-interactive").call(v)),f.width(i).height(r).color(l.map(function(t,e){return t.color||x(t,e)}).filter(function(t,e){return!l[e].disabled})),s.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(f),w&&(p.scale(c)._ticks(ft.utils.calcTicksX(i/100,l)).tickSize(-r,0),s.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),s.select(".nv-x.nv-axis").transition().call(p)),M&&(h.scale(d)._ticks(ft.utils.calcTicksY(r/36,l)).tickSize(-i,0),s.select(".nv-y.nv-axis").transition().call(h)),v.dispatch.on("elementMousemove",function(i){f.clearHighlights();var r,a,o,s=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){a=ft.interactiveBisect(t.values,i.pointXValue,D.x()),f.highlightPoint(a,!0);var n=t.values[a];void 0!==n&&(void 0===r&&(r=n),void 0===o&&(o=D.xScale()(D.x()(n,a))),s.push({key:t.key,unit:t.unit,value:D.y()(n,a),color:x(t,t.seriesIndex),data:t.values[a]}))});var t=p.tickFormat()(D.x()(r,a));v.tooltip.chartContainer(e.parentNode).valueFormatter(function(t,e){return h.tickFormat()(t)}).data({value:t,index:a,series:s})(),v.renderGuideLine(o)}),v.dispatch.on("elementMouseout",function(t){E.tooltipHide(),f.clearHighlights()}),g.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,l.filter(function(t){return!t.disabled}).length||l.map(function(t){return t.disabled=!1,a.selectAll(".nv-series").classed("disabled",!1),t}),S.disabled=l.map(function(t){return!!t.disabled}),E.stateChange(S),u.transition().call(D)}),g.dispatch.on("legendDblclick",function(t){l.forEach(function(t){t.disabled=!0}),t.disabled=!1,S.disabled=l.map(function(t){return!!t.disabled}),E.stateChange(S),D.update()}),E.on("changeState",function(n){void 0!==n.disabled&&(l.forEach(function(t,e){t.disabled=n.disabled[e]}),S.disabled=n.disabled),D.update()})}),_.renderEnd("historicalBarChart immediate"),D}return f.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:D.x()(t.data),value:D.y()(t.data),color:t.color},e.data(t).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),f.dispatch.on("elementMousemove.tooltip",function(t){e()}),D.dispatch=E,D.bars=f,D.legend=g,D.xAxis=p,D.yAxis=h,D.interactiveLayer=v,D.tooltip=e,D.options=ft.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return y},set:function(t){y=t}},height:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return M},set:function(t){M=t}},defaultState:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return m},set:function(t){m.top=void 0!==t.top?t.top:m.top,m.right=void 0!==t.right?t.right:m.right,m.bottom=void 0!==t.bottom?t.bottom:m.bottom,m.left=void 0!==t.left?t.left:m.left}},color:{get:function(){return x},set:function(t){x=ft.utils.getColor(t),g.color(x),f.color(x)}},duration:{get:function(){return F},set:function(t){F=t,_.reset(F),h.duration(F),p.duration(F)}},rightAlignYAxis:{get:function(){return A},set:function(t){A=t,h.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return C},set:function(t){!0===(C=t)&&D.interactive(!1)}}}),ft.utils.inheritOptions(D,f),ft.utils.initOptions(D),D},ft.models.ohlcBarChart=function(){var n=ft.models.historicalBarChart(ft.models.ohlcBar());return n.useInteractiveGuideline(!0),n.interactiveLayer.tooltip.contentGenerator(function(t){var e=t.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+n.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+n.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+n.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+n.yAxis.tickFormat()(e.low)+"</td></tr></table>"}),n},ft.models.candlestickBarChart=function(){var n=ft.models.historicalBarChart(ft.models.candlestickBar());return n.useInteractiveGuideline(!0),n.interactiveLayer.tooltip.contentGenerator(function(t){var e=t.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+n.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+n.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+n.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+n.yAxis.tickFormat()(e.low)+"</td></tr></table>"}),n},ft.models.legend=function(){"use strict";var S={top:5,right:0,bottom:5,left:0},W=400,E=20,F=function(t){return t.key},n=ft.utils.getColor(),_=20,D=!0,O=32,N=!0,B=!0,P=!1,T=!1,L=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),V="classic";function e(t){function M(t,e){return"furious"!=V?"#000":T?t.disengaged?"#000":"#fff":T?void 0:(t.color||(t.color=n(t,e)),t.disabled?t.color:"#fff")}function A(t,e){return T&&"furious"==V&&t.disengaged?"#eee":t.color||n(t,e)}function C(t,e){return(!T||"furious"!=V)&&t.disabled?0:1}return t.each(function(t){var e=W-S.left-S.right,n=d3.select(this);ft.utils.initSVG(n);var i=n.selectAll("g.nv-legend").data([t]),r=i.enter().append("g").attr("class","nvd3 nv-legend").append("g"),a=i.select("g");i.attr("transform","translate("+S.left+","+S.top+")");var o,s,l=a.selectAll(".nv-series").data(function(t){return"furious"!=V?t:t.filter(function(t){return!!T||!t.disengaged})}),u=l.enter().append("g").attr("class","nv-series");switch(V){case"furious":s=23;break;case"classic":s=20}if("classic"==V)u.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),o=l.select("circle");else if("furious"==V){u.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),o=l.select(".nv-legend-symbol"),u.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),l.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",M(t,e))})}u.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var c=l.select("text.nv-legend-text");l.on("mouseover",function(t,e){L.legendMouseover(t,e)}).on("mouseout",function(t,e){L.legendMouseout(t,e)}).on("click",function(t,e){L.legendClick(t,e);var n=l.data();if(B){if("classic"==V)P?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==V)if(T)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!T){t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}L.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=V||!T)&&(L.legendDblclick(t,e),B)){var n=l.data();n.forEach(function(t){t.disabled=!0,"furious"==V&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==V&&(t.userDisabled=t.disabled),L.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),l.classed("nv-disabled",function(t){return t.userDisabled}),l.exit().remove(),c.attr("fill",M).text(F);var d=0;if(D){var f=[];l.each(function(t,e){var n,i;if(F(t).length>_){var r=F(t).substring(0,_);n=d3.select(this).select("text").text(r+"..."),d3.select(this).append("svg:title").text(F(t))}else n=d3.select(this).select("text");try{if((i=n.node().getComputedTextLength())<=0)throw Error()}catch(t){i=ft.utils.calcApproxTextWidth(n)}f.push(i+O)});var p=0,h=[];for(d=0;d<e&&p<f.length;)h[p]=f[p],d+=f[p++];for(0===p&&(p=1);e<d&&1<p;){h=[],p--;for(var g=0;g<f.length;g++)f[g]>(h[g%p]||0)&&(h[g%p]=f[g]);d=h.reduce(function(t,e,n,i){return t+e})}for(var v=[],m=0,x=0;m<p;m++)v[m]=x,x+=h[m];l.attr("transform",function(t,e){return"translate("+v[e%p]+","+(5+Math.floor(e/p)*s)+")"}),N?a.attr("transform","translate("+(W-S.right-d)+","+S.top+")"):a.attr("transform","translate(0,"+S.top+")"),E=S.top+S.bottom+Math.ceil(f.length/p)*s}else{var y,b=5,k=5,w=0;l.attr("transform",function(t,e){var n=d3.select(this).select("text").node().getComputedTextLength()+O;return y=k,W<S.left+S.right+y+n&&(k=y=5,b+=s),w<(k+=n)&&(w=k),d<y+w&&(d=y+w),"translate("+y+","+b+")"}),a.attr("transform","translate("+(W-S.right-w)+","+S.top+")"),E=S.top+S.bottom+b+15}"furious"==V&&(o.attr("width",function(t,e){return c[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),r.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),a.select(".nv-legend-bg").transition().duration(300).attr("x",-s).attr("width",d+s-12).attr("height",E+10).attr("y",-S.top-10).attr("opacity",T?1:0));o.style("fill",A).style("fill-opacity",C).style("stroke",A)}),e}return e.dispatch=L,e.options=ft.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return W},set:function(t){W=t}},height:{get:function(){return E},set:function(t){E=t}},key:{get:function(){return F},set:function(t){F=t}},align:{get:function(){return D},set:function(t){D=t}},maxKeyLength:{get:function(){return _},set:function(t){_=t}},rightAlign:{get:function(){return N},set:function(t){N=t}},padding:{get:function(){return O},set:function(t){O=t}},updateState:{get:function(){return B},set:function(t){B=t}},radioButtonMode:{get:function(){return P},set:function(t){P=t}},expanded:{get:function(){return T},set:function(t){T=t}},vers:{get:function(){return V},set:function(t){V=t}},margin:{get:function(){return S},set:function(t){S.top=void 0!==t.top?t.top:S.top,S.right=void 0!==t.right?t.right:S.right,S.bottom=void 0!==t.bottom?t.bottom:S.bottom,S.left=void 0!==t.left?t.left:S.left}},color:{get:function(){return n},set:function(t){n=ft.utils.getColor(t)}}}),ft.utils.initOptions(e),e},ft.models.line=function(){"use strict";var f,p,h=ft.models.scatter(),g={top:0,right:0,bottom:0,left:0},v=960,m=500,x=null,y=1.5,b=ft.utils.defaultColor(),k=function(t){return t.x},w=function(t){return t.y},M=function(t,e){return!isNaN(w(t,e))&&null!==w(t,e)},A=function(t){return t.area},C=!1,S="linear",e=250,t=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");h.pointSize(16).pointDomain([16,256]);var W,E,F=ft.utils.renderWatch(t,e);function n(t){return F.reset(),F.models(h),t.each(function(t){x=d3.select(this);var e=ft.utils.availableWidth(v,x,g),n=ft.utils.availableHeight(m,x,g);ft.utils.initSVG(x),f=h.xScale(),p=h.yScale(),W=W||f,E=E||p;var i=x.selectAll("g.nv-wrap.nv-line").data([t]),r=i.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),a=r.append("defs"),o=r.append("g"),s=i.select("g");o.append("g").attr("class","nv-groups"),o.append("g").attr("class","nv-scatterWrap"),i.attr("transform","translate("+g.left+","+g.top+")"),h.width(e).height(n);var l=i.select(".nv-scatterWrap");l.call(h),a.append("clipPath").attr("id","nv-edge-clip-"+h.id()).append("rect"),i.select("#nv-edge-clip-"+h.id()+" rect").attr("width",e).attr("height",0<n?n:0),s.attr("clip-path",C?"url(#nv-edge-clip-"+h.id()+")":""),l.attr("clip-path",C?"url(#nv-edge-clip-"+h.id()+")":"");var u=i.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});u.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||y}).style("fill-opacity",1e-6),u.exit().remove(),u.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),u.watchTransition(F,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var c=u.selectAll("path.nv-area").data(function(t){return A(t)?[t]:[]});c.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(S).defined(M).x(function(t,e){return ft.utils.NaNtoZero(W(k(t,e)))}).y0(function(t,e){return ft.utils.NaNtoZero(E(w(t,e)))}).y1(function(t,e){return E(p.domain()[0]<=0?0<=p.domain()[1]?0:p.domain()[1]:p.domain()[0])}).apply(this,[t.values])}),u.exit().selectAll("path.nv-area").remove(),c.watchTransition(F,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(S).defined(M).x(function(t,e){return ft.utils.NaNtoZero(f(k(t,e)))}).y0(function(t,e){return ft.utils.NaNtoZero(p(w(t,e)))}).y1(function(t,e){return p(p.domain()[0]<=0?0<=p.domain()[1]?0:p.domain()[1]:p.domain()[0])}).apply(this,[t.values])});var d=u.selectAll("path.nv-line").data(function(t){return[t.values]});d.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(S).defined(M).x(function(t,e){return ft.utils.NaNtoZero(W(k(t,e)))}).y(function(t,e){return ft.utils.NaNtoZero(E(w(t,e)))})),d.watchTransition(F,"line: linePaths").attr("d",d3.svg.line().interpolate(S).defined(M).x(function(t,e){return ft.utils.NaNtoZero(f(k(t,e)))}).y(function(t,e){return ft.utils.NaNtoZero(p(w(t,e)))})),W=f.copy(),E=p.copy()}),F.renderEnd("line immediate"),n}return n.dispatch=t,(n.scatter=h).dispatch.on("elementClick",function(){t.elementClick.apply(this,arguments)}),h.dispatch.on("elementMouseover",function(){t.elementMouseover.apply(this,arguments)}),h.dispatch.on("elementMouseout",function(){t.elementMouseout.apply(this,arguments)}),n.options=ft.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},defined:{get:function(){return M},set:function(t){M=t}},interpolate:{get:function(){return S},set:function(t){S=t}},clipEdge:{get:function(){return C},set:function(t){C=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},duration:{get:function(){return e},set:function(t){e=t,F.reset(e),h.duration(e)}},isArea:{get:function(){return A},set:function(t){A=d3.functor(t)}},x:{get:function(){return k},set:function(t){k=t,h.x(t)}},y:{get:function(){return w},set:function(t){w=t,h.y(t)}},color:{get:function(){return b},set:function(t){b=ft.utils.getColor(t),h.color(b)}}}),ft.utils.inheritOptions(n,h),ft.utils.initOptions(n),n},ft.models.lineChart=function(){"use strict";var y,b,k,w,M=ft.models.line(),A=ft.models.axis(),C=ft.models.axis(),S=ft.models.legend(),W=ft.interactiveGuideline(),e=ft.models.tooltip(),E=ft.models.line(),F=ft.models.axis(),_=ft.models.axis(),D=d3.svg.brush(),O={top:30,right:20,bottom:50,left:60},N={top:0,right:20,bottom:20,left:60},B=ft.utils.defaultColor(),P=null,T=null,L=!0,V=!0,z=!0,I=!1,H=!1,G=!1,Y=!1,X=!0,j=50,R=null,Z=ft.utils.state(),Q=null,n=null,K=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState","renderEnd"),q=250;A.orient("bottom").tickPadding(7),C.orient(I?"right":"left"),M.clipEdge(!0).duration(0),E.interactive(!1),E.pointActive(function(t){return!1}),F.orient("bottom").tickPadding(5),_.orient(I?"right":"left"),e.valueFormatter(function(t,e){return C.tickFormat()(t,e)}).headerFormatter(function(t,e){return A.tickFormat()(t,e)}),W.tooltip.valueFormatter(function(t,e){return C.tickFormat()(t,e)}).headerFormatter(function(t,e){return A.tickFormat()(t,e)});var i=ft.utils.renderWatch(K,q),U=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},J=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function $(t){return i.reset(),i.models(M),i.models(E),V&&i.models(A),z&&i.models(C),X&&i.models(F),Y&&i.models(_),t.each(function(i){var t=d3.select(this);ft.utils.initSVG(t);var e,r=ft.utils.availableWidth(P,t,O),n=ft.utils.availableHeight(T,t,O)-(G?j:0),a=j-N.top-N.bottom;if($.update=function(){0===q?t.call($):t.transition().duration(q).call($)},$.container=this,Z.setter(J(i),$.update).getter(U(i)).update(),Z.disabled=i.map(function(t){return!!t.disabled}),!Q)for(e in Q={},Z)Z[e]instanceof Array?Q[e]=Z[e].slice(0):Q[e]=Z[e];if(!(i&&i.length&&i.filter(function(t){return t.values.length}).length))return ft.utils.noData($,t),$;t.selectAll(".nv-noData").remove(),y=M.xScale(),b=M.yScale(),k=E.xScale(),w=E.yScale();var o=t.selectAll("g.nv-wrap.nv-lineChart").data([i]),s=o.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),l=o.select("g");s.append("g").attr("class","nv-legendWrap");var u=s.append("g").attr("class","nv-focus");u.append("g").attr("class","nv-background").append("rect"),u.append("g").attr("class","nv-x nv-axis"),u.append("g").attr("class","nv-y nv-axis"),u.append("g").attr("class","nv-linesWrap"),u.append("g").attr("class","nv-interactive");var c=s.append("g").attr("class","nv-context");c.append("g").attr("class","nv-background").append("rect"),c.append("g").attr("class","nv-x nv-axis"),c.append("g").attr("class","nv-y nv-axis"),c.append("g").attr("class","nv-linesWrap"),c.append("g").attr("class","nv-brushBackground"),c.append("g").attr("class","nv-x nv-brush"),L&&(S.width(r),l.select(".nv-legendWrap").datum(i).call(S),O.top!=S.height()&&(O.top=S.height(),n=ft.utils.availableHeight(T,t,O)-(G?j:0)),o.select(".nv-legendWrap").attr("transform","translate(0,"+-O.top+")")),o.attr("transform","translate("+O.left+","+O.top+")"),I&&l.select(".nv-y.nv-axis").attr("transform","translate("+r+",0)"),H&&(W.width(r).height(n).margin({left:O.left,top:O.top}).svgContainer(t).xScale(y),o.select(".nv-interactive").call(W)),l.select(".nv-focus .nv-background rect").attr("width",r).attr("height",n),M.width(r).height(n).color(i.map(function(t,e){return t.color||B(t,e)}).filter(function(t,e){return!i[e].disabled}));var d=l.select(".nv-linesWrap").datum(i.filter(function(t){return!t.disabled}));function f(){V&&l.select(".nv-focus .nv-x.nv-axis").transition().duration(q).call(A)}function p(){z&&l.select(".nv-focus .nv-y.nv-axis").transition().duration(q).call(C)}if(V&&A.scale(y)._ticks(ft.utils.calcTicksX(r/100,i)).tickSize(-n,0),z&&C.scale(b)._ticks(ft.utils.calcTicksY(n/36,i)).tickSize(-r,0),l.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+n+")"),G){E.defined(M.defined()).width(r).height(a).color(i.map(function(t,e){return t.color||B(t,e)}).filter(function(t,e){return!i[e].disabled})),l.select(".nv-context").attr("transform","translate(0,"+(n+O.bottom+N.top)+")").style("display",G?"initial":"none");var h=l.select(".nv-context .nv-linesWrap").datum(i.filter(function(t){return!t.disabled}));d3.transition(h).call(E),D.x(k).on("brush",function(){x()}),R&&D.extent(R);var g=l.select(".nv-brushBackground").selectAll("g").data([R||D.extent()]),v=g.enter().append("g");v.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",a),v.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",a);var m=l.select(".nv-x.nv-brush").call(D);m.selectAll("rect").attr("height",a),m.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,i=a/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(6+i)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(8+i)+"V"+(2*i-8)+"M"+4.5*n+","+(8+i)+"V"+(2*i-8)}),x(),l.select(".nv-context .nv-background rect").attr("width",r).attr("height",a),X&&(F.scale(k)._ticks(ft.utils.calcTicksX(r/100,i)).tickSize(-a,0),l.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")"),d3.transition(l.select(".nv-context .nv-x.nv-axis")).call(F)),Y&&(_.scale(w)._ticks(ft.utils.calcTicksY(a/36,i)).tickSize(-r,0),d3.transition(l.select(".nv-context .nv-y.nv-axis")).call(_)),l.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")")}else d.call(M),f(),p();function x(){R=D.empty()?null:D.extent();var n=D.empty()?k.domain():D.extent();Math.abs(n[0]-n[1])<=1||(K.brush({extent:n,brush:D}),D.empty()||D.extent(R),g.data([D.empty()?k.domain():R]).each(function(t,e){var n=k(t[0])-y.range()[0],i=r-k(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",k(t[1])).attr("width",i<0?0:i)}),l.select(".nv-focus .nv-linesWrap").datum(i.filter(function(t){return!t.disabled}).map(function(t,e){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,e){return M.x()(t,e)>=n[0]&&M.x()(t,e)<=n[1]}),disableTooltip:t.disableTooltip}})).transition().duration(q).call(M),f(),p())}S.dispatch.on("stateChange",function(t){for(var e in t)Z[e]=t[e];K.stateChange(Z),$.update()}),W.dispatch.on("elementMousemove",function(o){M.clearHighlights();var s,l,u,c=[];if(i.filter(function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip}).forEach(function(t,e){var n=G?D.empty()?k.domain():D.extent():y.domain(),i=t.values.filter(function(t,e){return M.x()(t,e)>=n[0]&&M.x()(t,e)<=n[1]}),r=i[l=ft.interactiveBisect(i,o.pointXValue,M.x())],a=$.y()(r,l);null!==a&&M.highlightPoint(t.seriesIndex,l,!0),void 0!==r&&(void 0===s&&(s=r),void 0===u&&(u=$.xScale()($.x()(r,l))),c.push({key:t.key,unit:t.unit,value:a,color:B(t,t.seriesIndex),data:r}))}),2<c.length){var t=$.yScale().invert(o.mouseY),e=.03*Math.abs($.yScale().domain()[0]-$.yScale().domain()[1]),n=ft.nearestValueIndex(c.map(function(t){return t.value}),t,e);null!==n&&(c[n].highlight=!0)}W.tooltip.chartContainer($.container.parentNode).valueFormatter(function(t,e){return null===t?"N/A":C.tickFormat()(t)}).data({value:$.x()(s,l),index:l,series:c})(),W.renderGuideLine(u)}),W.dispatch.on("elementClick",function(r){var a,o=[];i.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t){var e=ft.interactiveBisect(t.values,r.pointXValue,$.x()),n=t.values[e];if(void 0!==n){void 0===a&&(a=$.xScale()($.x()(n,e)));var i=$.yScale()($.y()(n,e));o.push({point:n,pointIndex:e,pos:[a,i],seriesIndex:t.seriesIndex,series:t})}}),M.dispatch.elementClick(o)}),W.dispatch.on("elementMouseout",function(t){M.clearHighlights()}),K.on("changeState",function(n){void 0!==n.disabled&&i.length===n.disabled.length&&(i.forEach(function(t,e){t.disabled=n.disabled[e]}),Z.disabled=n.disabled),$.update()})}),i.renderEnd("lineChart immediate"),$}return M.dispatch.on("elementMouseover.tooltip",function(t){t.series.disableTooltip||e.data(t).hidden(!1)}),M.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),$.dispatch=K,$.lines=M,$.lines2=E,$.legend=S,$.xAxis=A,$.x2Axis=F,$.yAxis=C,$.y2Axis=_,$.interactiveLayer=W,$.tooltip=e,$.state=Z,$.dispatch=K,$.options=ft.utils.optionsFunc.bind($),$._options=Object.create({},{width:{get:function(){return P},set:function(t){P=t}},height:{get:function(){return T},set:function(t){T=t}},showLegend:{get:function(){return L},set:function(t){L=t}},showXAxis:{get:function(){return V},set:function(t){V=t}},showYAxis:{get:function(){return z},set:function(t){z=t}},focusEnable:{get:function(){return G},set:function(t){G=t}},focusHeight:{get:function(){return height2},set:function(t){j=t}},focusShowAxisX:{get:function(){return X},set:function(t){X=t}},focusShowAxisY:{get:function(){return Y},set:function(t){Y=t}},brushExtent:{get:function(){return R},set:function(t){R=t}},defaultState:{get:function(){return Q},set:function(t){Q=t}},noData:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return O},set:function(t){O.top=void 0!==t.top?t.top:O.top,O.right=void 0!==t.right?t.right:O.right,O.bottom=void 0!==t.bottom?t.bottom:O.bottom,O.left=void 0!==t.left?t.left:O.left}},duration:{get:function(){return q},set:function(t){q=t,i.reset(q),M.duration(q),A.duration(q),F.duration(q),C.duration(q),_.duration(q)}},focusMargin:{get:function(){return N},set:function(t){N.top=void 0!==t.top?t.top:N.top,N.right=void 0!==t.right?t.right:N.right,N.bottom=void 0!==t.bottom?t.bottom:N.bottom,N.left=void 0!==t.left?t.left:N.left}},color:{get:function(){return B},set:function(t){B=ft.utils.getColor(t),S.color(B),M.color(B)}},interpolate:{get:function(){return M.interpolate()},set:function(t){M.interpolate(t),E.interpolate(t)}},xTickFormat:{get:function(){return A.tickFormat()},set:function(t){A.tickFormat(t),F.tickFormat(t)}},yTickFormat:{get:function(){return C.tickFormat()},set:function(t){C.tickFormat(t),_.tickFormat(t)}},x:{get:function(){return M.x()},set:function(t){M.x(t),E.x(t)}},y:{get:function(){return M.y()},set:function(t){M.y(t),E.y(t)}},rightAlignYAxis:{get:function(){return I},set:function(t){I=t,C.orient(I?"right":"left")}},useInteractiveGuideline:{get:function(){return H},set:function(t){(H=t)&&(M.interactive(!1),M.useVoronoi(!1))}}}),ft.utils.inheritOptions($,M),ft.utils.initOptions($),$},ft.models.lineWithFocusChart=function(){return ft.models.lineChart().margin({bottom:30}).focusEnable(!0)},ft.models.linePlusBarChart=function(){"use strict";var M,A,C,S,W,E,F,_=ft.models.line(),D=ft.models.line(),O=ft.models.historicalBar(),N=ft.models.historicalBar(),B=ft.models.axis(),P=ft.models.axis(),T=ft.models.axis(),L=ft.models.axis(),V=ft.models.axis(),z=ft.models.axis(),I=ft.models.legend(),H=d3.svg.brush(),e=ft.models.tooltip(),G={top:30,right:30,bottom:30,left:60},Y={top:0,right:30,bottom:20,left:60},X=null,j=null,R=function(t){return t.x},Z=function(t){return t.y},Q=ft.utils.defaultColor(),K=!0,q=!0,U=!1,J=!0,$=50,tt=null,n=null,et=d3.dispatch("brush","stateChange","changeState"),nt=0,it=ft.utils.state(),rt=null,at=" (left axis)",ot=" (right axis)",st=!1;_.clipEdge(!0),D.interactive(!1),D.pointActive(function(t){return!1}),B.orient("bottom").tickPadding(5),T.orient("left"),L.orient("right"),P.orient("bottom").tickPadding(5),V.orient("left"),z.orient("right"),e.headerEnabled(!0).headerFormatter(function(t,e){return B.tickFormat()(t,e)});var lt=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},ut=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},ct=function(t){return t.every(function(t){return t.disabled})};function dt(t){return t.each(function(o){var t=d3.select(this);ft.utils.initSVG(t);var e,s=ft.utils.availableWidth(X,t,G),l=ft.utils.availableHeight(j,t,G)-(q?$:0),r=$-Y.top-Y.bottom;if(dt.update=function(){t.transition().duration(nt).call(dt)},dt.container=this,it.setter(ut(o),dt.update).getter(lt(o)).update(),it.disabled=o.map(function(t){return!!t.disabled}),!rt)for(e in rt={},it)it[e]instanceof Array?rt[e]=it[e].slice(0):rt[e]=it[e];if(!(o&&o.length&&o.filter(function(t){return t.values.length}).length))return ft.utils.noData(dt,t),dt;t.selectAll(".nv-noData").remove();var u=o.filter(function(t){return!t.disabled&&t.bar}),c=o.filter(function(t){return!t.bar});A=O.xScale(),C=P.scale(),S=st?_.yScale():O.yScale(),W=st?O.yScale():_.yScale(),E=st?D.yScale():N.yScale(),F=st?N.yScale():D.yScale();var n=o.filter(function(t){return!t.disabled&&(st?!t.bar:t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:R(t,e),y:Z(t,e)}})}),i=o.filter(function(t){return!t.disabled&&(st?t.bar:!t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:R(t,e),y:Z(t,e)}})});A.range([0,s]),C.domain(d3.extent(d3.merge(n.concat(i)),function(t){return t.x})).range([0,s]);var a=t.selectAll("g.nv-wrap.nv-linePlusBar").data([o]),d=a.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),f=a.select("g");d.append("g").attr("class","nv-legendWrap");var p=d.append("g").attr("class","nv-focus");p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y1 nv-axis"),p.append("g").attr("class","nv-y2 nv-axis"),p.append("g").attr("class","nv-barsWrap"),p.append("g").attr("class","nv-linesWrap");var h=d.append("g").attr("class","nv-context");if(h.append("g").attr("class","nv-x nv-axis"),h.append("g").attr("class","nv-y1 nv-axis"),h.append("g").attr("class","nv-y2 nv-axis"),h.append("g").attr("class","nv-barsWrap"),h.append("g").attr("class","nv-linesWrap"),h.append("g").attr("class","nv-brushBackground"),h.append("g").attr("class","nv-x nv-brush"),K){var g=I.align()?s/2:s,v=I.align()?g:0;I.width(g),f.select(".nv-legendWrap").datum(o.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=st?t.originalKey+(t.bar?ot:at):t.originalKey+(t.bar?at:ot),t})).call(I),G.top!=I.height()&&(G.top=I.height(),l=ft.utils.availableHeight(j,t,G)-$),f.select(".nv-legendWrap").attr("transform","translate("+v+","+-G.top+")")}a.attr("transform","translate("+G.left+","+G.top+")"),f.select(".nv-context").style("display",q?"initial":"none"),N.width(s).height(r).color(o.map(function(t,e){return t.color||Q(t,e)}).filter(function(t,e){return!o[e].disabled&&o[e].bar})),D.width(s).height(r).color(o.map(function(t,e){return t.color||Q(t,e)}).filter(function(t,e){return!o[e].disabled&&!o[e].bar}));var m=f.select(".nv-context .nv-barsWrap").datum(u.length?u:[{values:[]}]),x=f.select(".nv-context .nv-linesWrap").datum(ct(c)?[{values:[]}]:c.filter(function(t){return!t.disabled}));f.select(".nv-context").attr("transform","translate(0,"+(l+G.bottom+Y.top)+")"),m.transition().call(N),x.transition().call(D),J&&(P._ticks(ft.utils.calcTicksX(s/100,o)).tickSize(-r,0),f.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")"),f.select(".nv-context .nv-x.nv-axis").transition().call(P)),U&&(V.scale(E)._ticks(r/36).tickSize(-s,0),z.scale(F)._ticks(r/36).tickSize(u.length?0:-s,0),f.select(".nv-context .nv-y3.nv-axis").style("opacity",u.length?1:0).attr("transform","translate(0,"+C.range()[0]+")"),f.select(".nv-context .nv-y2.nv-axis").style("opacity",c.length?1:0).attr("transform","translate("+C.range()[1]+",0)"),f.select(".nv-context .nv-y1.nv-axis").transition().call(V),f.select(".nv-context .nv-y2.nv-axis").transition().call(z)),H.x(C).on("brush",w),tt&&H.extent(tt);var y=f.select(".nv-brushBackground").selectAll("g").data([tt||H.extent()]),b=y.enter().append("g");b.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",r),b.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",r);var k=f.select(".nv-x.nv-brush").call(H);function w(){tt=H.empty()?null:H.extent(),M=H.empty()?C.domain():H.extent(),et.brush({extent:M,brush:H}),H.empty()||H.extent(tt),y.data([H.empty()?C.domain():tt]).each(function(t,e){var n=C(t[0])-C.range()[0],i=C.range()[1]-C(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",C(t[1])).attr("width",i<0?0:i)}),O.width(s).height(l).color(o.map(function(t,e){return t.color||Q(t,e)}).filter(function(t,e){return!o[e].disabled&&o[e].bar})),_.width(s).height(l).color(o.map(function(t,e){return t.color||Q(t,e)}).filter(function(t,e){return!o[e].disabled&&!o[e].bar}));var t=f.select(".nv-focus .nv-barsWrap").datum(u.length?u.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return O.x()(t,e)>=M[0]&&O.x()(t,e)<=M[1]})}}):[{values:[]}]),e=f.select(".nv-focus .nv-linesWrap").datum(ct(c)?[{values:[]}]:c.filter(function(t){return!t.disabled}).map(function(t,e){return{area:t.area,fillOpacity:t.fillOpacity,key:t.key,values:t.values.filter(function(t,e){return _.x()(t,e)>=M[0]&&_.x()(t,e)<=M[1]})}}));A=u.length&&!st?O.xScale():_.xScale(),B.scale(A)._ticks(ft.utils.calcTicksX(s/100,o)).tickSize(-l,0),B.domain([Math.ceil(M[0]),Math.floor(M[1])]),f.select(".nv-x.nv-axis").transition().duration(nt).call(B),t.transition().duration(nt).call(O),e.transition().duration(nt).call(_),f.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")"),T.scale(S)._ticks(ft.utils.calcTicksY(l/36,o)).tickSize(-s,0),L.scale(W)._ticks(ft.utils.calcTicksY(l/36,o)).tickSize(u.length?0:-s,0);var n=u.length?1:0,i=c.length&&!ct(c)?1:0,r=st?i:n,a=st?n:i;f.select(".nv-focus .nv-y1.nv-axis").style("opacity",r),f.select(".nv-focus .nv-y2.nv-axis").style("opacity",a).attr("transform","translate("+A.range()[1]+",0)"),f.select(".nv-focus .nv-y1.nv-axis").transition().duration(nt).call(T),f.select(".nv-focus .nv-y2.nv-axis").transition().duration(nt).call(L)}k.selectAll("rect").attr("height",r),k.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,i=r/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(6+i)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(8+i)+"V"+(2*i-8)+"M"+4.5*n+","+(8+i)+"V"+(2*i-8)}),I.dispatch.on("stateChange",function(t){for(var e in t)it[e]=t[e];et.stateChange(it),dt.update()}),et.on("changeState",function(n){void 0!==n.disabled&&(o.forEach(function(t,e){t.disabled=n.disabled[e]}),it.disabled=n.disabled),dt.update()}),w()}),dt}return _.dispatch.on("elementMouseover.tooltip",function(t){e.duration(100).valueFormatter(function(t,e){return(st?{main:L,focus:z}:{main:T,focus:V}).main.tickFormat()(t,e)}).data(t).hidden(!1)}),_.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),O.dispatch.on("elementMouseover.tooltip",function(t){t.value=dt.x()(t.data),t.series={value:dt.y()(t.data),color:t.color},e.duration(0).valueFormatter(function(t,e){return(st?{main:T,focus:V}:{main:L,focus:z}).main.tickFormat()(t,e)}).data(t).hidden(!1)}),O.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),O.dispatch.on("elementMousemove.tooltip",function(t){e()}),dt.dispatch=et,dt.legend=I,dt.lines=_,dt.lines2=D,dt.bars=O,dt.bars2=N,dt.xAxis=B,dt.x2Axis=P,dt.y1Axis=T,dt.y2Axis=L,dt.y3Axis=V,dt.y4Axis=z,dt.tooltip=e,dt.options=ft.utils.optionsFunc.bind(dt),dt._options=Object.create({},{width:{get:function(){return X},set:function(t){X=t}},height:{get:function(){return j},set:function(t){j=t}},showLegend:{get:function(){return K},set:function(t){K=t}},brushExtent:{get:function(){return tt},set:function(t){tt=t}},noData:{get:function(){return n},set:function(t){n=t}},focusEnable:{get:function(){return q},set:function(t){q=t}},focusHeight:{get:function(){return $},set:function(t){$=t}},focusShowAxisX:{get:function(){return J},set:function(t){J=t}},focusShowAxisY:{get:function(){return U},set:function(t){U=t}},legendLeftAxisHint:{get:function(){return at},set:function(t){at=t}},legendRightAxisHint:{get:function(){return ot},set:function(t){ot=t}},margin:{get:function(){return G},set:function(t){G.top=void 0!==t.top?t.top:G.top,G.right=void 0!==t.right?t.right:G.right,G.bottom=void 0!==t.bottom?t.bottom:G.bottom,G.left=void 0!==t.left?t.left:G.left}},focusMargin:{get:function(){return Y},set:function(t){Y.top=void 0!==t.top?t.top:Y.top,Y.right=void 0!==t.right?t.right:Y.right,Y.bottom=void 0!==t.bottom?t.bottom:Y.bottom,Y.left=void 0!==t.left?t.left:Y.left}},duration:{get:function(){return nt},set:function(t){nt=t}},color:{get:function(){return Q},set:function(t){Q=ft.utils.getColor(t),I.color(Q)}},x:{get:function(){return R},set:function(t){R=t,_.x(t),D.x(t),O.x(t),N.x(t)}},y:{get:function(){return Z},set:function(t){Z=t,_.y(t),D.y(t),O.y(t),N.y(t)}},switchYAxisOrder:{get:function(){return st},set:function(t){if(st!==t){var e=T.tickFormat();T.tickFormat(L.tickFormat()),L.tickFormat(e)}st=t}}}),ft.utils.inheritOptions(dt,_),ft.utils.initOptions(dt),dt},ft.models.lineWithFocusChart=function(){"use strict";var m,x,y,b,k=ft.models.line(),w=ft.models.line(),M=ft.models.axis(),A=ft.models.axis(),C=ft.models.axis(),S=ft.models.axis(),W=ft.models.legend(),E=d3.svg.brush(),e=ft.models.tooltip(),F=ft.interactiveGuideline(),_={top:30,right:30,bottom:30,left:60},D={top:0,right:30,bottom:20,left:60},O=ft.utils.defaultColor(),N=null,B=null,P=50,T=!1,L=!0,V=null,n=null,z=d3.dispatch("brush","stateChange","changeState"),I=250,H=ft.utils.state(),G=null;k.clipEdge(!0).duration(0),w.interactive(!1),w.pointActive(function(t){return!1}),M.orient("bottom").tickPadding(5),A.orient("left"),C.orient("bottom").tickPadding(5),S.orient("left"),e.valueFormatter(function(t,e){return A.tickFormat()(t,e)}).headerFormatter(function(t,e){return M.tickFormat()(t,e)});var Y=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},X=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function j(t){return t.each(function(r){var t=d3.select(this),c=this;ft.utils.initSVG(t);var e,a=ft.utils.availableWidth(N,t,_),n=ft.utils.availableHeight(B,t,_)-P,o=P-D.top-D.bottom;if(j.update=function(){t.transition().duration(I).call(j)},j.container=this,H.setter(X(r),j.update).getter(Y(r)).update(),H.disabled=r.map(function(t){return!!t.disabled}),!G)for(e in G={},H)H[e]instanceof Array?G[e]=H[e].slice(0):G[e]=H[e];if(!(r&&r.length&&r.filter(function(t){return t.values.length}).length))return ft.utils.noData(j,t),j;t.selectAll(".nv-noData").remove(),m=k.xScale(),x=k.yScale(),y=w.xScale(),b=w.yScale();var i=t.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([r]),s=i.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),l=i.select("g");s.append("g").attr("class","nv-legendWrap");var u=s.append("g").attr("class","nv-focus");u.append("g").attr("class","nv-x nv-axis"),u.append("g").attr("class","nv-y nv-axis"),u.append("g").attr("class","nv-linesWrap"),u.append("g").attr("class","nv-interactive");var d=s.append("g").attr("class","nv-context");d.append("g").attr("class","nv-x nv-axis"),d.append("g").attr("class","nv-y nv-axis"),d.append("g").attr("class","nv-linesWrap"),d.append("g").attr("class","nv-brushBackground"),d.append("g").attr("class","nv-x nv-brush"),L&&(W.width(a),l.select(".nv-legendWrap").datum(r).call(W),_.top!=W.height()&&(_.top=W.height(),n=ft.utils.availableHeight(B,t,_)-P),l.select(".nv-legendWrap").attr("transform","translate(0,"+-_.top+")")),i.attr("transform","translate("+_.left+","+_.top+")"),T&&(F.width(a).height(n).margin({left:_.left,top:_.top}).svgContainer(t).xScale(m),i.select(".nv-interactive").call(F)),k.width(a).height(n).color(r.map(function(t,e){return t.color||O(t,e)}).filter(function(t,e){return!r[e].disabled})),w.defined(k.defined()).width(a).height(o).color(r.map(function(t,e){return t.color||O(t,e)}).filter(function(t,e){return!r[e].disabled})),l.select(".nv-context").attr("transform","translate(0,"+(n+_.bottom+D.top)+")");var f=l.select(".nv-context .nv-linesWrap").datum(r.filter(function(t){return!t.disabled}));d3.transition(f).call(w),M.scale(m)._ticks(ft.utils.calcTicksX(a/100,r)).tickSize(-n,0),A.scale(x)._ticks(ft.utils.calcTicksY(n/36,r)).tickSize(-a,0),l.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+n+")"),E.x(y).on("brush",function(){v()}),V&&E.extent(V);var p=l.select(".nv-brushBackground").selectAll("g").data([V||E.extent()]),h=p.enter().append("g");h.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",o),h.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",o);var g=l.select(".nv-x.nv-brush").call(E);function v(){V=E.empty()?null:E.extent();var n=E.empty()?y.domain():E.extent();Math.abs(n[0]-n[1])<=1||(z.brush({extent:n,brush:E}),E.empty()||E.extent(V),p.data([E.empty()?y.domain():V]).each(function(t,e){var n=y(t[0])-m.range()[0],i=a-y(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",y(t[1])).attr("width",i<0?0:i)}),l.select(".nv-focus .nv-linesWrap").datum(r.filter(function(t){return!t.disabled}).map(function(t,e){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,e){return k.x()(t,e)>=n[0]&&k.x()(t,e)<=n[1]})}})).transition().duration(I).call(k),l.select(".nv-focus .nv-x.nv-axis").transition().duration(I).call(M),l.select(".nv-focus .nv-y.nv-axis").transition().duration(I).call(A))}g.selectAll("rect").attr("height",o),g.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,i=o/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(6+i)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(8+i)+"V"+(2*i-8)+"M"+4.5*n+","+(8+i)+"V"+(2*i-8)}),v(),C.scale(y)._ticks(ft.utils.calcTicksX(a/100,r)).tickSize(-o,0),l.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),d3.transition(l.select(".nv-context .nv-x.nv-axis")).call(C),S.scale(b)._ticks(ft.utils.calcTicksY(o/36,r)).tickSize(-a,0),d3.transition(l.select(".nv-context .nv-y.nv-axis")).call(S),l.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),W.dispatch.on("stateChange",function(t){for(var e in t)H[e]=t[e];z.stateChange(H),j.update()}),F.dispatch.on("elementMousemove",function(a){k.clearHighlights();var o,s,l,u=[];if(r.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){var n=E.empty()?y.domain():E.extent(),i=t.values.filter(function(t,e){return k.x()(t,e)>=n[0]&&k.x()(t,e)<=n[1]}),r=i[s=ft.interactiveBisect(i,a.pointXValue,k.x())];null!=j.y()(r,s)&&k.highlightPoint(e,s,!0),void 0!==r&&(void 0===o&&(o=r),void 0===l&&(l=j.xScale()(j.x()(r,s))),u.push({key:t.key,unit:t.unit,value:j.y()(r,s),color:O(t,t.seriesIndex)}))}),2<u.length){var t=j.yScale().invert(a.mouseY),e=.03*Math.abs(j.yScale().domain()[0]-j.yScale().domain()[1]),n=ft.nearestValueIndex(u.map(function(t){return t.value}),t,e);null!==n&&(u[n].highlight=!0)}var i=M.tickFormat()(j.x()(o,s));F.tooltip.position({left:a.mouseX+_.left,top:a.mouseY+_.top}).chartContainer(c.parentNode).valueFormatter(function(t,e){return null==t?"N/A":A.tickFormat()(t)}).data({value:i,index:s,series:u})(),F.renderGuideLine(l)}),F.dispatch.on("elementMouseout",function(t){k.clearHighlights()}),z.on("changeState",function(n){void 0!==n.disabled&&r.forEach(function(t,e){t.disabled=n.disabled[e]}),j.update()})}),j}return k.dispatch.on("elementMouseover.tooltip",function(t){e.data(t).position(t.pos).hidden(!1)}),k.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),j.dispatch=z,j.legend=W,j.lines=k,j.lines2=w,j.xAxis=M,j.yAxis=A,j.x2Axis=C,j.y2Axis=S,j.interactiveLayer=F,j.tooltip=e,j.options=ft.utils.optionsFunc.bind(j),j._options=Object.create({},{width:{get:function(){return N},set:function(t){N=t}},height:{get:function(){return B},set:function(t){B=t}},focusHeight:{get:function(){return P},set:function(t){P=t}},showLegend:{get:function(){return L},set:function(t){L=t}},brushExtent:{get:function(){return V},set:function(t){V=t}},defaultState:{get:function(){return G},set:function(t){G=t}},noData:{get:function(){return n},set:function(t){n=t}},tooltips:{get:function(){return e.enabled()},set:function(t){ft.deprecated("tooltips","use chart.tooltip.enabled() instead"),e.enabled(!!t)}},tooltipContent:{get:function(){return e.contentGenerator()},set:function(t){ft.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),e.contentGenerator(t)}},margin:{get:function(){return _},set:function(t){_.top=void 0!==t.top?t.top:_.top,_.right=void 0!==t.right?t.right:_.right,_.bottom=void 0!==t.bottom?t.bottom:_.bottom,_.left=void 0!==t.left?t.left:_.left}},focusMargin:{get:function(){return D},set:function(t){D.top=void 0!==t.top?t.top:D.top,D.right=void 0!==t.right?t.right:D.right,D.bottom=void 0!==t.bottom?t.bottom:D.bottom,D.left=void 0!==t.left?t.left:D.left}},color:{get:function(){return O},set:function(t){O=ft.utils.getColor(t),W.color(O)}},interpolate:{get:function(){return k.interpolate()},set:function(t){k.interpolate(t),w.interpolate(t)}},xTickFormat:{get:function(){return M.tickFormat()},set:function(t){M.tickFormat(t),C.tickFormat(t)}},yTickFormat:{get:function(){return A.tickFormat()},set:function(t){A.tickFormat(t),S.tickFormat(t)}},duration:{get:function(){return I},set:function(t){I=t,A.duration(I),S.duration(I),M.duration(I),C.duration(I)}},x:{get:function(){return k.x()},set:function(t){k.x(t),w.x(t)}},y:{get:function(){return k.y()},set:function(t){k.y(t),w.y(t)}},useInteractiveGuideline:{get:function(){return T},set:function(t){(T=t)&&(k.interactive(!1),k.useVoronoi(!1))}}}),ft.utils.inheritOptions(j,k),ft.utils.initOptions(j),j},ft.models.multiBar=function(){"use strict";var g,v,m,x,y,b,k={top:0,right:0,bottom:0,left:0},w=960,M=500,A=d3.scale.ordinal(),C=d3.scale.linear(),S=Math.floor(1e4*Math.random()),W=null,E=function(t){return t.x},F=function(t){return t.y},_=[0],D=!0,O=!1,N="zero",B=ft.utils.defaultColor(),P=!1,T=null,L=500,V=.1,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),I=ft.utils.renderWatch(z,L),H=0;function e(t){return I.reset(),t.each(function(o){var t=w-k.left-k.right,e=M-k.top-k.bottom;W=d3.select(this),ft.utils.initSVG(W);var r=0;if(P&&o.length&&(P=[{values:o[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),O){var i=d3.layout.stack().offset(N).values(function(t){return t.values}).y(F)(!o.length&&P?P:o);i.forEach(function(t,n){t.nonStackable?(o[n].nonStackableSeries=r++,i[n]=o[n]):0<n&&i[n-1].nonStackable&&i[n].values.map(function(t,e){t.y0-=i[n-1].values[e].y,t.y1=t.y0+t.y})}),o=i}o.forEach(function(e,n){e.values.forEach(function(t){t.series=n,t.key=e.key})}),O&&o[0].values.map(function(t,i){var r=0,a=0;o.map(function(t,e){if(!o[e].nonStackable){var n=t.values[i];n.size=Math.abs(n.y),n.y<0?(n.y1=a,a-=n.size):(n.y1=n.size+r,r+=n.size)}})});var n=v&&m?[]:o.map(function(t,n){return t.values.map(function(t,e){return{x:E(t,e),y:F(t,e),y0:t.y0,y1:t.y1,idx:n}})});A.domain(v||d3.merge(n).map(function(t){return t.x})).rangeBands(x||[0,t],V),C.domain(m||d3.extent(d3.merge(n).map(function(t){var e=t.y;return O&&!o[t.idx].nonStackable&&(e=0<t.y?t.y1:t.y1+t.y),e}).concat(_))).range(y||[e,0]),A.domain()[0]===A.domain()[1]&&(A.domain()[0]?A.domain([A.domain()[0]-.01*A.domain()[0],A.domain()[1]+.01*A.domain()[1]]):A.domain([-1,1])),C.domain()[0]===C.domain()[1]&&(C.domain()[0]?C.domain([C.domain()[0]+.01*C.domain()[0],C.domain()[1]-.01*C.domain()[1]]):C.domain([-1,1])),b=b||C;var a=W.selectAll("g.nv-wrap.nv-multibar").data([o]),s=a.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),l=s.append("defs"),u=s.append("g"),c=a.select("g");u.append("g").attr("class","nv-groups"),a.attr("transform","translate("+k.left+","+k.top+")"),l.append("clipPath").attr("id","nv-edge-clip-"+S).append("rect"),a.select("#nv-edge-clip-"+S+" rect").attr("width",t).attr("height",e),c.attr("clip-path",D?"url(#nv-edge-clip-"+S+")":"");var d=a.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});d.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var f=I.transition(d.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,L)).attr("y",function(t,e,n){var i=b(0)||0;return O&&o[t.series]&&!o[t.series].nonStackable&&(i=b(t.y0)),i}).attr("height",0).remove();f.delay&&f.delay(function(t,e){return e*(L/(H+1))-e}),d.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return B(t,e)}).style("stroke",function(t,e){return B(t,e)}),d.style("stroke-opacity",1).style("fill-opacity",.75);var p=d.selectAll("rect.nv-bar").data(function(t){return P&&!o.length?P.values:t.values});p.exit().remove();p.enter().append("rect").attr("class",function(t,e){return F(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,e,n){return O&&!o[n].nonStackable?0:n*A.rangeBand()/o.length}).attr("y",function(t,e,n){return b(O&&!o[n].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,e,n){return A.rangeBand()/(O&&!o[n].nonStackable?1:o.length)}).attr("transform",function(t,e){return"translate("+A(E(t,e))+",0)"});p.style("fill",function(t,e,n){return B(t,n,e)}).style("stroke",function(t,e,n){return B(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),z.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),z.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){z.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){z.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){z.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),p.attr("class",function(t,e){return F(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+A(E(t,e))+",0)"}),T&&(g=g||o.map(function(){return!0}),p.style("fill",function(t,e,n){return d3.rgb(T(t,e)).darker(g.map(function(t,e){return e}).filter(function(t,e){return!g[e]})[n]).toString()}).style("stroke",function(t,e,n){return d3.rgb(T(t,e)).darker(g.map(function(t,e){return e}).filter(function(t,e){return!g[e]})[n]).toString()}));var h=p.watchTransition(I,"multibar",Math.min(250,L)).delay(function(t,e){return e*L/o[0].values.length});O?h.attr("y",function(t,e,n){return o[n].nonStackable?F(t,e)<0?C(0):C(0)-C(F(t,e))<-1?C(0)-1:C(F(t,e))||0:C(t.y1)}).attr("height",function(t,e,n){return o[n].nonStackable?Math.max(Math.abs(C(F(t,e))-C(0)),0)||0:Math.max(Math.abs(C(t.y+t.y0)-C(t.y0)),0)}).attr("x",function(t,e,n){var i=0;return o[n].nonStackable&&(i=t.series*A.rangeBand()/o.length,o.length!==r&&(i=o[n].nonStackableSeries*A.rangeBand()/(2*r))),i}).attr("width",function(t,e,n){if(o[n].nonStackable){var i=A.rangeBand()/r;return o.length!==r&&(i=A.rangeBand()/(2*r)),i}return A.rangeBand()}):h.attr("x",function(t,e){return t.series*A.rangeBand()/o.length}).attr("width",A.rangeBand()/o.length).attr("y",function(t,e){return F(t,e)<0?C(0):C(0)-C(F(t,e))<1?C(0)-1:C(F(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(C(F(t,e))-C(0)),1)||0}),A.copy(),b=C.copy(),o[0]&&o[0].values&&(H=o[0].values.length)}),I.renderEnd("multibar immediate"),e}return e.dispatch=z,e.options=ft.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return w},set:function(t){w=t}},height:{get:function(){return M},set:function(t){M=t}},x:{get:function(){return E},set:function(t){E=t}},y:{get:function(){return F},set:function(t){F=t}},xScale:{get:function(){return A},set:function(t){A=t}},yScale:{get:function(){return C},set:function(t){C=t}},xDomain:{get:function(){return v},set:function(t){v=t}},yDomain:{get:function(){return m},set:function(t){m=t}},xRange:{get:function(){return x},set:function(t){x=t}},yRange:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return _},set:function(t){_=t}},stacked:{get:function(){return O},set:function(t){O=t}},stackOffset:{get:function(){return N},set:function(t){N=t}},clipEdge:{get:function(){return D},set:function(t){D=t}},disabled:{get:function(){return g},set:function(t){g=t}},id:{get:function(){return S},set:function(t){S=t}},hideable:{get:function(){return P},set:function(t){P=t}},groupSpacing:{get:function(){return V},set:function(t){V=t}},margin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},duration:{get:function(){return L},set:function(t){L=t,I.reset(L)}},color:{get:function(){return B},set:function(t){B=ft.utils.getColor(t)}},barColor:{get:function(){return T},set:function(t){T=t?ft.utils.getColor(t):null}}}),ft.utils.initOptions(e),e},ft.models.multiBarChart=function(){"use strict";var p,h,g=ft.models.multiBar(),v=ft.models.axis(),m=ft.models.axis(),x=ft.interactiveGuideline(),y=ft.models.legend(),b=ft.models.legend(),k=ft.models.tooltip(),w={top:30,right:20,bottom:50,left:60},M=null,A=null,C=ft.utils.defaultColor(),S=!0,W={},E=!0,F=!0,_=!0,D=!1,O=!0,N=!1,B=!1,P=0,T=ft.utils.state(),L=null,e=null,V=d3.dispatch("stateChange","changeState","renderEnd"),z=function(){return S?180:0},I=250,H=!1;T.stacked=!1,g.stacked(!1),v.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),m.orient(D?"right":"left").tickFormat(d3.format(",.1f")),k.duration(0).valueFormatter(function(t,e){return m.tickFormat()(t,e)}).headerFormatter(function(t,e){return v.tickFormat()(t,e)}),b.updateState(!1);var n=ft.utils.renderWatch(V),G=!1,Y=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:G}}},X=function(t){return function(n){void 0!==n.stacked&&(G=n.stacked),void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function j(t){return n.reset(),n.models(g),F&&n.models(v),_&&n.models(m),t.each(function(u){var t=d3.select(this),e=this;ft.utils.initSVG(t);var n,i=ft.utils.availableWidth(M,t,w),r=ft.utils.availableHeight(A,t,w);if(j.update=function(){0===I?t.call(j):t.transition().duration(I).call(j)},j.container=this,T.setter(X(u),j.update).getter(Y(u)).update(),T.disabled=u.map(function(t){return!!t.disabled}),!L)for(n in L={},T)T[n]instanceof Array?L[n]=T[n].slice(0):L[n]=T[n];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return ft.utils.noData(j,t),j;t.selectAll(".nv-noData").remove(),p=g.xScale(),h=g.yScale();var a=t.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([u]),o=a.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),s=a.select("g");if(o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y nv-axis"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-legendWrap"),o.append("g").attr("class","nv-controlsWrap"),o.append("g").attr("class","nv-interactive"),E&&(y.width(i-z()),s.select(".nv-legendWrap").datum(u).call(y),w.top!=y.height()&&(w.top=y.height(),r=ft.utils.availableHeight(A,t,w)),s.select(".nv-legendWrap").attr("transform","translate("+z()+","+-w.top+")")),S){var l=[{key:W.grouped||"Grouped",disabled:g.stacked()},{key:W.stacked||"Stacked",disabled:!g.stacked()}];b.width(z()).color(["#444","#444","#444"]),s.select(".nv-controlsWrap").datum(l).attr("transform","translate(0,"+-w.top+")").call(b)}if(a.attr("transform","translate("+w.left+","+w.top+")"),D&&s.select(".nv-y.nv-axis").attr("transform","translate("+i+",0)"),g.disabled(u.map(function(t){return t.disabled})).width(i).height(r).color(u.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!u[e].disabled})),s.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).call(g),F){v.scale(p)._ticks(ft.utils.calcTicksX(i/100,u)).tickSize(-r,0),s.select(".nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")"),s.select(".nv-x.nv-axis").call(v);var c=s.select(".nv-x.nv-axis > g").selectAll("g");if(c.selectAll("line, text").style("opacity",1),N){var d=function(t,e){return"translate("+t+","+e+")"};c.selectAll("text").attr("transform",function(t,e,n){return d(0,n%2==0?5:17)});var f=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;s.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return d(0,0===e||f%2!=0?17:5)})}B&&s.selectAll(".tick text").call(ft.utils.wrapTicks,j.xAxis.rangeBand()),O&&c.filter(function(t,e){return e%Math.ceil(u[0].values.length/(i/100))!=0}).selectAll("text, line").style("opacity",0),P&&c.selectAll(".tick text").attr("transform","rotate("+P+" 0,0)").style("text-anchor",0<P?"start":"end"),s.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}_&&(m.scale(h)._ticks(ft.utils.calcTicksY(r/36,u)).tickSize(-i,0),s.select(".nv-y.nv-axis").call(m)),H&&(x.width(i).height(r).margin({left:w.left,top:w.top}).svgContainer(t).xScale(p),a.select(".nv-interactive").call(x)),y.dispatch.on("stateChange",function(t){for(var e in t)T[e]=t[e];V.stateChange(T),j.update()}),b.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(l=l.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case W.grouped:g.stacked(!1);break;case"Stacked":case W.stacked:g.stacked(!0)}T.stacked=g.stacked(),V.stateChange(T),j.update()}}),V.on("changeState",function(n){void 0!==n.disabled&&(u.forEach(function(t,e){t.disabled=n.disabled[e]}),T.disabled=n.disabled),void 0!==n.stacked&&(g.stacked(n.stacked),T.stacked=n.stacked,G=n.stacked),j.update()}),H?(x.dispatch.on("elementMousemove",function(i){if(null!=i.pointXValue){var r,a,o,s,l=[];u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){a=p.domain().indexOf(i.pointXValue);var n=t.values[a];void 0!==n&&(s=n.x,void 0===r&&(r=n),void 0===o&&(o=i.mouseX),l.push({key:t.key,value:j.y()(n,a),color:C(t,t.seriesIndex),data:t.values[a]}))}),x.tooltip.chartContainer(e.parentNode).data({value:s,index:a,series:l})(),x.renderGuideLine(o)}}),x.dispatch.on("elementMouseout",function(t){x.tooltip.hidden(!0)})):(g.dispatch.on("elementMouseover.tooltip",function(t){t.value=j.x()(t.data),t.series={key:t.data.key,value:j.y()(t.data),color:t.color},k.data(t).hidden(!1)}),g.dispatch.on("elementMouseout.tooltip",function(t){k.hidden(!0)}),g.dispatch.on("elementMousemove.tooltip",function(t){k()}))}),n.renderEnd("multibarchart immediate"),j}return j.dispatch=V,j.multibar=g,j.legend=y,j.controls=b,j.xAxis=v,j.yAxis=m,j.state=T,j.tooltip=k,j.interactiveLayer=x,j.options=ft.utils.optionsFunc.bind(j),j._options=Object.create({},{width:{get:function(){return M},set:function(t){M=t}},height:{get:function(){return A},set:function(t){A=t}},showLegend:{get:function(){return E},set:function(t){E=t}},showControls:{get:function(){return S},set:function(t){S=t}},controlLabels:{get:function(){return W},set:function(t){W=t}},showXAxis:{get:function(){return F},set:function(t){F=t}},showYAxis:{get:function(){return _},set:function(t){_=t}},defaultState:{get:function(){return L},set:function(t){L=t}},noData:{get:function(){return e},set:function(t){e=t}},reduceXTicks:{get:function(){return O},set:function(t){O=t}},rotateLabels:{get:function(){return P},set:function(t){P=t}},staggerLabels:{get:function(){return N},set:function(t){N=t}},wrapLabels:{get:function(){return B},set:function(t){B=!!t}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},duration:{get:function(){return I},set:function(t){I=t,g.duration(I),v.duration(I),m.duration(I),n.reset(I)}},color:{get:function(){return C},set:function(t){C=ft.utils.getColor(t),y.color(C)}},rightAlignYAxis:{get:function(){return D},set:function(t){D=t,m.orient(D?"right":"left")}},useInteractiveGuideline:{get:function(){return H},set:function(t){H=t}},barColor:{get:function(){return g.barColor},set:function(t){g.barColor(t),y.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),ft.utils.inheritOptions(j,g),ft.utils.initOptions(j),j},ft.models.multiBarHorizontal=function(){"use strict";var c,d,f,p,h,g,v={top:0,right:0,bottom:0,left:0},m=960,x=500,e=Math.floor(1e4*Math.random()),y=null,b=d3.scale.ordinal(),k=d3.scale.linear(),w=function(t){return t.x},M=function(t){return t.y},A=function(t){return t.yErr},C=[0],S=ft.utils.defaultColor(),W=null,E=!1,F=!1,_=!1,D=60,O=.1,N=d3.format(",.2f"),n=250,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),P=ft.utils.renderWatch(B,n);function i(t){return P.reset(),t.each(function(a){var t=m-v.left-v.right,e=x-v.top-v.bottom;y=d3.select(this),ft.utils.initSVG(y),E&&(a=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(M)(a)),a.forEach(function(e,n){e.values.forEach(function(t){t.series=n,t.key=e.key})}),E&&a[0].values.map(function(t,n){var i=0,r=0;a.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=r-e.size,r-=e.size):(e.y1=i,i+=e.size)})});var n=d&&f?[]:a.map(function(t){return t.values.map(function(t,e){return{x:w(t,e),y:M(t,e),y0:t.y0,y1:t.y1}})});b.domain(d||d3.merge(n).map(function(t){return t.x})).rangeBands(p||[0,e],O),k.domain(f||d3.extent(d3.merge(n).map(function(t){return E?0<t.y?t.y1+t.y:t.y1:t.y}).concat(C))),F&&!E?k.range(h||[k.domain()[0]<0?D:0,t-(0<k.domain()[1]?D:0)]):k.range(h||[0,t]),g=g||d3.scale.linear().domain(k.domain()).range([k(0),k(0)]);var i=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]),r=i.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),o=(r.append("defs"),r.append("g"));i.select("g");o.append("g").attr("class","nv-groups"),i.attr("transform","translate("+v.left+","+v.top+")");var s=i.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});s.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),s.exit().watchTransition(P,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),s.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return S(t,e)}).style("stroke",function(t,e){return S(t,e)}),s.watchTransition(P,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var l=s.selectAll("g.nv-bar").data(function(t){return t.values});l.exit().remove();var u=l.enter().append("g").attr("transform",function(t,e,n){return"translate("+g(E?t.y0:0)+","+(E?0:n*b.rangeBand()/a.length+b(w(t,e)))+")"});u.append("rect").attr("width",0).attr("height",b.rangeBand()/(E?1:a.length)),l.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),B.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),B.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){B.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){B.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){B.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){B.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),A(a[0],0)&&(u.append("polyline"),l.select("polyline").attr("fill","none").attr("points",function(t,e){var n=A(t,e),i=.8*b.rangeBand()/(2*(E?1:a.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map(function(t){return k(t)-k(0)}))[0],-i],[n[0],i],[n[0],0],[n[1],0],[n[1],-i],[n[1],i]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,e){var n=b.rangeBand()/(2*(E?1:a.length));return"translate("+(M(t,e)<0?0:k(M(t,e))-k(0))+", "+n+")"})),u.append("text"),F&&!E?(l.select("text").attr("text-anchor",function(t,e){return M(t,e)<0?"end":"start"}).attr("y",b.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(t,e){var n=N(M(t,e)),i=A(t,e);return void 0===i?n:i.length?n+"+"+N(Math.abs(i[1]))+"-"+N(Math.abs(i[0])):n+"±"+N(Math.abs(i))}),l.watchTransition(P,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return M(t,e)<0?-4:k(M(t,e))-k(0)+4})):l.selectAll("text").text(""),_&&!E?(u.append("text").classed("nv-bar-label",!0),l.select("text.nv-bar-label").attr("text-anchor",function(t,e){return M(t,e)<0?"start":"end"}).attr("y",b.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(t,e){return w(t,e)}),l.watchTransition(P,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return M(t,e)<0?k(0)-k(M(t,e))+4:-4})):l.selectAll("text.nv-bar-label").text(""),l.attr("class",function(t,e){return M(t,e)<0?"nv-bar negative":"nv-bar positive"}),W&&(c=c||a.map(function(){return!0}),l.style("fill",function(t,e,n){return d3.rgb(W(t,e)).darker(c.map(function(t,e){return e}).filter(function(t,e){return!c[e]})[n]).toString()}).style("stroke",function(t,e,n){return d3.rgb(W(t,e)).darker(c.map(function(t,e){return e}).filter(function(t,e){return!c[e]})[n]).toString()})),E?l.watchTransition(P,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+k(t.y1)+","+b(w(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(k(M(t,e)+t.y0)-k(t.y0))||0}).attr("height",b.rangeBand()):l.watchTransition(P,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+(M(t,e)<0?k(M(t,e)):k(0))+","+(t.series*b.rangeBand()/a.length+b(w(t,e)))+")"}).select("rect").attr("height",b.rangeBand()/a.length).attr("width",function(t,e){return Math.max(Math.abs(k(M(t,e))-k(0)),1)||0}),b.copy(),g=k.copy()}),P.renderEnd("multibarHorizontal immediate"),i}return i.dispatch=B,i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return x},set:function(t){x=t}},x:{get:function(){return w},set:function(t){w=t}},y:{get:function(){return M},set:function(t){M=t}},yErr:{get:function(){return A},set:function(t){A=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return k},set:function(t){k=t}},xDomain:{get:function(){return d},set:function(t){d=t}},yDomain:{get:function(){return f},set:function(t){f=t}},xRange:{get:function(){return p},set:function(t){p=t}},yRange:{get:function(){return h},set:function(t){h=t}},forceY:{get:function(){return C},set:function(t){C=t}},stacked:{get:function(){return E},set:function(t){E=t}},showValues:{get:function(){return F},set:function(t){F=t}},disabled:{get:function(){return c},set:function(t){c=t}},id:{get:function(){return e},set:function(t){e=t}},valueFormat:{get:function(){return N},set:function(t){N=t}},valuePadding:{get:function(){return D},set:function(t){D=t}},groupSpacing:{get:function(){return O},set:function(t){O=t}},margin:{get:function(){return v},set:function(t){v.top=void 0!==t.top?t.top:v.top,v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},duration:{get:function(){return n},set:function(t){n=t,P.reset(n)}},color:{get:function(){return S},set:function(t){S=ft.utils.getColor(t)}},barColor:{get:function(){return W},set:function(t){W=t?ft.utils.getColor(t):null}}}),ft.utils.initOptions(i),i},ft.models.multiBarHorizontalChart=function(){"use strict";var u,c,d=ft.models.multiBarHorizontal(),f=ft.models.axis(),p=ft.models.axis(),h=ft.models.legend().height(30),g=ft.models.legend().height(30),e=ft.models.tooltip(),v={top:30,right:20,bottom:50,left:60},m=null,x=null,y=ft.utils.defaultColor(),b=!0,k={},w=!0,M=!0,A=!0,C=!1,S=ft.utils.state(),W=null,n=null,E=d3.dispatch("stateChange","changeState","renderEnd"),F=function(){return b?180:0},_=250;S.stacked=!1,d.stacked(C),f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),p.orient("bottom").tickFormat(d3.format(",.1f")),e.duration(0).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).headerFormatter(function(t,e){return f.tickFormat()(t,e)}),g.updateState(!1);var D=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:C}}},O=function(t){return function(n){void 0!==n.stacked&&(C=n.stacked),void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},i=ft.utils.renderWatch(E,_);function N(t){return i.reset(),i.models(d),M&&i.models(f),A&&i.models(p),t.each(function(i){var t=d3.select(this);ft.utils.initSVG(t);var e,n=ft.utils.availableWidth(m,t,v),r=ft.utils.availableHeight(x,t,v);if(N.update=function(){t.transition().duration(_).call(N)},N.container=this,C=d.stacked(),S.setter(O(i),N.update).getter(D(i)).update(),S.disabled=i.map(function(t){return!!t.disabled}),!W)for(e in W={},S)S[e]instanceof Array?W[e]=S[e].slice(0):W[e]=S[e];if(!(i&&i.length&&i.filter(function(t){return t.values.length}).length))return ft.utils.noData(N,t),N;t.selectAll(".nv-noData").remove(),u=d.xScale(),c=d.yScale().clamp(!0);var a=t.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([i]),o=a.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),s=a.select("g");if(o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-legendWrap"),o.append("g").attr("class","nv-controlsWrap"),w&&(h.width(n-F()),s.select(".nv-legendWrap").datum(i).call(h),v.top!=h.height()&&(v.top=h.height(),r=ft.utils.availableHeight(x,t,v)),s.select(".nv-legendWrap").attr("transform","translate("+F()+","+-v.top+")")),b){var l=[{key:k.grouped||"Grouped",disabled:d.stacked()},{key:k.stacked||"Stacked",disabled:!d.stacked()}];g.width(F()).color(["#444","#444","#444"]),s.select(".nv-controlsWrap").datum(l).attr("transform","translate(0,"+-v.top+")").call(g)}a.attr("transform","translate("+v.left+","+v.top+")"),d.disabled(i.map(function(t){return t.disabled})).width(n).height(r).color(i.map(function(t,e){return t.color||y(t,e)}).filter(function(t,e){return!i[e].disabled})),s.select(".nv-barsWrap").datum(i.filter(function(t){return!t.disabled})).transition().call(d),M&&(f.scale(u)._ticks(ft.utils.calcTicksY(r/24,i)).tickSize(-n,0),s.select(".nv-x.nv-axis").call(f),s.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));A&&(p.scale(c)._ticks(ft.utils.calcTicksX(n/100,i)).tickSize(-r,0),s.select(".nv-y.nv-axis").attr("transform","translate(0,"+r+")"),s.select(".nv-y.nv-axis").call(p)),s.select(".nv-zeroLine line").attr("x1",c(0)).attr("x2",c(0)).attr("y1",0).attr("y2",-r),h.dispatch.on("stateChange",function(t){for(var e in t)S[e]=t[e];E.stateChange(S),N.update()}),g.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(l=l.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case k.grouped:d.stacked(!1);break;case"Stacked":case k.stacked:d.stacked(!0)}S.stacked=d.stacked(),E.stateChange(S),C=d.stacked(),N.update()}}),E.on("changeState",function(n){void 0!==n.disabled&&(i.forEach(function(t,e){t.disabled=n.disabled[e]}),S.disabled=n.disabled),void 0!==n.stacked&&(d.stacked(n.stacked),S.stacked=n.stacked,C=n.stacked),N.update()})}),i.renderEnd("multibar horizontal chart immediate"),N}return d.dispatch.on("elementMouseover.tooltip",function(t){t.value=N.x()(t.data),t.series={key:t.data.key,value:N.y()(t.data),color:t.color},e.data(t).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(t){e()}),N.dispatch=E,N.multibar=d,N.legend=h,N.controls=g,N.xAxis=f,N.yAxis=p,N.state=S,N.tooltip=e,N.options=ft.utils.optionsFunc.bind(N),N._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return x},set:function(t){x=t}},showLegend:{get:function(){return w},set:function(t){w=t}},showControls:{get:function(){return b},set:function(t){b=t}},controlLabels:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return M},set:function(t){M=t}},showYAxis:{get:function(){return A},set:function(t){A=t}},defaultState:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return v},set:function(t){v.top=void 0!==t.top?t.top:v.top,v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},duration:{get:function(){return _},set:function(t){_=t,i.reset(_),d.duration(_),f.duration(_),p.duration(_)}},color:{get:function(){return y},set:function(t){y=ft.utils.getColor(t),h.color(y)}},barColor:{get:function(){return d.barColor},set:function(t){d.barColor(t),h.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),ft.utils.inheritOptions(N,d),ft.utils.initOptions(N),N},ft.models.multiChart=function(){"use strict";var P,T,L={top:30,right:20,bottom:50,left:60},V=ft.utils.defaultColor(),z=null,I=null,H=!0,e=null,G=function(t){return t.x},Y=function(t){return t.y},X="monotone",n=!0,j=ft.interactiveGuideline(),R=!1,Z=" (right axis)",Q=d3.scale.linear(),K=d3.scale.linear(),q=d3.scale.linear(),U=ft.models.line().yScale(K),J=ft.models.line().yScale(q),$=ft.models.scatter().yScale(K),tt=ft.models.scatter().yScale(q),et=ft.models.multiBar().stacked(!1).yScale(K),nt=ft.models.multiBar().stacked(!1).yScale(q),it=ft.models.stackedArea().yScale(K),rt=ft.models.stackedArea().yScale(q),at=ft.models.axis().scale(Q).orient("bottom").tickPadding(5),ot=ft.models.axis().scale(K).orient("left"),st=ft.models.axis().scale(q).orient("right"),lt=ft.models.legend().height(30),ut=ft.models.tooltip(),t=d3.dispatch(),ct=[U,J,$,tt,et,nt,it,rt];function dt(t){return t.each(function(i){var t=d3.select(this);ft.utils.initSVG(t),dt.update=function(){t.transition().call(dt)},dt.container=this;var e=ft.utils.availableWidth(z,t,L),n=ft.utils.availableHeight(I,t,L),r=i.filter(function(t){return"line"==t.type&&1==t.yAxis}),a=i.filter(function(t){return"line"==t.type&&2==t.yAxis}),o=i.filter(function(t){return"scatter"==t.type&&1==t.yAxis}),s=i.filter(function(t){return"scatter"==t.type&&2==t.yAxis}),l=i.filter(function(t){return"bar"==t.type&&1==t.yAxis}),u=i.filter(function(t){return"bar"==t.type&&2==t.yAxis}),c=i.filter(function(t){return"area"==t.type&&1==t.yAxis}),d=i.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(i&&i.length&&i.filter(function(t){return t.values.length}).length))return ft.utils.noData(dt,t),dt;t.selectAll(".nv-noData").remove();var f=i.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:G(t),y:Y(t)}})}),p=i.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:G(t),y:Y(t)}})});Q.domain(d3.extent(d3.merge(f.concat(p)),function(t){return G(t)})).range([0,e]);var h=t.selectAll("g.wrap.multiChart").data([i]),g=h.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");g.append("g").attr("class","nv-x nv-axis"),g.append("g").attr("class","nv-y1 nv-axis"),g.append("g").attr("class","nv-y2 nv-axis"),g.append("g").attr("class","stack1Wrap"),g.append("g").attr("class","stack2Wrap"),g.append("g").attr("class","bars1Wrap"),g.append("g").attr("class","bars2Wrap"),g.append("g").attr("class","scatters1Wrap"),g.append("g").attr("class","scatters2Wrap"),g.append("g").attr("class","lines1Wrap"),g.append("g").attr("class","lines2Wrap"),g.append("g").attr("class","legendWrap"),g.append("g").attr("class","nv-interactive");var v=h.select("g"),m=i.map(function(t,e){return i[e].color||V(t,e)});if(H){var x=lt.align()?e/2:e,y=lt.align()?x:0;lt.width(x),lt.color(m),v.select(".legendWrap").datum(i.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":Z),t})).call(lt),L.top!=lt.height()&&(L.top=lt.height(),n=ft.utils.availableHeight(I,t,L)),v.select(".legendWrap").attr("transform","translate("+y+","+-L.top+")")}U.width(e).height(n).interpolate(X).color(m.filter(function(t,e){return!i[e].disabled&&1==i[e].yAxis&&"line"==i[e].type})),J.width(e).height(n).interpolate(X).color(m.filter(function(t,e){return!i[e].disabled&&2==i[e].yAxis&&"line"==i[e].type})),$.width(e).height(n).color(m.filter(function(t,e){return!i[e].disabled&&1==i[e].yAxis&&"scatter"==i[e].type})),tt.width(e).height(n).color(m.filter(function(t,e){return!i[e].disabled&&2==i[e].yAxis&&"scatter"==i[e].type})),et.width(e).height(n).color(m.filter(function(t,e){return!i[e].disabled&&1==i[e].yAxis&&"bar"==i[e].type})),nt.width(e).height(n).color(m.filter(function(t,e){return!i[e].disabled&&2==i[e].yAxis&&"bar"==i[e].type})),it.width(e).height(n).color(m.filter(function(t,e){return!i[e].disabled&&1==i[e].yAxis&&"area"==i[e].type})),rt.width(e).height(n).color(m.filter(function(t,e){return!i[e].disabled&&2==i[e].yAxis&&"area"==i[e].type})),v.attr("transform","translate("+L.left+","+L.top+")");var b=v.select(".lines1Wrap").datum(r.filter(function(t){return!t.disabled})),k=v.select(".scatters1Wrap").datum(o.filter(function(t){return!t.disabled})),w=v.select(".bars1Wrap").datum(l.filter(function(t){return!t.disabled})),M=v.select(".stack1Wrap").datum(c.filter(function(t){return!t.disabled})),A=v.select(".lines2Wrap").datum(a.filter(function(t){return!t.disabled})),C=v.select(".scatters2Wrap").datum(s.filter(function(t){return!t.disabled})),S=v.select(".bars2Wrap").datum(u.filter(function(t){return!t.disabled})),W=v.select(".stack2Wrap").datum(d.filter(function(t){return!t.disabled})),E=c.length?c.map(function(t){return t.values}).reduce(function(t,n){return t.map(function(t,e){return{x:t.x,y:t.y+n[e].y}})}).concat([{x:0,y:0}]):[],F=d.length?d.map(function(t){return t.values}).reduce(function(t,n){return t.map(function(t,e){return{x:t.x,y:t.y+n[e].y}})}).concat([{x:0,y:0}]):[];function _(t){var n=2===i[t.seriesIndex].yAxis?st:ot;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},ut.duration(0).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function D(t){var n=2===i[t.seriesIndex].yAxis?st:ot;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},ut.duration(100).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function O(t){var n=2===i[t.seriesIndex].yAxis?st:ot;t.point.x=it.x()(t.point),t.point.y=it.y()(t.point),ut.duration(0).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function N(t){var n=2===i[t.data.series].yAxis?st:ot;t.value=et.x()(t.data),t.series={value:et.y()(t.data),color:t.color,key:t.data.key},ut.duration(0).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function B(){for(var t=0,e=ct.length;t<e;t++){var n=ct[t];try{n.clearHighlights()}catch(t){}}}K.domain(P||d3.extent(d3.merge(f).concat(E),function(t){return t.y})).range([0,n]),q.domain(T||d3.extent(d3.merge(p).concat(F),function(t){return t.y})).range([0,n]),U.yDomain(K.domain()),$.yDomain(K.domain()),et.yDomain(K.domain()),it.yDomain(K.domain()),J.yDomain(q.domain()),tt.yDomain(q.domain()),nt.yDomain(q.domain()),rt.yDomain(q.domain()),c.length&&d3.transition(M).call(it),d.length&&d3.transition(W).call(rt),l.length&&d3.transition(w).call(et),u.length&&d3.transition(S).call(nt),r.length&&d3.transition(b).call(U),a.length&&d3.transition(A).call(J),o.length&&d3.transition(k).call($),s.length&&d3.transition(C).call(tt),at._ticks(ft.utils.calcTicksX(e/100,i)).tickSize(-n,0),v.select(".nv-x.nv-axis").attr("transform","translate(0,"+n+")"),d3.transition(v.select(".nv-x.nv-axis")).call(at),ot._ticks(ft.utils.calcTicksY(n/36,i)).tickSize(-e,0),d3.transition(v.select(".nv-y1.nv-axis")).call(ot),st._ticks(ft.utils.calcTicksY(n/36,i)).tickSize(-e,0),d3.transition(v.select(".nv-y2.nv-axis")).call(st),v.select(".nv-y1.nv-axis").classed("nv-disabled",!f.length).attr("transform","translate("+Q.range()[0]+",0)"),v.select(".nv-y2.nv-axis").classed("nv-disabled",!p.length).attr("transform","translate("+Q.range()[1]+",0)"),lt.dispatch.on("stateChange",function(t){dt.update()}),R&&(j.width(e).height(n).margin({left:L.left,top:L.top}).svgContainer(t).xScale(Q),h.select(".nv-interactive").call(j)),R?(j.dispatch.on("elementMousemove",function(o){B();var s,l,u,c=[];i.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){var n=Q.domain(),i=t.values.filter(function(t,e){return dt.x()(t,e)>=n[0]&&dt.x()(t,e)<=n[1]}),r=i[l=ft.interactiveBisect(i,o.pointXValue,dt.x())],a=dt.y()(r,l);null!==a&&function(t,e,n){for(var i=0,r=ct.length;i<r;i++){var a=ct[i];try{a.highlightPoint(t,e,n)}catch(t){}}}(e,l,!0),void 0!==r&&(void 0===s&&(s=r),void 0===u&&(u=Q(dt.x()(r,l))),c.push({key:t.key,value:a,color:V(t,t.seriesIndex),data:r,yAxis:2==t.yAxis?st:ot}))}),j.tooltip.chartContainer(dt.container.parentNode).valueFormatter(function(t,e){var n=c[e].yAxis;return null===t?"N/A":n.tickFormat()(t)}).data({value:dt.x()(s,l),index:l,series:c})(),j.renderGuideLine(u)}),j.dispatch.on("elementMouseout",function(t){B()})):(U.dispatch.on("elementMouseover.tooltip",_),J.dispatch.on("elementMouseover.tooltip",_),U.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),J.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),$.dispatch.on("elementMouseover.tooltip",D),tt.dispatch.on("elementMouseover.tooltip",D),$.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),tt.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),it.dispatch.on("elementMouseover.tooltip",O),rt.dispatch.on("elementMouseover.tooltip",O),it.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),rt.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),et.dispatch.on("elementMouseover.tooltip",N),nt.dispatch.on("elementMouseover.tooltip",N),et.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),nt.dispatch.on("elementMouseout.tooltip",function(t){ut.hidden(!0)}),et.dispatch.on("elementMousemove.tooltip",function(t){ut()}),nt.dispatch.on("elementMousemove.tooltip",function(t){ut()}))}),dt}return dt.dispatch=t,dt.legend=lt,dt.lines1=U,dt.lines2=J,dt.scatters1=$,dt.scatters2=tt,dt.bars1=et,dt.bars2=nt,dt.stack1=it,dt.stack2=rt,dt.xAxis=at,dt.yAxis1=ot,dt.yAxis2=st,dt.tooltip=ut,dt.interactiveLayer=j,dt.options=ft.utils.optionsFunc.bind(dt),dt._options=Object.create({},{width:{get:function(){return z},set:function(t){z=t}},height:{get:function(){return I},set:function(t){I=t}},showLegend:{get:function(){return H},set:function(t){H=t}},yDomain1:{get:function(){return P},set:function(t){P=t}},yDomain2:{get:function(){return T},set:function(t){T=t}},noData:{get:function(){return e},set:function(t){e=t}},interpolate:{get:function(){return X},set:function(t){X=t}},legendRightAxisHint:{get:function(){return Z},set:function(t){Z=t}},margin:{get:function(){return L},set:function(t){L.top=void 0!==t.top?t.top:L.top,L.right=void 0!==t.right?t.right:L.right,L.bottom=void 0!==t.bottom?t.bottom:L.bottom,L.left=void 0!==t.left?t.left:L.left}},color:{get:function(){return V},set:function(t){V=ft.utils.getColor(t)}},x:{get:function(){return G},set:function(t){G=t,U.x(t),J.x(t),$.x(t),tt.x(t),et.x(t),nt.x(t),it.x(t),rt.x(t)}},y:{get:function(){return Y},set:function(t){Y=t,U.y(t),J.y(t),$.y(t),tt.y(t),it.y(t),rt.y(t),et.y(t),nt.y(t)}},useVoronoi:{get:function(){return n},set:function(t){n=t,U.useVoronoi(t),J.useVoronoi(t),it.useVoronoi(t),rt.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return R},set:function(t){(R=t)&&(U.interactive(!1),U.useVoronoi(!1),J.interactive(!1),J.useVoronoi(!1),it.interactive(!1),it.useVoronoi(!1),rt.interactive(!1),rt.useVoronoi(!1),$.interactive(!1),tt.interactive(!1))}}}),ft.utils.initOptions(dt),dt},ft.models.ohlcBar=function(){"use strict";var c,d,f,p,h={top:0,right:0,bottom:0,left:0},g=null,v=null,m=Math.floor(1e4*Math.random()),x=null,y=d3.scale.linear(),b=d3.scale.linear(),k=function(t){return t.x},w=function(t){return t.y},M=function(t){return t.open},A=function(t){return t.close},C=function(t){return t.high},S=function(t){return t.low},W=[],E=[],F=!1,_=!0,D=ft.utils.defaultColor(),e=!1,O=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function n(t){return t.each(function(i){x=d3.select(this);var r=ft.utils.availableWidth(g,x,h),t=ft.utils.availableHeight(v,x,h);ft.utils.initSVG(x);var n=r/i[0].values.length*.9;y.domain(c||d3.extent(i[0].values.map(k).concat(W))),F?y.range(f||[.5*r/i[0].values.length,r*(i[0].values.length-.5)/i[0].values.length]):y.range(f||[5+n/2,r-n/2-5]),b.domain(d||[d3.min(i[0].values.map(S).concat(E)),d3.max(i[0].values.map(C).concat(E))]).range(p||[t,0]),y.domain()[0]===y.domain()[1]&&(y.domain()[0]?y.domain([y.domain()[0]-.01*y.domain()[0],y.domain()[1]+.01*y.domain()[1]]):y.domain([-1,1])),b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]+.01*b.domain()[0],b.domain()[1]-.01*b.domain()[1]]):b.domain([-1,1]));var e=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([i[0].values]),a=e.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),o=a.append("defs"),s=a.append("g"),l=e.select("g");s.append("g").attr("class","nv-ticks"),e.attr("transform","translate("+h.left+","+h.top+")"),x.on("click",function(t,e){O.chartClick({data:t,index:e,pos:d3.event,id:m})}),o.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect"),e.select("#nv-chart-clip-path-"+m+" rect").attr("width",r).attr("height",t),l.attr("clip-path",_?"url(#nv-chart-clip-path-"+m+")":"");var u=e.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});u.exit().remove(),u.enter().append("path").attr("class",function(t,e,n){return(M(t,e)>A(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(b(M(t,e))-b(C(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(b(S(t,e))-b(M(t,e)))+"l0,"+(b(A(t,e))-b(S(t,e)))+"l"+n/2+",0l"+-n/2+",0z"}).attr("transform",function(t,e){return"translate("+y(k(t,e))+","+b(C(t,e))+")"}).attr("fill",function(t,e){return D[0]}).attr("stroke",function(t,e){return D[0]}).attr("x",0).attr("y",function(t,e){return b(Math.max(0,w(t,e)))}).attr("height",function(t,e){return Math.abs(b(w(t,e))-b(0))}),u.attr("class",function(t,e,n){return(M(t,e)>A(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(u).attr("transform",function(t,e){return"translate("+y(k(t,e))+","+b(C(t,e))+")"}).attr("d",function(t,e){var n=r/i[0].values.length*.9;return"m0,0l0,"+(b(M(t,e))-b(C(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(b(S(t,e))-b(M(t,e)))+"l0,"+(b(A(t,e))-b(S(t,e)))+"l"+n/2+",0l"+-n/2+",0z"})}),n}return n.highlightPoint=function(t,e){n.clearHighlights(),x.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},n.clearHighlights=function(){x.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},n.dispatch=O,n.options=ft.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return y},set:function(t){y=t}},yScale:{get:function(){return b},set:function(t){b=t}},xDomain:{get:function(){return c},set:function(t){c=t}},yDomain:{get:function(){return d},set:function(t){d=t}},xRange:{get:function(){return f},set:function(t){f=t}},yRange:{get:function(){return p},set:function(t){p=t}},forceX:{get:function(){return W},set:function(t){W=t}},forceY:{get:function(){return E},set:function(t){E=t}},padData:{get:function(){return F},set:function(t){F=t}},clipEdge:{get:function(){return _},set:function(t){_=t}},id:{get:function(){return m},set:function(t){m=t}},interactive:{get:function(){return e},set:function(t){e=t}},x:{get:function(){return k},set:function(t){k=t}},y:{get:function(){return w},set:function(t){w=t}},open:{get:function(){return M()},set:function(t){M=t}},close:{get:function(){return A()},set:function(t){A=t}},high:{get:function(){return C},set:function(t){C=t}},low:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return h},set:function(t){h.top=null!=t.top?t.top:h.top,h.right=null!=t.right?t.right:h.right,h.bottom=null!=t.bottom?t.bottom:h.bottom,h.left=null!=t.left?t.left:h.left}},color:{get:function(){return D},set:function(t){D=ft.utils.getColor(t)}}}),ft.utils.initOptions(n),n},ft.models.parallelCoordinates=function(){"use strict";var S,W,E,F={top:30,right:0,bottom:10,left:0},_=null,D=null,O=d3.scale.ordinal(),N={},B=[],P=[],T=[],L=!0,V=ft.utils.defaultColor(),z=[],I=[],H=[],G=[],Y=1,X=d3.svg.line(),j=d3.svg.axis(),R=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),e=ft.utils.renderWatch(R);function n(t){return e.reset(),t.each(function(t){var e=d3.select(this),n=ft.utils.availableWidth(_,e,F),o=ft.utils.availableHeight(D,e,F);if(ft.utils.initSVG(e),void 0===t[0].values){var i=[];t.forEach(function(e){var n={};Object.keys(e).forEach(function(t){"name"!==t&&(n[t]=e[t])}),i.push({key:e.name,values:n})}),t=i}var s=t.map(function(t){return t.values});0===I.length&&(I=t),T=B.sort(function(t,e){return t.currentPosition-e.currentPosition}).map(function(t){return t.key}),P=B.filter(function(t){return!t.disabled}),O.rangePoints([0,n],1).domain(P.map(function(t){return t.key}));var l={},u=!1;T.forEach(function(e){var t=d3.extent(s,function(t){return+t[e]}),n=t[0],i=t[1],r=!1;(isNaN(n)||isNaN(i))&&(r=!0,i=n=0),n===i&&(--n,i+=1);var a=z.filter(function(t){return t.dimension==e});0!==a.length&&(r?(n=N[e].domain()[0],i=N[e].domain()[1]):!a[0].hasOnlyNaN&&L?(n=n>a[0].extent[0]?a[0].extent[0]:n,i=i<a[0].extent[1]?a[0].extent[1]:i):a[0].hasNaN&&(i=i<a[0].extent[1]?a[0].extent[1]:i,l[e]=N[e].domain()[1],u=!0)),N[e]=d3.scale.linear().domain([n,i]).range([.9*(o-12),0]),G=[],N[e].brush=d3.svg.brush().y(N[e]).on("brushstart",w).on("brush",M).on("brushend",A)});var r=e.selectAll("g.nv-wrap.nv-parallelCoordinates").data([t]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),c=r.select("g");a.append("g").attr("class","nv-parallelCoordinates background"),a.append("g").attr("class","nv-parallelCoordinates foreground"),a.append("g").attr("class","nv-parallelCoordinates missingValuesline"),r.attr("transform","translate("+F.left+","+F.top+")"),X.interpolate("cardinal").tension(Y),j.orient("left");var d,f,p=d3.behavior.drag().on("dragstart",function(t){H[t.key]=this.parentNode.__origin__=O(t.key),W.attr("visibility","hidden")}).on("drag",function(t){H[t.key]=Math.min(n,Math.max(0,this.parentNode.__origin__+=d3.event.x)),S.attr("d",b),P.sort(function(t,e){return C(t.key)-C(e.key)}),P.forEach(function(t,e){return t.currentPosition=e}),O.domain(P.map(function(t){return t.key})),E.attr("transform",function(t){return"translate("+C(t.key)+")"})}).on("dragend",function(t,e){delete this.parentNode.__origin__,delete H[t.key],d3.select(this.parentNode).attr("transform","translate("+O(t.key)+")"),S.attr("d",b),W.attr("d",b).attr("visibility",null),R.dimensionsOrder(P)}),h=O.range()[1]-O.range()[0];if(!isNaN(h)){var g=[0+h/2,o-12,n-h/2,o-12];(d=r.select(".missingValuesline").selectAll("line").data([g])).enter().append("line"),d.exit().remove(),d.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(f=r.select(".missingValuesline").selectAll("text").data(["undefined values"])).append("text").data(["undefined values"]),f.enter().append("text"),f.exit().remove(),f.attr("y",o).attr("x",n-92-h/2).text(function(t){return t})}(W=r.select(".background").selectAll("path").data(t)).enter().append("path"),W.exit().remove(),W.attr("d",b),(S=r.select(".foreground").selectAll("path").data(t)).enter().append("path"),S.exit().remove(),S.attr("d",b).style("stroke-width",function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth}).attr("stroke",function(t,e){return t.color||V(t,e)}),S.on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),R.elementMouseover({label:t.name,color:t.color||V(t,e)})}),S.on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),R.elementMouseout({label:t.name,index:e})}),S.on("mousemove",function(t,e){R.elementMousemove()}),S.on("click",function(t){R.elementClick({id:t.id})});var v=(E=c.selectAll(".dimension").data(P)).enter().append("g").attr("class","nv-parallelCoordinates dimension");E.attr("transform",function(t){return"translate("+O(t.key)+",0)"}),v.append("g").attr("class","nv-axis"),v.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(t,e){R.elementMouseover({label:t.tooltip||t.key})}).on("mouseout",function(t,e){R.elementMouseout({label:t.tooltip})}).on("mousemove",function(t,e){R.elementMousemove()}).call(p),v.append("g").attr("class","nv-brushBackground"),E.exit().remove(),E.select(".nv-label").text(function(t){return t.key}),E.select(".nv-axis").each(function(t,e){d3.select(this).call(j.scale(N[t.key]).tickFormat(d3.format(t.format)))}),k(L);var m=T.filter(function(t){return!N[t].brush.empty()}),x=m.map(function(t){return N[t].brush.extent()}),y=I.slice(0);function b(a){return X(P.map(function(t){if(isNaN(a.values[t.key])||isNaN(parseFloat(a.values[t.key]))||u){var e=N[t.key].domain(),n=N[t.key].range(),i=e[0]-(e[1]-e[0])/9;if(G.indexOf(t.key)<0){var r=d3.scale.linear().domain([i,e[1]]).range([o-12,n[1]]);N[t.key].brush.y(r),G.push(t.key)}if(isNaN(a.values[t.key])||isNaN(parseFloat(a.values[t.key])))return[O(t.key),N[t.key](i)]}return void 0!==d&&(0<G.length||u?(d.style("display","inline"),f.style("display","inline")):(d.style("display","none"),f.style("display","none"))),[O(t.key),N[t.key](a.values[t.key])]}))}function k(n){z.forEach(function(t){var e=N[t.dimension].brush.y().domain();t.hasOnlyNaN&&(t.extent[1]=(N[t.dimension].domain()[1]-e[0])*(t.extent[1]-t.extent[0])/(l[t.dimension]-t.extent[0])+e[0]),t.hasNaN&&(t.extent[0]=e[0]),n&&N[t.dimension].brush.extent(t.extent)}),E.select(".nv-brushBackground").each(function(t){d3.select(this).call(N[t.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}function w(){!1===L&&k(!0)}function M(){m=T.filter(function(t){return!N[t].brush.empty()}),x=m.map(function(t){return N[t].brush.extent()}),z=[],m.forEach(function(t,e){z[e]={dimension:t,extent:x[e],hasNaN:!1,hasOnlyNaN:!1}}),I=[],S.style("display",function(n){var t=m.every(function(t,e){return!(!isNaN(n.values[t])&&!isNaN(parseFloat(n.values[t]))||x[e][0]!=N[t].brush.y().domain()[0])||x[e][0]<=n.values[t]&&n.values[t]<=x[e][1]&&!isNaN(parseFloat(n.values[t]))});return t&&I.push(n),t?null:"none"}),R.brush({filters:z,active:I})}function A(){var t=0<m.length;z.forEach(function(t){t.extent[0]===N[t.dimension].brush.y().domain()[0]&&0<=G.indexOf(t.dimension)&&(t.hasNaN=!0),t.extent[1]<N[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)}),R.brushEnd(I,t)}function C(t){var e=H[t];return null==e?O(t):e}I=[],S.style("display",function(n){var t=m.every(function(t,e){return!(!isNaN(n.values[t])&&!isNaN(parseFloat(n.values[t]))||x[e][0]!=N[t].brush.y().domain()[0])||x[e][0]<=n.values[t]&&n.values[t]<=x[e][1]&&!isNaN(parseFloat(n.values[t]))});return t&&I.push(n),t?null:"none"}),(0<z.length||!ft.utils.arrayEquals(I,y))&&R.activeChanged(I)}),n}return n.dispatch=R,n.options=ft.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return _},set:function(t){_=t}},height:{get:function(){return D},set:function(t){D=t}},dimensionData:{get:function(){return B},set:function(t){B=t}},displayBrush:{get:function(){return L},set:function(t){L=t}},filters:{get:function(){return z},set:function(t){z=t}},active:{get:function(){return I},set:function(t){I=t}},lineTension:{get:function(){return Y},set:function(t){Y=t}},dimensions:{get:function(){return B.map(function(t){return t.key})},set:function(t){ft.deprecated("dimensions","use dimensionData instead"),0===B.length?t.forEach(function(t){B.push({key:t})}):t.forEach(function(t,e){B[e].key=t})}},dimensionNames:{get:function(){return B.map(function(t){return t.key})},set:function(t){ft.deprecated("dimensionNames","use dimensionData instead"),T=[],0===B.length?t.forEach(function(t){B.push({key:t})}):t.forEach(function(t,e){B[e].key=t})}},dimensionFormats:{get:function(){return B.map(function(t){return t.format})},set:function(t){ft.deprecated("dimensionFormats","use dimensionData instead"),0===B.length?t.forEach(function(t){B.push({format:t})}):t.forEach(function(t,e){B[e].format=t})}},margin:{get:function(){return F},set:function(t){F.top=void 0!==t.top?t.top:F.top,F.right=void 0!==t.right?t.right:F.right,F.bottom=void 0!==t.bottom?t.bottom:F.bottom,F.left=void 0!==t.left?t.left:F.left}},color:{get:function(){return V},set:function(t){V=ft.utils.getColor(t)}}}),ft.utils.initOptions(n),n},ft.models.parallelCoordinatesChart=function(){"use strict";var c=ft.models.parallelCoordinates(),d=ft.models.legend(),e=ft.models.tooltip(),f=(ft.models.tooltip(),{top:0,right:0,bottom:0,left:0}),p=null,h=null,g=!0,n=ft.utils.defaultColor(),v=ft.utils.state(),m=[],x=[],y=!0,b=null,i=null,k=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),r=ft.utils.renderWatch(k),w=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},M=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function A(t){return r.reset(),r.models(c),t.each(function(t){var e=d3.select(this);ft.utils.initSVG(e);var n=ft.utils.availableWidth(p,e,f),i=ft.utils.availableHeight(h,e,f);A.update=function(){e.call(A)},A.container=this,v.setter(M(m),A.update).getter(w(m)).update(),v.disabled=m.map(function(t){return!!t.disabled}),(m=m.map(function(t){return t.disabled=!!t.disabled,t})).forEach(function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition});var r,a=x.map(function(t){return t.key}),o=m.map(function(t){return t.key});if(m.forEach(function(t,e){var n=a.indexOf(t.key);if(n<0)x.splice(e,0,t);else{var i=x[n].currentPosition-x[n].originalPosition;x[n].originalPosition=t.originalPosition,x[n].currentPosition=t.originalPosition+i}}),x=x.filter(function(t){return 0<=o.indexOf(t.key)}),!b)for(r in b={},v)v[r]instanceof Array?b[r]=v[r].slice(0):b[r]=v[r];if(!t||!t.length)return ft.utils.noData(A,e),A;e.selectAll(".nv-noData").remove();var s=e.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([t]),l=s.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),u=s.select("g");l.append("g").attr("class","nv-parallelCoordinatesWrap"),l.append("g").attr("class","nv-legendWrap"),u.select("rect").attr("width",n).attr("height",0<i?i:0),g&&(d.width(n).color(function(t){return"rgb(188,190,192)"}),u.select(".nv-legendWrap").datum(x.sort(function(t,e){return t.originalPosition-e.originalPosition})).call(d),f.top!=d.height()&&(f.top=d.height(),i=ft.utils.availableHeight(h,e,f)),s.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-f.top+")")),s.attr("transform","translate("+f.left+","+f.top+")"),c.width(n).height(i).dimensionData(x).displayBrush(y),u.select(".nv-parallelCoordinatesWrap ").datum(t).transition().call(c),c.dispatch.on("brushEnd",function(t,e){e?(y=!0,k.brushEnd(t)):y=!1}),d.dispatch.on("stateChange",function(t){for(var e in t)v[e]=t[e];k.stateChange(v),A.update()}),c.dispatch.on("dimensionsOrder",function(t){x.sort(function(t,e){return t.currentPosition-e.currentPosition});var n=!1;x.forEach(function(t,e){t.currentPosition=e,t.currentPosition!==t.originalPosition&&(n=!0)}),k.dimensionsOrder(x,n)}),k.on("changeState",function(n){void 0!==n.disabled&&(x.forEach(function(t,e){t.disabled=n.disabled[e]}),v.disabled=n.disabled),A.update()})}),r.renderEnd("parraleleCoordinateChart immediate"),A}return c.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,color:t.color},e.data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(){e()}),A.dispatch=k,A.parallelCoordinates=c,A.legend=d,A.tooltip=e,A.options=ft.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return g},set:function(t){g=t}},defaultState:{get:function(){return b},set:function(t){b=t}},dimensionData:{get:function(){return m},set:function(t){m=t}},displayBrush:{get:function(){return y},set:function(t){y=t}},noData:{get:function(){return i},set:function(t){i=t}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},color:{get:function(){return n},set:function(t){n=ft.utils.getColor(t),d.color(n),c.color(n)}}}),ft.utils.inheritOptions(A,c),ft.utils.initOptions(A),A},ft.models.pie=function(){"use strict";var M={top:0,right:0,bottom:0,left:0},A=500,C=500,S=function(t){return t.x},W=function(t){return t.y},E=Math.floor(1e4*Math.random()),F=null,_=ft.utils.defaultColor(),D=d3.format(",.2f"),O=!0,N=!1,B="key",P=.02,T=!1,L=!1,V=!0,z=0,I=!1,H=!1,G=!1,Y=!1,X=0,j=.5,R=[],Z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),Q=[],K=[],q=ft.utils.renderWatch(Z);function e(t){return q.reset(),t.each(function(t){var e=A-M.left-M.right,n=C-M.top-M.bottom,o=Math.min(e,n)/2,s=[],i=[];if(F=d3.select(this),0===R.length)for(var r=o-o/5,a=j*o,l=0;l<t[0].length;l++)s.push(r),i.push(a);else s=R.map(function(t){return(t.outer-t.outer/5)*o}),i=R.map(function(t){return(t.inner-t.inner/5)*o}),j=d3.min(R.map(function(t){return t.inner-t.inner/5}));ft.utils.initSVG(F);var u=F.selectAll(".nv-wrap.nv-pie").data(t),c=u.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+E).append("g"),d=u.select("g"),f=c.append("g").attr("class","nv-pie");c.append("g").attr("class","nv-pieLabels"),u.attr("transform","translate("+M.left+","+M.top+")"),d.select(".nv-pie").attr("transform","translate("+e/2+","+n/2+")"),d.select(".nv-pieLabels").attr("transform","translate("+e/2+","+n/2+")"),F.on("click",function(t,e){Z.chartClick({data:t,index:e,pos:d3.event,id:E})}),Q=[],K=[];for(l=0;l<t[0].length;l++){var p=d3.svg.arc().outerRadius(s[l]),h=d3.svg.arc().outerRadius(s[l]+5);!1!==H&&(p.startAngle(H),h.startAngle(H)),!1!==Y&&(p.endAngle(Y),h.endAngle(Y)),T&&(p.innerRadius(i[l]),h.innerRadius(i[l])),p.cornerRadius&&X&&(p.cornerRadius(X),h.cornerRadius(X)),Q.push(p),K.push(h)}var g=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:W(t)});g.padAngle&&G&&g.padAngle(G),T&&L&&(f.append("text").attr("class","nv-pie-title"),u.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return L}).style("font-size",Math.min(e,n)*j*2/(L.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+z+")"}));var v=u.select(".nv-pie").selectAll(".nv-slice").data(g),m=u.select(".nv-pieLabels").selectAll(".nv-label").data(g);v.exit().remove(),m.exit().remove();var x=v.enter().append("g");x.attr("class","nv-slice"),x.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),V&&d3.select(this).select("path").transition().duration(70).attr("d",K[e]),Z.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill")})}),x.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),V&&d3.select(this).select("path").transition().duration(50).attr("d",Q[e]),Z.elementMouseout({data:t.data,index:e})}),x.on("mousemove",function(t,e){Z.elementMousemove({data:t.data,index:e})}),x.on("click",function(t,e){Z.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this})}),x.on("dblclick",function(t,e){Z.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),v.attr("fill",function(t,e){return _(t.data,e)}),v.attr("stroke",function(t,e){return _(t.data,e)});x.append("path").each(function(t){this._current=t});if(v.select("path").transition().attr("d",function(t,e){return Q[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,T||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return Q[e](n(t))}}),O){var y=[];for(l=0;l<t[0].length;l++)y.push(Q[l]),N?T&&(y[l]=d3.svg.arc().outerRadius(Q[l].outerRadius()),!1!==H&&y[l].startAngle(H),!1!==Y&&y[l].endAngle(Y)):T||y[l].innerRadius(0);m.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(I){t.outerRadius=s[e]+10,t.innerRadius=s[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+y[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=10+o,t.innerRadius=15+o,"translate("+y[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",I?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var b={},k=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)},w=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};m.watchTransition(q,"pie labels").attr("transform",function(t,e){if(I){t.outerRadius=s[e]+10,t.innerRadius=s[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+y[e].centroid(t)+") rotate("+n+")"}t.outerRadius=10+o,t.innerRadius=15+o;var i=y[e].centroid(t),r=w(t);if(t.value&&P<=r){var a=k(i);b[a]&&(i[1]-=14),b[k(i)]=!0}return"translate("+i+")"}),m.select(".nv-label text").style("text-anchor",function(t,e){return I?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=w(t),i="";if(!t.value||n<P)return"";if("function"==typeof B)i=B(t,e,{key:S(t.data),value:W(t.data),percent:D(n)});else switch(B){case"key":i=S(t.data);break;case"value":i=D(W(t.data));break;case"percent":i=d3.format("%")(n)}return i})}}),q.renderEnd("pie immediate"),e}return e.dispatch=Z,e.options=ft.utils.optionsFunc.bind(e),e._options=Object.create({},{arcsRadius:{get:function(){return R},set:function(t){R=t}},width:{get:function(){return A},set:function(t){A=t}},height:{get:function(){return C},set:function(t){C=t}},showLabels:{get:function(){return O},set:function(t){O=t}},title:{get:function(){return L},set:function(t){L=t}},titleOffset:{get:function(){return z},set:function(t){z=t}},labelThreshold:{get:function(){return P},set:function(t){P=t}},valueFormat:{get:function(){return D},set:function(t){D=t}},x:{get:function(){return S},set:function(t){S=t}},id:{get:function(){return E},set:function(t){E=t}},endAngle:{get:function(){return Y},set:function(t){Y=t}},startAngle:{get:function(){return H},set:function(t){H=t}},padAngle:{get:function(){return G},set:function(t){G=t}},cornerRadius:{get:function(){return X},set:function(t){X=t}},donutRatio:{get:function(){return j},set:function(t){j=t}},labelsOutside:{get:function(){return N},set:function(t){N=t}},labelSunbeamLayout:{get:function(){return I},set:function(t){I=t}},donut:{get:function(){return T},set:function(t){T=t}},growOnHover:{get:function(){return V},set:function(t){V=t}},pieLabelsOutside:{get:function(){return N},set:function(t){N=t,ft.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return N},set:function(t){N=t,ft.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return D},set:function(t){D=t,ft.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return M},set:function(t){M.top=void 0!==t.top?t.top:M.top,M.right=void 0!==t.right?t.right:M.right,M.bottom=void 0!==t.bottom?t.bottom:M.bottom,M.left=void 0!==t.left?t.left:M.left}},y:{get:function(){return W},set:function(t){W=d3.functor(t)}},color:{get:function(){return _},set:function(t){_=ft.utils.getColor(t)}},labelType:{get:function(){return B},set:function(t){B=t||"key"}}}),ft.utils.initOptions(e),e},ft.models.pieChart=function(){"use strict";var c=ft.models.pie(),d=ft.models.legend(),e=ft.models.tooltip(),f={top:30,right:20,bottom:20,left:20},p=null,h=null,g=!0,v="top",n=ft.utils.defaultColor(),m=ft.utils.state(),x=null,i=null,r=250,y=d3.dispatch("stateChange","changeState","renderEnd");e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return c.valueFormat()(t,e)});var a=ft.utils.renderWatch(y),b=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},k=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function w(t){return a.reset(),a.models(c),t.each(function(t){var e=d3.select(this);ft.utils.initSVG(e);var n,i=ft.utils.availableWidth(p,e,f),r=ft.utils.availableHeight(h,e,f);if(w.update=function(){e.transition().call(w)},w.container=this,m.setter(k(t),w.update).getter(b(t)).update(),m.disabled=t.map(function(t){return!!t.disabled}),!x)for(n in x={},m)m[n]instanceof Array?x[n]=m[n].slice(0):x[n]=m[n];if(!t||!t.length)return ft.utils.noData(w,e),w;e.selectAll(".nv-noData").remove();var a=e.selectAll("g.nv-wrap.nv-pieChart").data([t]),o=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),s=a.select("g");if(o.append("g").attr("class","nv-pieWrap"),o.append("g").attr("class","nv-legendWrap"),g)if("top"===v)d.width(i).key(c.x()),a.select(".nv-legendWrap").datum(t).call(d),f.top!=d.height()&&(f.top=d.height(),r=ft.utils.availableHeight(h,e,f)),a.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")");else if("right"===v){var l=ft.models.legend().width();i/2<l&&(l=i/2),d.height(r).key(c.x()),d.width(l),i-=d.width(),a.select(".nv-legendWrap").datum(t).call(d).attr("transform","translate("+i+",0)")}a.attr("transform","translate("+f.left+","+f.top+")"),c.width(i).height(r);var u=s.select(".nv-pieWrap").datum([t]);d3.transition(u).call(c),d.dispatch.on("stateChange",function(t){for(var e in t)m[e]=t[e];y.stateChange(m),w.update()}),y.on("changeState",function(n){void 0!==n.disabled&&(t.forEach(function(t,e){t.disabled=n.disabled[e]}),m.disabled=n.disabled),w.update()})}),a.renderEnd("pieChart immediate"),w}return c.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:w.x()(t.data),value:w.y()(t.data),color:t.color},e.data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(t){e()}),w.legend=d,w.dispatch=y,w.pie=c,w.tooltip=e,w.options=ft.utils.optionsFunc.bind(w),w._options=Object.create({},{noData:{get:function(){return i},set:function(t){i=t}},showLegend:{get:function(){return g},set:function(t){g=t}},legendPosition:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return x},set:function(t){x=t}},color:{get:function(){return n},set:function(t){n=t,d.color(n),c.color(n)}},duration:{get:function(){return r},set:function(t){r=t,a.reset(r)}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}}}),ft.utils.inheritOptions(w,c),ft.utils.initOptions(w),w},ft.models.scatter=function(){"use strict";var p,h,g,v={top:0,right:0,bottom:0,left:0},m=null,x=null,y=ft.utils.defaultColor(),b=Math.floor(1e5*Math.random()),k=null,w=d3.scale.linear(),M=d3.scale.linear(),A=d3.scale.linear(),C=function(t){return t.x},S=function(t){return t.y},W=function(t){return t.size||1},E=function(t){return t.shape||"circle"},F=[],_=[],D=[],O=!0,N=function(t){return!t.notActive},B=!1,P=.1,T=!1,L=!0,V=!1,z=function(){return 25},I=null,H=null,G=null,Y=null,X=null,j=null,R=!1,Z=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),Q=!0,e=250,K=300,q=!1,U=ft.utils.renderWatch(Z,e),J=[16,256];function $(t){return U.reset(),t.each(function(s){k=d3.select(this);var t=ft.utils.availableWidth(m,k,v),e=ft.utils.availableHeight(x,k,v);ft.utils.initSVG(k),s.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var n=I&&H&&X?[]:d3.merge(s.map(function(t){return t.values.map(function(t,e){return{x:C(t,e),y:S(t,e),size:W(t,e)}})}));if(w.domain(I||d3.extent(n.map(function(t){return t.x}).concat(F))),B&&s[0]?w.range(G||[(t*P+t)/(2*s[0].values.length),t-t*(1+P)/(2*s[0].values.length)]):w.range(G||[0,t]),"o"===$.yScale().name){var i=d3.min(n.map(function(t){if(0!==t.y)return t.y}));M.clamp(!0).domain(H||d3.extent(n.map(function(t){return 0!==t.y?t.y:.1*i}).concat(_))).range(Y||[e,0])}else M.domain(H||d3.extent(n.map(function(t){return t.y}).concat(_))).range(Y||[e,0]);A.domain(X||d3.extent(n.map(function(t){return t.size}).concat(D))).range(j||J),R=w.domain()[0]===w.domain()[1]||M.domain()[0]===M.domain()[1],w.domain()[0]===w.domain()[1]&&(w.domain()[0]?w.domain([w.domain()[0]-.01*w.domain()[0],w.domain()[1]+.01*w.domain()[1]]):w.domain([-1,1])),M.domain()[0]===M.domain()[1]&&(M.domain()[0]?M.domain([M.domain()[0]-.01*M.domain()[0],M.domain()[1]+.01*M.domain()[1]]):M.domain([-1,1])),isNaN(w.domain()[0])&&w.domain([-1,1]),isNaN(M.domain()[0])&&M.domain([-1,1]),p=p||w,h=h||M,0;var o=k.selectAll("g.nv-wrap.nv-scatter").data([s]),r=o.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+b),a=r.append("defs"),l=r.append("g"),u=o.select("g");function c(){if(q=!1,!O)return!1;if(!0===Q){var n=d3.merge(s.map(function(t,r){return t.values.map(function(t,e){var n=C(t,e),i=S(t,e);return[w(n)+1e-4*Math.random(),M(i)+1e-4*Math.random(),r,e,t]}).filter(function(t,e){return N(t[4],e)})}));if(0==n.length)return!1;n.length<3&&(n.push([w.range()[0]-20,M.range()[0]-20,null,null]),n.push([w.range()[1]+20,M.range()[1]+20,null,null]),n.push([w.range()[0]-20,M.range()[0]+20,null,null]),n.push([w.range()[1]+20,M.range()[1]-20,null,null]));var i=d3.geom.polygon([[-10,-10],[-10,x+10],[m+10,x+10],[m+10,-10]]),t=d3.geom.voronoi(n).map(function(t,e){return{data:i.clip(t),series:n[e][2],point:n[e][3]}});o.select(".nv-point-paths").selectAll("path").remove();var e=o.select(".nv-point-paths").selectAll("path").data(t),r=e.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+b+"-"+e+")"});if(V&&r.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),L){o.select(".nv-point-clips").selectAll("*").remove();o.select(".nv-point-clips").selectAll("clipPath").data(n).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+b+"-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",z)}var a=function(t,e){if(q)return 0;var n=s[t.series];if(void 0!==n){var i=n.values[t.point];i.color=y(n,t.series),i.x=C(i),i.y=S(i);var r=k.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,o=window.pageXOffset||document.documentElement.scrollLeft;e({point:i,series:n,pos:{left:w(C(i,t.point))+r.left+o+v.left+10,top:M(S(i,t.point))+r.top+a+v.top+10},relativePos:[w(C(i,t.point))+v.left,M(S(i,t.point))+v.top],seriesIndex:t.series,pointIndex:t.point})}};e.on("click",function(t){a(t,Z.elementClick)}).on("dblclick",function(t){a(t,Z.elementDblClick)}).on("mouseover",function(t){a(t,Z.elementMouseover)}).on("mouseout",function(t,e){a(t,Z.elementMouseout)})}else o.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(q||!s[t.series])return 0;var n=s[t.series],i=n.values[e];Z.elementClick({point:i,series:n,pos:[w(C(i,e))+v.left,M(S(i,e))+v.top],relativePos:[w(C(i,e))+v.left,M(S(i,e))+v.top],seriesIndex:t.series,pointIndex:e})}).on("dblclick",function(t,e){if(q||!s[t.series])return 0;var n=s[t.series],i=n.values[e];Z.elementDblClick({point:i,series:n,pos:[w(C(i,e))+v.left,M(S(i,e))+v.top],relativePos:[w(C(i,e))+v.left,M(S(i,e))+v.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(q||!s[t.series])return 0;var n=s[t.series],i=n.values[e];Z.elementMouseover({point:i,series:n,pos:[w(C(i,e))+v.left,M(S(i,e))+v.top],relativePos:[w(C(i,e))+v.left,M(S(i,e))+v.top],seriesIndex:t.series,pointIndex:e,color:y(t,e)})}).on("mouseout",function(t,e){if(q||!s[t.series])return 0;var n=s[t.series],i=n.values[e];Z.elementMouseout({point:i,series:n,pos:[w(C(i,e))+v.left,M(S(i,e))+v.top],relativePos:[w(C(i,e))+v.left,M(S(i,e))+v.top],seriesIndex:t.series,pointIndex:e,color:y(t,e)})})}o.classed("nv-single-point",R),l.append("g").attr("class","nv-groups"),l.append("g").attr("class","nv-point-paths"),r.append("g").attr("class","nv-point-clips"),o.attr("transform","translate("+v.left+","+v.top+")"),a.append("clipPath").attr("id","nv-edge-clip-"+b).append("rect"),o.select("#nv-edge-clip-"+b+" rect").attr("width",t).attr("height",0<e?e:0),u.attr("clip-path",T?"url(#nv-edge-clip-"+b+")":""),q=!0;var d=o.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});d.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d.exit().remove(),d.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),d.watchTransition(U,"scatter: groups").style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var f=d.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return N(t[0],e)})});f.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+ft.utils.NaNtoZero(p(C(t[0],t[1])))+","+ft.utils.NaNtoZero(h(S(t[0],t[1])))+")"}).attr("d",ft.utils.symbol().type(function(t){return E(t[0])}).size(function(t){return A(W(t[0],t[1]))})),f.exit().remove(),d.exit().selectAll("path.nv-point").watchTransition(U,"scatter exit").attr("transform",function(t){return"translate("+ft.utils.NaNtoZero(w(C(t[0],t[1])))+","+ft.utils.NaNtoZero(M(S(t[0],t[1])))+")"}).remove(),f.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!O).classed("hover",!1)}),f.watchTransition(U,"scatter points").attr("transform",function(t){return"translate("+ft.utils.NaNtoZero(w(C(t[0],t[1])))+","+ft.utils.NaNtoZero(M(S(t[0],t[1])))+")"}).attr("d",ft.utils.symbol().type(function(t){return E(t[0])}).size(function(t){return A(W(t[0],t[1]))})),K?(clearTimeout(g),g=setTimeout(c,K)):c(),p=w.copy(),h=M.copy(),A.copy()}),U.renderEnd("scatter immediate"),$}return $.dispatch=Z,$.options=ft.utils.optionsFunc.bind($),$._calls=new function(){this.clearHighlights=function(){return ft.dom.write(function(){k.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,e,n){ft.dom.write(function(){k.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+e).classed("hover",n)})}},Z.on("elementMouseover.point",function(t){O&&$._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),Z.on("elementMouseout.point",function(t){O&&$._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),$._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return x},set:function(t){x=t}},xScale:{get:function(){return w},set:function(t){w=t}},yScale:{get:function(){return M},set:function(t){M=t}},pointScale:{get:function(){return A},set:function(t){A=t}},xDomain:{get:function(){return I},set:function(t){I=t}},yDomain:{get:function(){return H},set:function(t){H=t}},pointDomain:{get:function(){return X},set:function(t){X=t}},xRange:{get:function(){return G},set:function(t){G=t}},yRange:{get:function(){return Y},set:function(t){Y=t}},pointRange:{get:function(){return j},set:function(t){j=t}},forceX:{get:function(){return F},set:function(t){F=t}},forceY:{get:function(){return _},set:function(t){_=t}},forcePoint:{get:function(){return D},set:function(t){D=t}},interactive:{get:function(){return O},set:function(t){O=t}},pointActive:{get:function(){return N},set:function(t){N=t}},padDataOuter:{get:function(){return P},set:function(t){P=t}},padData:{get:function(){return B},set:function(t){B=t}},clipEdge:{get:function(){return T},set:function(t){T=t}},clipVoronoi:{get:function(){return L},set:function(t){L=t}},clipRadius:{get:function(){return z},set:function(t){z=t}},showVoronoi:{get:function(){return V},set:function(t){V=t}},id:{get:function(){return b},set:function(t){b=t}},interactiveUpdateDelay:{get:function(){return K},set:function(t){K=t}},x:{get:function(){return C},set:function(t){C=d3.functor(t)}},y:{get:function(){return S},set:function(t){S=d3.functor(t)}},pointSize:{get:function(){return W},set:function(t){W=d3.functor(t)}},pointShape:{get:function(){return E},set:function(t){E=d3.functor(t)}},margin:{get:function(){return v},set:function(t){v.top=void 0!==t.top?t.top:v.top,v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},duration:{get:function(){return e},set:function(t){e=t,U.reset(e)}},color:{get:function(){return y},set:function(t){y=ft.utils.getColor(t)}},useVoronoi:{get:function(){return Q},set:function(t){!1===(Q=t)&&(L=!1)}}}),ft.utils.initOptions($),$},ft.models.scatterChart=function(){"use strict";var c=ft.models.scatter(),d=ft.models.axis(),f=ft.models.axis(),p=ft.models.legend(),h=ft.models.distribution(),g=ft.models.distribution(),v=ft.models.tooltip(),m={top:30,right:20,bottom:50,left:75},x=null,y=null,b=null,k=ft.utils.defaultColor(),w=c.xScale(),M=c.yScale(),A=!1,C=!1,S=!0,W=!0,E=!0,F=!1,_=ft.utils.state(),D=null,O=d3.dispatch("stateChange","changeState","renderEnd"),e=null,N=250;c.xScale(w).yScale(M),d.orient("bottom").tickPadding(10),f.orient(F?"right":"left").tickPadding(10),h.axis("x"),g.axis("y"),v.headerFormatter(function(t,e){return d.tickFormat()(t,e)}).valueFormatter(function(t,e){return f.tickFormat()(t,e)});var B=ft.utils.renderWatch(O,N),P=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},T=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function L(t){return B.reset(),B.models(c),W&&B.models(d),E&&B.models(f),A&&B.models(h),C&&B.models(g),t.each(function(i){b=d3.select(this),ft.utils.initSVG(b);var t,e=ft.utils.availableWidth(x,b,m),n=ft.utils.availableHeight(y,b,m);if(L.update=function(){0===N?b.call(L):b.transition().duration(N).call(L)},L.container=this,_.setter(T(i),L.update).getter(P(i)).update(),_.disabled=i.map(function(t){return!!t.disabled}),!D)for(t in D={},_)_[t]instanceof Array?D[t]=_[t].slice(0):D[t]=_[t];if(!(i&&i.length&&i.filter(function(t){return t.values.length}).length))return ft.utils.noData(L,b),B.renderEnd("scatter immediate"),L;b.selectAll(".nv-noData").remove(),w=c.xScale(),M=c.yScale();var r=b.selectAll("g.nv-wrap.nv-scatterChart").data([i]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+c.id()).append("g"),o=r.select("g");if(a.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),a.append("g").attr("class","nv-x nv-axis"),a.append("g").attr("class","nv-y nv-axis"),a.append("g").attr("class","nv-scatterWrap"),a.append("g").attr("class","nv-regressionLinesWrap"),a.append("g").attr("class","nv-distWrap"),a.append("g").attr("class","nv-legendWrap"),F&&o.select(".nv-y.nv-axis").attr("transform","translate("+e+",0)"),S){var s=e;p.width(s),r.select(".nv-legendWrap").datum(i).call(p),m.top!=p.height()&&(m.top=p.height(),n=ft.utils.availableHeight(y,b,m)),r.select(".nv-legendWrap").attr("transform","translate(0,"+-m.top+")")}r.attr("transform","translate("+m.left+","+m.top+")"),c.width(e).height(n).color(i.map(function(t,e){return t.color=t.color||k(t,e),t.color}).filter(function(t,e){return!i[e].disabled})),r.select(".nv-scatterWrap").datum(i.filter(function(t){return!t.disabled})).call(c),r.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+c.id()+")");var l=r.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});l.enter().append("g").attr("class","nv-regLines");var u=l.selectAll(".nv-regLine").data(function(t){return[t]});u.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),u.filter(function(t){return t.intercept&&t.slope}).watchTransition(B,"scatterPlusLineChart: regline").attr("x1",w.range()[0]).attr("x2",w.range()[1]).attr("y1",function(t,e){return M(w.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return M(w.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return k(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),W&&(d.scale(w)._ticks(ft.utils.calcTicksX(e/100,i)).tickSize(-n,0),o.select(".nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")").call(d)),E&&(f.scale(M)._ticks(ft.utils.calcTicksY(n/36,i)).tickSize(-e,0),o.select(".nv-y.nv-axis").call(f)),A&&(h.getData(c.x()).scale(w).width(e).color(i.map(function(t,e){return t.color||k(t,e)}).filter(function(t,e){return!i[e].disabled})),a.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),o.select(".nv-distributionX").attr("transform","translate(0,"+M.range()[0]+")").datum(i.filter(function(t){return!t.disabled})).call(h)),C&&(g.getData(c.y()).scale(M).width(n).color(i.map(function(t,e){return t.color||k(t,e)}).filter(function(t,e){return!i[e].disabled})),a.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),o.select(".nv-distributionY").attr("transform","translate("+(F?e:-g.size())+",0)").datum(i.filter(function(t){return!t.disabled})).call(g)),p.dispatch.on("stateChange",function(t){for(var e in t)_[e]=t[e];O.stateChange(_),L.update()}),O.on("changeState",function(n){void 0!==n.disabled&&(i.forEach(function(t,e){t.disabled=n.disabled[e]}),_.disabled=n.disabled),L.update()}),c.dispatch.on("elementMouseout.tooltip",function(t){v.hidden(!0),b.select(".nv-chart-"+c.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),b.select(".nv-chart-"+c.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",g.size())}),c.dispatch.on("elementMouseover.tooltip",function(t){b.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-n),b.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+h.size()),v.data(t).hidden(!1)}),w.copy(),M.copy()}),B.renderEnd("scatter with line immediate"),L}return L.dispatch=O,L.scatter=c,L.legend=p,L.xAxis=d,L.yAxis=f,L.distX=h,L.distY=g,L.tooltip=v,L.options=ft.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return x},set:function(t){x=t}},height:{get:function(){return y},set:function(t){y=t}},container:{get:function(){return b},set:function(t){b=t}},showDistX:{get:function(){return A},set:function(t){A=t}},showDistY:{get:function(){return C},set:function(t){C=t}},showLegend:{get:function(){return S},set:function(t){S=t}},showXAxis:{get:function(){return W},set:function(t){W=t}},showYAxis:{get:function(){return E},set:function(t){E=t}},defaultState:{get:function(){return D},set:function(t){D=t}},noData:{get:function(){return e},set:function(t){e=t}},duration:{get:function(){return N},set:function(t){N=t}},margin:{get:function(){return m},set:function(t){m.top=void 0!==t.top?t.top:m.top,m.right=void 0!==t.right?t.right:m.right,m.bottom=void 0!==t.bottom?t.bottom:m.bottom,m.left=void 0!==t.left?t.left:m.left}},rightAlignYAxis:{get:function(){return F},set:function(t){F=t,f.orient(t?"right":"left")}},color:{get:function(){return k},set:function(t){k=ft.utils.getColor(t),p.color(k),h.color(k),g.color(k)}}}),ft.utils.inheritOptions(L,c),ft.utils.initOptions(L),L},ft.models.sparkline=function(){"use strict";var o,s,l,u,c={top:2,right:0,bottom:2,left:0},d=400,f=32,p=null,e=!0,h=d3.scale.linear(),g=d3.scale.linear(),v=function(t){return t.x},m=function(t){return t.y},x=ft.utils.getColor(["#000"]),t=d3.dispatch("renderEnd"),n=ft.utils.renderWatch(t);function i(t){return n.reset(),t.each(function(t){var e=d-c.left-c.right,n=f-c.top-c.bottom;p=d3.select(this),ft.utils.initSVG(p),h.domain(o||d3.extent(t,v)).range(l||[0,e]),g.domain(s||d3.extent(t,m)).range(u||[n,0]);var i=p.selectAll("g.nv-wrap.nv-sparkline").data([t]);i.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),i.select("g");i.attr("transform","translate("+c.left+","+c.top+")");var r=i.selectAll("path").data(function(t){return[t]});r.enter().append("path"),r.exit().remove(),r.style("stroke",function(t,e){return t.color||x(t,e)}).attr("d",d3.svg.line().x(function(t,e){return h(v(t,e))}).y(function(t,e){return g(m(t,e))}));var a=i.selectAll("circle.nv-point").data(function(n){var t=n.map(function(t,e){return m(t,e)});function e(t){if(-1==t)return null;var e=n[t];return e.pointIndex=t,e}var i=e(t.lastIndexOf(g.domain()[1]));return[e(t.indexOf(g.domain()[0])),i,e(t.length-1)].filter(function(t){return null!=t})});a.enter().append("circle"),a.exit().remove(),a.attr("cx",function(t,e){return h(v(t,t.pointIndex))}).attr("cy",function(t,e){return g(m(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return v(t,t.pointIndex)==h.domain()[1]?"nv-point nv-currentValue":m(t,t.pointIndex)==g.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),n.renderEnd("sparkline immediate"),i}return i.options=ft.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return o},set:function(t){o=t}},yDomain:{get:function(){return s},set:function(t){s=t}},xRange:{get:function(){return l},set:function(t){l=t}},yRange:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return g},set:function(t){g=t}},animate:{get:function(){return e},set:function(t){e=t}},x:{get:function(){return v},set:function(t){v=d3.functor(t)}},y:{get:function(){return m},set:function(t){m=d3.functor(t)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return x},set:function(t){x=ft.utils.getColor(t)}}}),i.dispatch=t,ft.utils.initOptions(i),i},ft.models.sparklinePlus=function(){"use strict";var d,f,p=ft.models.sparkline(),h={top:15,right:100,bottom:10,left:50},g=null,v=null,m=[],x=!1,y=d3.format(",r"),b=d3.format(",.2f"),k=!0,w=!0,M=!1,e=null,t=d3.dispatch("renderEnd"),n=ft.utils.renderWatch(t);function A(t){return n.reset(),n.models(p),t.each(function(n){var t=d3.select(this);ft.utils.initSVG(t);var e=ft.utils.availableWidth(g,t,h),i=ft.utils.availableHeight(v,t,h);if(A.update=function(){t.call(A)},A.container=this,!n||!n.length)return ft.utils.noData(A,t),A;t.selectAll(".nv-noData").remove();var r=p.y()(n[n.length-1],n.length-1);d=p.xScale(),f=p.yScale();var a=t.selectAll("g.nv-wrap.nv-sparklineplus").data([n]),o=a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),s=a.select("g");o.append("g").attr("class","nv-sparklineWrap"),o.append("g").attr("class","nv-valueWrap"),o.append("g").attr("class","nv-hoverArea"),a.attr("transform","translate("+h.left+","+h.top+")");var l=s.select(".nv-sparklineWrap");if(p.width(e).height(i),l.call(p),k){var u=s.select(".nv-valueWrap").selectAll(".nv-currentValue").data([r]);u.enter().append("text").attr("class","nv-currentValue").attr("dx",M?-8:8).attr("dy",".9em").style("text-anchor",M?"end":"start"),u.attr("x",e+(M?h.right:0)).attr("y",w?function(t){return f(t)}:0).style("fill",p.color()(n[n.length-1],n.length-1)).text(b(r))}function c(){if(!x){var t=s.selectAll(".nv-hoverValue").data(m),e=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+d(p.x()(n[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),m.length&&(e.append("line").attr("x1",0).attr("y1",-h.top).attr("x2",0).attr("y2",i),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-h.top).attr("text-anchor","end").attr("dy",".9em"),s.select(".nv-hoverValue .nv-xValue").text(y(p.x()(n[m[0]],m[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-h.top).attr("text-anchor","start").attr("dy",".9em"),s.select(".nv-hoverValue .nv-yValue").text(b(p.y()(n[m[0]],m[0]))))}}o.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(x)return;var t=d3.mouse(this)[0]-h.left;m=[function(t,e){for(var n=Math.abs(p.x()(t[0],0)-e),i=0,r=0;r<t.length;r++)Math.abs(p.x()(t[r],r)-e)<n&&(n=Math.abs(p.x()(t[r],r)-e),i=r);return i}(n,Math.round(d.invert(t)))],c()}).on("click",function(){x=!x}).on("mouseout",function(){m=[],c()}),s.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-h.left+","+-h.top+")"}).attr("width",e+h.left+h.right).attr("height",i+h.top)}),n.renderEnd("sparklinePlus immediate"),A}return A.dispatch=t,A.sparkline=p,A.options=ft.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},xTickFormat:{get:function(){return y},set:function(t){y=t}},yTickFormat:{get:function(){return b},set:function(t){b=t}},showLastValue:{get:function(){return k},set:function(t){k=t}},alignValue:{get:function(){return w},set:function(t){w=t}},rightAlignValue:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return e},set:function(t){e=t}},margin:{get:function(){return h},set:function(t){h.top=void 0!==t.top?t.top:h.top,h.right=void 0!==t.right?t.right:h.right,h.bottom=void 0!==t.bottom?t.bottom:h.bottom,h.left=void 0!==t.left?t.left:h.left}}}),ft.utils.inheritOptions(A,p),ft.utils.initOptions(A),A},ft.models.stackedArea=function(){"use strict";var p,h,g={top:0,right:0,bottom:0,left:0},v=960,m=500,x=ft.utils.defaultColor(),y=Math.floor(1e5*Math.random()),b=null,k=function(t){return t.x},w=function(t){return t.y},M=function(t,e){return!isNaN(w(t,e))&&null!==w(t,e)},e="stack",A="zero",C="default",S="linear",W=!1,E=ft.models.scatter(),n=250,F=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");E.pointSize(2.2).pointDomain([2.2,2.2]);var _=ft.utils.renderWatch(F,n);function D(t){return _.reset(),_.models(E),t.each(function(t){var e=v-g.left-g.right,n=m-g.top-g.bottom;b=d3.select(this),ft.utils.initSVG(b),p=E.xScale(),h=E.yScale();var s=t;t.forEach(function(t,n){t.seriesIndex=n,t.values=t.values.map(function(t,e){return t.index=e,t.seriesIndex=n,t})});var i=t.filter(function(t){return!t.disabled});t=d3.layout.stack().order(C).offset(A).values(function(t){return t.values}).x(k).y(w).out(function(t,e,n){t.display={y:n,y0:e}})(i);var r=b.selectAll("g.nv-wrap.nv-stackedarea").data([t]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),o=a.append("defs"),l=a.append("g"),u=r.select("g");l.append("g").attr("class","nv-areaWrap"),l.append("g").attr("class","nv-scatterWrap"),r.attr("transform","translate("+g.left+","+g.top+")"),0==E.forceY().length&&E.forceY().push(0),E.width(e).height(n).x(k).y(function(t){if(void 0!==t.display)return t.display.y+t.display.y0}).forceY([0]).color(t.map(function(t,e){return t.color=t.color||x(t,t.seriesIndex),t.color})),u.select(".nv-scatterWrap").datum(t).call(E),o.append("clipPath").attr("id","nv-edge-clip-"+y).append("rect"),r.select("#nv-edge-clip-"+y+" rect").attr("width",e).attr("height",n),u.attr("clip-path",W?"url(#nv-edge-clip-"+y+")":"");var c=d3.svg.area().defined(M).x(function(t,e){return p(k(t,e))}).y0(function(t){return h(t.display.y0)}).y1(function(t){return h(t.display.y+t.display.y0)}).interpolate(S),d=d3.svg.area().defined(M).x(function(t,e){return p(k(t,e))}).y0(function(t){return h(t.display.y0)}).y1(function(t){return h(t.display.y0)}),f=u.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});f.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return d(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),F.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),F.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),F.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),f.exit().remove(),f.style("fill",function(t,e){return t.color||x(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||x(t,t.seriesIndex)}),f.watchTransition(_,"stackedArea path").attr("d",function(t,e){return c(t.values,e)}),E.dispatch.on("elementMouseover.area",function(t){u.select(".nv-chart-"+y+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),E.dispatch.on("elementMouseout.area",function(t){u.select(".nv-chart-"+y+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),D.d3_stackedOffset_stackPercent=function(t){var e,n,i,r=t.length,a=t[0].length,o=[];for(n=0;n<a;++n){for(i=e=0;e<s.length;e++)i+=w(s[e].values[n]);if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=0}for(n=0;n<a;++n)o[n]=0;return o}}),_.renderEnd("stackedArea immediate"),D}return D.dispatch=F,(D.scatter=E).dispatch.on("elementClick",function(){F.elementClick.apply(this,arguments)}),E.dispatch.on("elementMouseover",function(){F.elementMouseover.apply(this,arguments)}),E.dispatch.on("elementMouseout",function(){F.elementMouseout.apply(this,arguments)}),D.interpolate=function(t){return arguments.length?(S=t,D):S},D.duration=function(t){return arguments.length?(n=t,_.reset(n),E.duration(n),D):n},D.dispatch=F,D.scatter=E,D.options=ft.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},defined:{get:function(){return M},set:function(t){M=t}},clipEdge:{get:function(){return W},set:function(t){W=t}},offset:{get:function(){return A},set:function(t){A=t}},order:{get:function(){return C},set:function(t){C=t}},interpolate:{get:function(){return S},set:function(t){S=t}},x:{get:function(){return k},set:function(t){k=d3.functor(t)}},y:{get:function(){return w},set:function(t){w=d3.functor(t)}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return x},set:function(t){x=ft.utils.getColor(t)}},style:{get:function(){return e},set:function(t){switch(e=t){case"stack":D.offset("zero"),D.order("default");break;case"stream":D.offset("wiggle"),D.order("inside-out");break;case"stream-center":D.offset("silhouette"),D.order("inside-out");break;case"expand":D.offset("expand"),D.order("default");break;case"stack_percent":D.offset(D.d3_stackedOffset_stackPercent),D.order("default")}}},duration:{get:function(){return n},set:function(t){n=t,_.reset(n),E.duration(n)}}}),ft.utils.inheritOptions(D,E),ft.utils.initOptions(D),D},ft.models.stackedAreaChart=function(){"use strict";var p,h,g=ft.models.stackedArea(),v=ft.models.axis(),m=ft.models.axis(),x=ft.models.legend(),y=ft.models.legend(),b=ft.interactiveGuideline(),e=ft.models.tooltip(),k={top:30,right:25,bottom:50,left:60},w=null,M=null,A=ft.utils.defaultColor(),C=!0,S=!0,W=!0,E=!0,F=!1,_=!1,D=!0,O="TOTAL",N=ft.utils.state(),B=null,n=null,P=d3.dispatch("stateChange","changeState","renderEnd"),T=250,L=["Stacked","Stream","Expanded"],V={},z=250;N.style=g.style(),v.orient("bottom").tickPadding(7),m.orient(F?"right":"left"),e.headerFormatter(function(t,e){return v.tickFormat()(t,e)}).valueFormatter(function(t,e){return m.tickFormat()(t,e)}),b.tooltip.headerFormatter(function(t,e){return v.tickFormat()(t,e)}).valueFormatter(function(t,e){return m.tickFormat()(t,e)});var I=null,H=null;y.updateState(!1);var i=ft.utils.renderWatch(P),G=(g.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:g.style()}}}),Y=function(t){return function(n){void 0!==n.style&&n.style,void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},X=d3.format("%");function j(t){return i.reset(),i.models(g),W&&i.models(v),E&&i.models(m),t.each(function(i){var t=d3.select(this),n=this;ft.utils.initSVG(t);var e,r=ft.utils.availableWidth(w,t,k),a=ft.utils.availableHeight(M,t,k);if(j.update=function(){t.transition().duration(z).call(j)},j.container=this,N.setter(Y(i),j.update).getter(G(i)).update(),N.disabled=i.map(function(t){return!!t.disabled}),!B)for(e in B={},N)N[e]instanceof Array?B[e]=N[e].slice(0):B[e]=N[e];if(!(i&&i.length&&i.filter(function(t){return t.values.length}).length))return ft.utils.noData(j,t),j;t.selectAll(".nv-noData").remove(),p=g.xScale(),h=g.yScale();var o=t.selectAll("g.nv-wrap.nv-stackedAreaChart").data([i]),s=o.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),l=o.select("g");if(s.append("rect").style("opacity",0),s.append("g").attr("class","nv-x nv-axis"),s.append("g").attr("class","nv-y nv-axis"),s.append("g").attr("class","nv-stackedWrap"),s.append("g").attr("class","nv-legendWrap"),s.append("g").attr("class","nv-controlsWrap"),s.append("g").attr("class","nv-interactive"),l.select("rect").attr("width",r).attr("height",a),S){var u=C?r-T:r;x.width(u),l.select(".nv-legendWrap").datum(i).call(x),k.top!=x.height()&&(k.top=x.height(),a=ft.utils.availableHeight(M,t,k)),l.select(".nv-legendWrap").attr("transform","translate("+(r-u)+","+-k.top+")")}if(C){var c=[{key:V.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=g.style(),style:"stack"},{key:V.stream||"Stream",metaKey:"Stream",disabled:"stream"!=g.style(),style:"stream"},{key:V.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=g.style(),style:"expand"},{key:V.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=g.style(),style:"stack_percent"}];T=L.length/3*260,c=c.filter(function(t){return-1!==L.indexOf(t.metaKey)}),y.width(T).color(["#444","#444","#444"]),l.select(".nv-controlsWrap").datum(c).call(y),k.top!=Math.max(y.height(),x.height())&&(k.top=Math.max(y.height(),x.height()),a=ft.utils.availableHeight(M,t,k)),l.select(".nv-controlsWrap").attr("transform","translate(0,"+-k.top+")")}if(o.attr("transform","translate("+k.left+","+k.top+")"),F&&l.select(".nv-y.nv-axis").attr("transform","translate("+r+",0)"),_&&(b.width(r).height(a).margin({left:k.left,top:k.top}).svgContainer(t).xScale(p),o.select(".nv-interactive").call(b)),g.width(r).height(a),l.select(".nv-stackedWrap").datum(i).transition().call(g),W&&(v.scale(p)._ticks(ft.utils.calcTicksX(r/100,i)).tickSize(-a,0),l.select(".nv-x.nv-axis").attr("transform","translate(0,"+a+")"),l.select(".nv-x.nv-axis").transition().duration(0).call(v)),E){var d;if(d="wiggle"===g.offset()?0:ft.utils.calcTicksY(a/36,i),m.scale(h)._ticks(d).tickSize(-r,0),"expand"===g.style()||"stack_percent"===g.style()){var f=m.tickFormat();I&&f===X||(I=f),m.tickFormat(X)}else I&&(m.tickFormat(I),I=null);l.select(".nv-y.nv-axis").transition().duration(0).call(m)}g.dispatch.on("areaClick.toggle",function(n){1===i.filter(function(t){return!t.disabled}).length?i.forEach(function(t){t.disabled=!1}):i.forEach(function(t,e){t.disabled=e!=n.seriesIndex}),N.disabled=i.map(function(t){return!!t.disabled}),P.stateChange(N),j.update()}),x.dispatch.on("stateChange",function(t){for(var e in t)N[e]=t[e];P.stateChange(N),j.update()}),y.dispatch.on("legendClick",function(t,e){t.disabled&&(c=c.map(function(t){return t.disabled=!0,t}),t.disabled=!1,g.style(t.style),N.style=g.style(),P.stateChange(N),j.update())}),b.dispatch.on("elementMousemove",function(r){g.clearHighlights();var a,o,s,l=[],u=0;if(i.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){o=ft.interactiveBisect(t.values,r.pointXValue,j.x());var n=t.values[o];if(null!=j.y()(n,o)&&g.highlightPoint(e,o,!0),void 0!==n){void 0===a&&(a=n),void 0===s&&(s=j.xScale()(j.x()(n,o)));var i="expand"==g.style()?n.display.y:j.y()(n,o);l.push({key:t.key,unit:t.unit,value:i,color:A(t,t.seriesIndex),stackedValue:n.display}),D&&"expand"!=g.style()&&(u+=i)}}),l.reverse(),2<l.length){var c=j.yScale().invert(r.mouseY),d=null;l.forEach(function(t,e){c=Math.abs(c);var n=Math.abs(t.stackedValue.y0),i=Math.abs(t.stackedValue.y);n<=c&&c<=i+n&&(d=e)}),null!=d&&(l[d].highlight=!0)}D&&"expand"!=g.style()&&2<=l.length&&l.push({key:O,value:u,total:!0});var t=j.x()(a,o),e=b.tooltip.valueFormatter();"expand"===g.style()||"stack_percent"===g.style()?(H=H||e,e=d3.format(".1%")):H&&(e=H,H=null),b.tooltip.chartContainer(n.parentNode).valueFormatter(e).data({value:t,series:l})(),b.renderGuideLine(s)}),b.dispatch.on("elementMouseout",function(t){g.clearHighlights()}),P.on("changeState",function(n){void 0!==n.disabled&&i.length===n.disabled.length&&(i.forEach(function(t,e){t.disabled=n.disabled[e]}),N.disabled=n.disabled),void 0!==n.style&&(g.style(n.style),n.style),j.update()})}),i.renderEnd("stacked Area chart immediate"),j}return g.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=g.x()(t.point),t.point.y=g.y()(t.point),e.data(t).hidden(!1)}),g.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),j.dispatch=P,j.stacked=g,j.legend=x,j.controls=y,j.xAxis=v,j.yAxis=m,j.interactiveLayer=b,j.tooltip=e,j.dispatch=P,j.options=ft.utils.optionsFunc.bind(j),j._options=Object.create({},{width:{get:function(){return w},set:function(t){w=t}},height:{get:function(){return M},set:function(t){M=t}},showLegend:{get:function(){return S},set:function(t){S=t}},showXAxis:{get:function(){return W},set:function(t){W=t}},showYAxis:{get:function(){return E},set:function(t){E=t}},defaultState:{get:function(){return B},set:function(t){B=t}},noData:{get:function(){return n},set:function(t){n=t}},showControls:{get:function(){return C},set:function(t){C=t}},controlLabels:{get:function(){return V},set:function(t){V=t}},controlOptions:{get:function(){return L},set:function(t){L=t}},showTotalInTooltip:{get:function(){return D},set:function(t){D=t}},totalLabel:{get:function(){return O},set:function(t){O=t}},margin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},duration:{get:function(){return z},set:function(t){z=t,i.reset(z),g.duration(z),v.duration(z),m.duration(z)}},color:{get:function(){return A},set:function(t){A=ft.utils.getColor(t),x.color(A),g.color(A)}},rightAlignYAxis:{get:function(){return F},set:function(t){F=t,m.orient(F?"right":"left")}},useInteractiveGuideline:{get:function(){return _},set:function(t){_=!!t,j.interactive(!t),j.useVoronoi(!t),g.scatter.interactive(!t)}}}),ft.utils.inheritOptions(j,g),ft.utils.initOptions(j),j},ft.models.sunburst=function(){"use strict";var u,c,d,f={top:0,right:0,bottom:0,left:0},p=null,h=null,g="count",v={count:function(t){return 1},size:function(t){return t.size}},m=Math.floor(1e4*Math.random()),x=null,y=ft.utils.defaultColor(),b=!0,k=500,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),M=d3.scale.linear().range([0,2*Math.PI]),A=d3.scale.sqrt(),C=d3.layout.partition().sort(null).value(function(t){return 1}),S=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,M(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,M(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,A(t.y))}).outerRadius(function(t){return Math.max(0,A(t.y+t.dy))}),e=ft.utils.renderWatch(w);function W(t){return e.reset(),t.each(function(t){x=d3.select(this);var e,n=ft.utils.availableWidth(p,x,f),i=ft.utils.availableHeight(h,x,f),a=Math.min(n,i)/2;ft.utils.initSVG(x);var r=x.selectAll(".nv-wrap.nv-sunburst").data(t),o=r.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+m).selectAll("nv-sunburst");function s(t){t.x0=t.x,t.dx0=t.dx}function l(t){var n=d3.interpolate(M.domain(),[t.x,t.x+t.dx]),i=d3.interpolate(A.domain(),[t.y,1]),r=d3.interpolate(A.range(),[t.y?20:0,a]);return function(e,t){return t?function(t){return S(e)}:function(t){return M.domain(n(t)),A.domain(i(t)).range(r(t)),S(e)}}}W.update=function(){0===k?x.call(W):x.transition().duration(k).call(W)},W.container=this,r.attr("transform","translate("+n/2+","+i/2+")"),x.on("click",function(t,e){w.chartClick({data:t,index:e,pos:d3.event,id:m})}),A.range([0,a]),u=u||t,d=t[0],C.value(v[g]||v.count),e=o.data(C.nodes).enter().append("path").attr("d",S).style("fill",function(t){return t.color?t.color:y(b?(t.children?t:t.parent).name:t.name)}).style("stroke","#FFF").on("click",function(t){c!==u&&u!==t&&(c=u),u=t,e.transition().duration(k).attrTween("d",l(t))}).each(s).on("dblclick",function(t){c.parent==t&&e.transition().duration(k).attrTween("d",l(d))}).each(s).on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),w.elementMouseover({data:t,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),w.elementMouseout({data:t})}).on("mousemove",function(t,e){w.elementMousemove({data:t})})}),e.renderEnd("sunburst immediate"),W}return W.dispatch=w,W.options=ft.utils.optionsFunc.bind(W),W._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},mode:{get:function(){return g},set:function(t){g=t}},id:{get:function(){return m},set:function(t){m=t}},duration:{get:function(){return k},set:function(t){k=t}},groupColorByParent:{get:function(){return b},set:function(t){b=!!t}},margin:{get:function(){return f},set:function(t){f.top=null!=t.top?t.top:f.top,f.right=null!=t.right?t.right:f.right,f.bottom=null!=t.bottom?t.bottom:f.bottom,f.left=null!=t.left?t.left:f.left}},color:{get:function(){return y},set:function(t){y=ft.utils.getColor(t)}}}),ft.utils.initOptions(W),W},ft.models.sunburstChart=function(){"use strict";var l=ft.models.sunburst(),e=ft.models.tooltip(),u={top:30,right:20,bottom:20,left:20},c=null,d=null,n=ft.utils.defaultColor(),i=(Math.round(1e5*Math.random()),null),r=null,f=250,t=d3.dispatch("stateChange","changeState","renderEnd");e.duration(0);var a=ft.utils.renderWatch(t);function p(t){return a.reset(),a.models(l),t.each(function(t){var e=d3.select(this);ft.utils.initSVG(e);var n=ft.utils.availableWidth(c,e,u),i=ft.utils.availableHeight(d,e,u);if(p.update=function(){0===f?e.call(p):e.transition().duration(f).call(p)},p.container=this,!t||!t.length)return ft.utils.noData(p,e),p;e.selectAll(".nv-noData").remove();var r=e.selectAll("g.nv-wrap.nv-sunburstChart").data(t),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),o=r.select("g");a.append("g").attr("class","nv-sunburstWrap"),r.attr("transform","translate("+u.left+","+u.top+")"),l.width(n).height(i);var s=o.select(".nv-sunburstWrap").datum(t);d3.transition(s).call(l)}),a.renderEnd("sunburstChart immediate"),p}return e.headerEnabled(!1).valueFormatter(function(t,e){return t}),l.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.size,color:t.color},e.data(t).hidden(!1)}),l.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),l.dispatch.on("elementMousemove.tooltip",function(t){e()}),p.dispatch=t,p.sunburst=l,p.tooltip=e,p.options=ft.utils.optionsFunc.bind(p),p._options=Object.create({},{noData:{get:function(){return r},set:function(t){r=t}},defaultState:{get:function(){return i},set:function(t){i=t}},color:{get:function(){return n},set:function(t){n=t,l.color(n)}},duration:{get:function(){return f},set:function(t){f=t,a.reset(f),l.duration(f)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}}}),ft.utils.inheritOptions(p,l),ft.utils.initOptions(p),p},ft.version="1.8.2"}();
//# sourceMappingURL=nv.d3.min.js.map